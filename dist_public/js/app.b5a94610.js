(function(){"use strict";var t={5771:function(t,e,s){var i=s(3751),a=s(641);const o=(0,a.Lk)("div",{id:"copyConfirmation"},[(0,a.Lk)("div",{id:"innerCopied"},"COPIED!")],-1);function n(t,e,s,i,n,l){const r=(0,a.g2)("Header"),d=(0,a.g2)("Toolbar"),h=(0,a.g2)("Main"),c=(0,a.g2)("Footer"),u=(0,a.g2)("UserSettings"),p=(0,a.g2)("LoginPrompt"),g=(0,a.g2)("Modal"),m=(0,a.g2)("Preview");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(r,{state:n.state},null,8,["state"]),(0,a.bF)(d,{state:n.state},null,8,["state"]),(0,a.bF)(h,{state:n.state},null,8,["state"]),(0,a.bF)(c,{state:n.state},null,8,["state"]),n.state.userSettingsVisible?((0,a.uX)(),(0,a.Wv)(u,{key:0,state:n.state},null,8,["state"])):(0,a.Q3)("",!0),n.state.showLoginPrompt?((0,a.uX)(),(0,a.Wv)(p,{key:1,state:n.state},null,8,["state"])):(0,a.Q3)("",!0),n.state.showModal?((0,a.uX)(),(0,a.Wv)(g,{key:2,state:n.state,content:n.state.modalContent},null,8,["state","content"])):(0,a.Q3)("",!0),n.state.showPreview?((0,a.uX)(),(0,a.Wv)(m,{key:3,state:n.state,link:n.state.previewLink},null,8,["state","link"])):(0,a.Q3)("",!0),o])}s(4114);const l=t=>((0,a.Qi)("data-v-7217efa3"),t=t(),(0,a.jt)(),t),r={class:"main",ref:"main"},d=l((()=>(0,a.Lk)("br",null,null,-1))),h=l((()=>(0,a.Lk)("br",null,null,-1))),c=l((()=>(0,a.Lk)("br",null,null,-1))),u=l((()=>(0,a.Lk)("br",null,null,-1))),p=l((()=>(0,a.Lk)("br",null,null,-1))),g=l((()=>(0,a.Lk)("br",null,null,-1))),m=l((()=>(0,a.Lk)("br",null,null,-1))),k=l((()=>(0,a.Lk)("br",null,null,-1))),w=l((()=>(0,a.Lk)("br",null,null,-1))),v=l((()=>(0,a.Lk)("br",null,null,-1))),f=l((()=>(0,a.Lk)("span",{style:{"font-size":".7em"}},"(per file)",-1))),b=l((()=>(0,a.Lk)("br",null,null,-1))),y=l((()=>(0,a.Lk)("br",null,null,-1))),L=l((()=>(0,a.Lk)("br",null,null,-1))),C=l((()=>(0,a.Lk)("span",{style:{"font-size":".7em"}},"(at a time)",-1))),P=l((()=>(0,a.Lk)("br",null,null,-1))),T=l((()=>(0,a.Lk)("br",null,null,-1))),I=l((()=>(0,a.Lk)("br",null,null,-1))),U=l((()=>(0,a.Lk)("div",{style:{"font-size":".6em"}},[(0,a.eW)(" WARRANTY: none"),(0,a.Lk)("br"),(0,a.Lk)("br"),(0,a.eW)(" this website is a work-in-progress."),(0,a.Lk)("br"),(0,a.eW)(" your files will likely be deleted")],-1))),S={key:1,class:"links"};function A(t,e,s,o,n,l){const A=(0,a.g2)("Link");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",{id:"dropTarget",class:"dropTarget",onDragover:e[1]||(e[1]=(0,i.D$)((()=>{}),["prevent"])),onDrop:e[2]||(e[2]=(0,i.D$)((t=>l.dropFiles(t)),["prevent"])),onClick:e[3]||(e[3]=()=>{}),ref:"dropTarget"},[s.state.userLinks.length||s.state.links.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",{key:0,ref:"dropTargetCaption",id:"dropTargetCaption",style:{cursor:"pointer"},onClick:e[0]||(e[0]=t=>this.loadFiles())},[(0,a.eW)(" throw sum filez [click/drop]"),d,h,(0,a.eW)(" accepted : gif"),c,(0,a.eW)("            web[p/m]"),u,(0,a.eW)("            png"),p,(0,a.eW)("            jp[e]g"),g,(0,a.eW)("            mp4"),m,(0,a.eW)("            mp3"),k,w,(0,a.eW)(" max size : 25MB"),v,f,b,y,(0,a.eW)(" max files: 15"),L,C,P,T,I,U],512)),s.state.links.length||s.state.userLinks.length?((0,a.uX)(),(0,a.CE)("div",S,[s.state.links.length?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(s.state.links,(t=>((0,a.uX)(),(0,a.Wv)(A,{state:s.state,link:t,linkMode:"link",key:t.id},null,8,["state","link"])))),128)):(0,a.Q3)("",!0),s.state.userLinks.length?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(s.state.userLinks,(t=>((0,a.uX)(),(0,a.Wv)(A,{state:s.state,link:t,linkMode:"userLink",key:t.id},null,8,["state","link"])))),128)):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)],544)],512)}const D=t=>((0,a.Qi)("data-v-1dfb84f8"),t=t(),(0,a.jt)(),t),x={class:"link",ref:"anchor"},N=["for"],M=["id"],E=D((()=>(0,a.Lk)("span",{class:"checkmark",style:{"margin-left":"-30px"}},null,-1))),j=D((()=>(0,a.Lk)("span",{style:{"font-size":".75em","margin-top":"5px",display:"block",color:"#4f88",padding:"0","margin-left":"-34px"}},"select",-1))),$=D((()=>(0,a.Lk)("br",null,null,-1))),R=["innerHTML"],X={class:"linkButtons"},O=D((()=>(0,a.Lk)("br",null,null,-1))),B=["href"],Q=D((()=>(0,a.Lk)("br",null,null,-1))),W=D((()=>(0,a.Lk)("br",null,null,-1))),z=D((()=>(0,a.Lk)("br",null,null,-1))),F={class:"assetData"},_=D((()=>(0,a.Lk)("td",{class:"tdLeft"},"age",-1))),H=["innerHTML"],V=D((()=>(0,a.Lk)("td",{class:"tdLeft"},"size",-1))),J=["innerHTML"],K=D((()=>(0,a.Lk)("td",{class:"tdLeft"},"name",-1))),Y=["innerHTML"];function q(t,e,s,o,n,l){return(0,a.uX)(),(0,a.CE)("div",x,[s.state.loggedIn?((0,a.uX)(),(0,a.CE)("label",{for:s.link.linkType+s.link.ct,class:"checkboxLabel",key:s.link.linkType+s.link.ct+"key"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>s.link.selected=t),onInput:e[1]||(e[1]=t=>l.updateLinkSelected()),id:s.link.linkType+s.link.ct},null,40,M),[[i.lH,s.link.selected]]),E,j,$],8,N)):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:"views",innerHTML:l.views},null,8,R),(0,a.Lk)("div",{class:"linkThumb",ref:"linkThumb",onClick:e[2]||(e[2]=(0,i.D$)((t=>l.preview()),["prevent","stop"])),title:"view this asset"},null,512),(0,a.Lk)("div",X,[(0,a.Lk)("div",{class:"copyLinkButton",onClick:e[3]||(e[3]=(0,i.D$)((t=>l.copy()),["prevent","stop"])),title:"copy link to clipboard"}),O,(0,a.Lk)("a",{href:s.link.href,class:"openButton",onClick:e[4]||(e[4]=(0,i.D$)((t=>l.open()),["prevent","stop"])),title:"open link in new tab"},null,8,B),Q,(0,a.Lk)("div",{class:"downloadButton",onClick:e[5]||(e[5]=(0,i.D$)((t=>l.download()),["prevent","stop"])),title:"download asset"}),W]),z,(0,a.Lk)("table",F,[(0,a.Lk)("tr",null,[_,(0,a.Lk)("td",{class:"tdRight",innerHTML:l.age},null,8,H)]),(0,a.Lk)("tr",null,[V,(0,a.Lk)("td",{class:"tdRight",innerHTML:l.size},null,8,J)]),(0,a.Lk)("tr",null,[K,(0,a.Lk)("td",{class:"tdRight",innerHTML:l.fileName},null,8,Y)])])],512)}var G={name:"Link",props:["state","link"],data(){return{c:document.createElement("canvas"),x:null,linkType:"",img:null,w:0,h:0,t:0}},computed:{views(){return"views: "+this.link.views.toLocaleString()},fileName(){let t=this.link.origin.split(": ")[1];return t.length>23&&(t=t.substring(0,10)+"..."+t.substring(t.length-10)),t},size(){let t,e=1048576,s=this.link.size,i=s/e|0,a=(s/e-i)*e/1024|0;return t=i?Math.round(s/e*100)/100+" MB":a?Math.round((s/e-i)*e/1024*100)/100+" KB":this.link.size.toLocaleString()+" B",t},age(){let t=((new Date-new Date(this.link.date))/1e3|0)+3600*((new Date).getTimezoneOffset()/60-4),e=t/31536e3|0,s=31536e3*(t/31536e3-e)/86400|0,i=86400*(31536e3*(t/31536e3-e)/86400-s)/3600|0,a=3600*(86400*(31536e3*(t/31536e3-e)/86400-s)/3600-i)/60|0,o="";return o+=e?`${e} year${e>1?"s":""}, `:"",o+=s?`${s} day${s>1?"s":""}, `:"",o+=i?`${i} hour${i>1?"s":""}, `:"",o+=a?`${a} minute${a>1?"s":""}`:"",o||"added just now..."}},methods:{download(){let t=document.createElement("a");t.download=this.fileName,t.href=this.link.href,t.style.position="absolute",t.style.opacity=.01,document.body.appendChild(t),t.click(),t.remove()},updateLinkSelected(){this.link.selected?this.link.selected=!1:this.link.selected=!0,console.log("selected",this.link.selected)},copy(){this.state.copy(this.link.href)},open(){open(this.link.href,"_blank")},preview(){this.state.previewPosition=this.link.ct,this.state.previewPosition+="userLink"==this.link.linkType?this.state.links.length:0,this.state.previewLink=this.link,this.state.showPreview=!0},Draw(){this.x.globalAlpha=1,this.x.fillStyle="#0008",this.x.fillRect(0,0,this.c.width,this.c.height);let t,e="contain";switch(e){case"contain":t=this.c.width/this.c.height<=1.777777778?this.c.width/this.w:this.c.height/this.h;break;case"cover":t=this.c.width/this.c.height>1.777777778?this.c.width/this.w:this.c.height/this.h;break}let s=5,i=this.w*t-s,a=this.h*t-s;switch(this.x.drawImage(this.img,this.c.width/2-i/2,this.c.height/2-a/2,i,a),this.t+=1/60,this.linkType){case"image":this.img.width||setTimeout((()=>{requestAnimationFrame(this.Draw)}),200);break;case"video":requestAnimationFrame(this.Draw);break}}},mounted(){if(this.$refs.linkThumb.appendChild(this.c),this.x=this.c.getContext("2d"),this.linkType=this.link.type.split("/")[0],this.c.width=500,this.c.height=500/1.77777778,this.c.style.width="200px",this.c.style.height="113px",this.c.style.borderRadius="20px","video"==this.linkType&&(this.img=document.createElement("video"),this.img.loop=!0,this.img.muted=!0,this.img.oncanplay=()=>{this.w=this.img.videoWidth,this.h=this.img.videoHeight,this.img.play(),this.Draw()},this.img.src=this.link.href),"image"==this.linkType||"audio"==this.linkType){let t;this.img=new Image,this.img.onload=()=>{this.w=this.img.width,this.h=this.img.height,this.Draw()},this.img.src="audio"==this.linkType?"musicNotes.svg":"thumb.php?res=resources/"+(t=this.link.href.split("/"))[t.length-1].split("?")[0]}}},Z=s(6262);const tt=(0,Z.A)(G,[["render",q],["__scopeId","data-v-1dfb84f8"]]);var et=tt,st={name:"Main",props:["state"],components:{Link:et},data(){return{preload:[],rejects:[]}},methods:{processUpload(t){this.state.uploadInprogress=!0,this.state.modalContent='<div style="position: absolute;left:0;top:0;width:100%;height:100%;background:#000;"><video src="loading.mp4" style="min-width:50vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); pointer-events: none; opacity: .6;" loop autoplay muted></video></div>',this.state.showModal=!0,this.$nextTick((()=>{let e=0,s=new FormData;t.map(((t,i)=>{console.log(`file ${i}: `,t),t.size>25e6?this.rejects=[...this.rejects,t]:(e++,s.append(`uploads_${i}`,t))}));let i='<div style="min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #4008; color: #f88; padding-top: 100px;">';if(this.rejects.map((t=>{let e=(t.size/1e6|0).toLocaleString("en-us")+" MB<br>";i+=`oversized/rejected: size: ${e} "${t.name}" <br><br>`})),this.rejects.length&&(this.state.modalQueue=[...this.state.modalQueue,i+"</div>"],this.state.closeModal()),e){let t={loggedIn:this.state.loggedIn,userID:this.state.loggedinUserID,passhash:this.state.passhash,description:""};console.log("batchMetaData",t),s.append("batchMetaData",JSON.stringify(t)),fetch("upload.php",{method:"POST",body:s}).then((t=>t.json())).then((t=>{console.log("response from upload.php: ",t),this.state.uploadInprogress=!1,t[0]?(t[1].map(((e,s)=>{this.addLink(t[2][s],t[3][s],s,location.href.split("?")[0]+e,!1,this.state.loggedinUserID,t[6][s],t[7][s],t[8][s],t[9],t[10])})),this.state.modalContent="",this.state.closeModal(),this.state.loggedIn&&(this.state.links=[],this.state.fetchUserLinks(this.state.loggedinUserID))):this.state.modalContent='<div style="min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #8002; color: #f88; padding-top: 100px;">'+t[5]+"</div>"}))}}))},dropFiles(t){let e=[];t.dataTransfer.items?[...t.dataTransfer.items].forEach(((t,s)=>{if("file"===t.kind){const s=t.getAsFile();e=[...e,s]}})):e=Array.from(t.dataTransfer.files),e.length&&this.processUpload(e)},addLink(t,e,s,i,a,o,n,l,r,d){let h={size:t,type:e,ct:s,href:i,slug:n,origin:r,selected:a,userID:o,originalSlug:l,linkType:"link",serverTZO:d,views:views};this.state.links.push(h)},loadFiles(){let t=document.createElement("input");t.type="file",t.multiple=!0,t.accept="image/gif, image/jiff, image/jpeg, image/jpg, image/png, image/webp, video/mp4, video/webm, video/mkv, audio/mp3, audio/wav, audio/mpeg",t.onchange=()=>this.processUpload(Array.from(t.files)),t.click()}},mounted(){this.state.loadFiles=this.loadFiles,this.preload=[...this.preload,[document.createElement("video"),"loading.mp4"]],this.preload.map((t=>{t[0].src=t[1]}))}};const it=(0,Z.A)(st,[["render",A],["__scopeId","data-v-7217efa3"]]);var at=it;const ot={class:"modal"},nt=["innerHTML"];function lt(t,e,s,i,o,n){return(0,a.uX)(),(0,a.CE)("div",ot,[this.state.uploadInProgress?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:e[0]||(e[0]=t=>n.close()),class:"cancelButton",title:"close this view [ESC]"}," close/cancel ")),(0,a.Lk)("div",{class:"modalInner",innerHTML:s.content},null,8,nt)])}var rt={name:"Modal",props:["state","content"],methods:{close(){this.state.closeModal()}},mounted(){}};const dt=(0,Z.A)(rt,[["render",lt],["__scopeId","data-v-d2bf34ba"]]);var ht=dt;const ct={class:"header"};function ut(t,e,s,i,o,n){const l=(0,a.g2)("User");return(0,a.uX)(),(0,a.CE)("div",ct,[(0,a.Lk)("div",{class:"headerImg",onClick:e[0]||(e[0]=t=>n.reload())}),s.state.loggedIn?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(l,{key:0,state:s.state},null,8,["state"]))])}var pt=s(33);const gt={key:0},mt={key:1},kt={class:"userButtonContainer"},wt={class:"loggedIn"},vt=["title"];function ft(t,e,s,i,o,n){return(0,a.uX)(),(0,a.CE)("div",{class:(0,pt.C4)(["user",{loggedInWidth:s.state.loggedIn,notLoggedInWidth:!s.state.loggedIn}])},[s.state.loggedIn?((0,a.uX)(),(0,a.CE)("div",mt,[(0,a.Lk)("div",kt,[(0,a.Lk)("button",{onClick:e[2]||(e[2]=t=>n.logout()),title:"log out",class:"userbutton"},"logout"),(0,a.Lk)("button",{onClick:e[3]||(e[3]=t=>n.userFiles()),title:"go to your assets",style:{"background-color":"#80fc",color:"#fff"},class:"userbutton"},"my assets"),(0,a.Lk)("button",{onClick:e[4]||(e[4]=t=>n.showSettings()),title:"show user settings",class:"userbutton"},"settings"),(0,a.Lk)("button",{onClick:e[5]||(e[5]=t=>n.explore()),title:"learn more about similar tools offered",style:{"background-color":"#08fc",color:"#fff"},class:"userbutton"},"explore")]),(0,a.Lk)("div",wt,[(0,a.Lk)("div",{onClick:e[6]||(e[6]=t=>n.showSettings()),class:"avatar",title:`logged in as ${s.state.loggedinUserName}. click to show user settings`,style:(0,pt.Tr)(`background-image: url(${s.state.loggedInUser.avatar})`)},null,12,vt)])])):((0,a.uX)(),(0,a.CE)("div",gt,[(0,a.Lk)("button",{onClick:e[0]||(e[0]=t=>n.login()),class:"loginButton",title:"sign in"}," login "),(0,a.Lk)("button",{onClick:e[1]||(e[1]=t=>s.state.register()),class:"loginButton",style:{top:"26px"},title:"register anonymously.<br><br>we only need a user name as<br>something to attach your files to"}," register ")]))],2)}var bt={name:"Login",props:["state"],data(){return{}},methods:{explore(){open("https://whr.rf.gd/a/about","_blank")},userFiles(){this.state.fetchUserLinks(this.state.loggedinUserID)},showSettings(){this.state.showUserSettings()},login(){this.state.showRegister=!1,this.state.showLoginPrompt=!0},logout(){this.state.logout()},toggleLogin(){this.state.loggedin||this.state.showLoginPrompt()}},mounted(){}};const yt=(0,Z.A)(bt,[["render",ft],["__scopeId","data-v-b347a556"]]);var Lt=yt,Ct={name:"Header",props:["state"],components:{User:Lt},data(){return{}},methods:{reload(){window.location.reload()}},mounted(){}};const Pt=(0,Z.A)(Ct,[["render",ut],["__scopeId","data-v-c1a2b010"]]);var Tt=Pt;const It={class:"footer"},Ut=["innerHTML"];function St(t,e,s,i,o,n){return(0,a.uX)(),(0,a.CE)("div",It,[(0,a.Lk)("span",{innerHTML:s.state.footerMsg},null,8,Ut)])}var At={name:"Footer",props:["state"],data(){return{}},methods:{},mounted(){}};const Dt=(0,Z.A)(At,[["render",St],["__scopeId","data-v-4bca771a"]]);var xt=Dt;const Nt={class:"preview"},Mt={class:"previewInner"},Et={class:"slideshow",ref:"slideshow"};function jt(t,e,s,i,o,n){return(0,a.uX)(),(0,a.CE)("div",Nt,[(0,a.Lk)("button",{onClick:e[0]||(e[0]=t=>n.close()),class:"cancelButton",title:"close this view"}," close/cancel "),(0,a.Lk)("div",Mt,[(0,a.Lk)("div",Et,null,512),s.state.links.length>1?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"leftButton",onClick:e[1]||(e[1]=t=>s.state.prev()),title:"view previous asset [left arrow]"})):(0,a.Q3)("",!0),s.state.links.length>1?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"rightButton",onClick:e[2]||(e[2]=t=>s.state.next()),title:"view next asset [right arrow]"})):(0,a.Q3)("",!0),s.state.userLinks.length>1?((0,a.uX)(),(0,a.CE)("div",{key:2,class:"leftButton",onClick:e[3]||(e[3]=t=>s.state.prev()),title:"view previous asset [left arrow]"})):(0,a.Q3)("",!0),s.state.userLinks.length>1?((0,a.uX)(),(0,a.CE)("div",{key:3,class:"rightButton",onClick:e[4]||(e[4]=t=>s.state.next()),title:"view next asset [right arrow]"})):(0,a.Q3)("",!0)])])}var $t={name:"Preview",props:["state","link"],data(){return{asset:null,linkType:""}},methods:{close(){this.state.closePreview()}},mounted(){this.linkType=this.link.type.split("/")[0],"image"!=this.linkType&&"audio"!=this.linkType||(this.asset=document.createElement("div"),this.asset.style.top="50%",this.asset.style.left="50%",this.asset.style.width="100%",this.asset.style.height="100%",this.asset.style.position="absolute",this.asset.style.transform="translate(-50%, -50%)",this.asset.style.objectFit="contain",this.asset.style.backgroundColor="#000",this.asset.style.backgroundSize="contain",this.asset.style.backgroundRepeat="no-repeat",this.asset.style.backgroundPosition="center center",this.asset.style.backgroundImage=`url(${"audio"==this.linkType?"musicNotes.svg":this.link.href})`,this.$refs.slideshow.appendChild(this.asset)),"audio"==this.linkType&&(this.asset=document.createElement("audio"),this.asset.controls=!0,this.asset.style.position="absolute",this.asset.style.left="50%",this.asset.style.top="50%",this.asset.loop=!0,this.asset.style.transform="translate(-50%, -50%)",this.asset.oncanplay=()=>{this.asset.play()},this.$refs.slideshow.appendChild(this.asset),this.asset.src=this.link.href),"video"==this.linkType&&(this.asset=document.createElement("video"),this.asset.controls=!0,this.asset.style.position="absolute",this.asset.style.left="50%",this.asset.style.top="50%",this.asset.style.width="100%",this.asset.style.height="100%",this.asset.style.objectFit="contain",this.asset.style.background="#000",this.asset.loop=!0,this.asset.style.transform="translate(-50%, -50%)",this.asset.oncanplay=()=>{this.asset.play()},this.$refs.slideshow.appendChild(this.asset),this.asset.src=this.link.href)},beforeUnmount(){this.asset.src=""}};const Rt=(0,Z.A)($t,[["render",jt],["__scopeId","data-v-ab26ee0c"]]);var Xt=Rt;const Ot=t=>((0,a.Qi)("data-v-60ffa31c"),t=t(),(0,a.jt)(),t),Bt={class:"toolbar"},Qt={key:0,class:"toolbarSection"},Wt=Ot((()=>(0,a.Lk)("span",{style:{"margin-left":"5px","font-size":".8em"}},"[w/selected→]",-1))),zt=["disabled"],Ft={key:1,class:"toolbarSection"},_t=["disabled"],Ht=["disabled"],Vt=["innerHTML"],Jt={key:2,class:"toolbarSection"};function Kt(t,e,s,i,o,n){const l=(0,a.g2)("User");return(0,a.uX)(),(0,a.CE)("div",Bt,[(0,a.bF)(l,{state:s.state},null,8,["state"]),(0,a.Lk)("button",{onClick:e[0]||(e[0]=t=>s.state.loadFiles()),class:"toolbarButtons"}," upload "),s.state.loggedIn?((0,a.uX)(),(0,a.CE)("div",Qt,[Wt,(0,a.Lk)("button",{onClick:e[1]||(e[1]=t=>s.state.deleteSelected()),class:(0,pt.C4)(["toolbarButtons",{deleteButton:n.someSelected,disabledButton:!n.someSelected}]),disabled:!n.someSelected,title:"delete selected [del]"}," delete ",10,zt)])):(0,a.Q3)("",!0),s.state.loggedIn?((0,a.uX)(),(0,a.CE)("div",Ft,[(0,a.Lk)("button",{onClick:e[2]||(e[2]=t=>s.state.selectAll()),class:(0,pt.C4)(["toolbarButtons",{buttons:!n.allSelected,disabledButton:n.allSelected}]),disabled:n.allSelected,title:"select all [ctrl + a]"}," select all ",10,_t),(0,a.Lk)("button",{onClick:e[3]||(e[3]=t=>s.state.deSelectAll()),class:(0,pt.C4)(["toolbarButtons",{buttons:n.someSelected,disabledButton:!n.someSelected}]),disabled:!n.someSelected,title:"de-select all [ctrl + shift + a]"}," deselect all ",10,Ht),(0,a.Lk)("div",{class:"username",innerHTML:"welcome, "+s.state.username},null,8,Vt)])):((0,a.uX)(),(0,a.CE)("div",Jt))])}var Yt={name:"Toolbar",props:["state"],components:{User:Lt},data(){return{}},computed:{someSelected(){return this.state.links.filter((t=>t.selected)).length||this.state.userLinks.filter((t=>t.selected)).length},allSelected(){return this.state.links.filter((t=>t.selected)).length+this.state.userLinks.filter((t=>t.selected)).length==this.state.links.length+this.state.userLinks.length}},methods:{},mounted(){}};const qt=(0,Z.A)(Yt,[["render",Kt],["__scopeId","data-v-60ffa31c"]]);var Gt=qt;const Zt=t=>((0,a.Qi)("data-v-b65192d2"),t=t(),(0,a.jt)(),t),te={class:"LoginPrompt"},ee={class:"mainLoginContainer"},se={key:0},ie=Zt((()=>(0,a.Lk)("span",{class:"title"},"login",-1))),ae=Zt((()=>(0,a.Lk)("br",null,null,-1))),oe={class:"inputContainer"},ne=Zt((()=>(0,a.Lk)("div",{class:"inputTitle"},"User Name",-1))),le=Zt((()=>(0,a.Lk)("br",null,null,-1))),re={class:"inputContainer"},de=Zt((()=>(0,a.Lk)("div",{class:"inputTitle"},"Password",-1))),he=Zt((()=>(0,a.Lk)("br",null,null,-1))),ce={key:0,class:"invalidLogin"},ue=Zt((()=>(0,a.Lk)("div",{class:"spacerDiv",style:{"margin-top":"30px"}},null,-1))),pe={key:1},ge=Zt((()=>(0,a.Lk)("div",{class:"spacerDiv",style:{"margin-top":"10px"}},null,-1))),me=Zt((()=>(0,a.Lk)("br",null,null,-1))),ke={key:0,class:"mustRegister"},we=Zt((()=>(0,a.Lk)("br",null,null,-1))),ve=Zt((()=>(0,a.Lk)("br",null,null,-1))),fe=Zt((()=>(0,a.Lk)("span",{class:"title"},"register",-1))),be=Zt((()=>(0,a.Lk)("br",null,null,-1))),ye={class:"inputContainer"},Le={class:"inputTitle"},Ce={key:0,style:{display:"inline-block",color:"#f00"}},Pe=Zt((()=>(0,a.Lk)("i",null,"user name unavailable",-1))),Te={key:1,style:{display:"inline-block",color:"#0f4"}},Ie=Zt((()=>(0,a.Lk)("i",null,"user name available",-1))),Ue=Zt((()=>(0,a.Lk)("br",null,null,-1))),Se={class:"inputContainer"},Ae={class:"inputTitle"},De={key:0,style:{display:"inline-block",color:"#f00"}},xe={key:1,style:{display:"inline-block",color:"#0f4"}},Ne=Zt((()=>(0,a.Lk)("i",null,"passwords match!",-1))),Me=Zt((()=>(0,a.Lk)("br",null,null,-1))),Ee={class:"inputContainer"},je=Zt((()=>(0,a.Lk)("div",{class:"inputTitle"},"Confirm Password",-1))),$e=Zt((()=>(0,a.Lk)("br",null,null,-1))),Re=["disabled"],Xe={key:1,class:"invalidLogin"},Oe={style:{position:"absolute","z-index":"-1",opacity:"0"},ref:"bottomTabAnchor",type:"text"};function Be(t,e,s,o,n,l){return(0,a.uX)(),(0,a.CE)("div",te,[(0,a.Lk)("div",ee,[s.state.showRegister?((0,a.uX)(),(0,a.CE)("div",pe,[ge,(0,a.Lk)("button",{class:"toggleButton",onClick:e[11]||(e[11]=t=>l.toggleView())}," ↑   login   ↑ "),me,s.state.displayLoginRequired?((0,a.uX)(),(0,a.CE)("div",ke,[(0,a.eW)(" You must register or"),we,(0,a.eW)(" log-in to create a demo!"),ve])):(0,a.Q3)("",!0),fe,be,(0,a.Lk)("div",ye,[(0,a.Lk)("div",Le,[(0,a.eW)(" User Name "),n.userNameAvailable?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",Ce,[(0,a.eW)("     "),Pe])),n.userNameAvailable&&s.state.regusername?((0,a.uX)(),(0,a.CE)("div",Te,[(0,a.eW)("     "),Ie])):(0,a.Q3)("",!0)]),(0,a.Lk)("input",{style:{position:"absolute","z-index":"-1",opacity:"0"},ref:"loginTabAnchor",type:"text",onKeydown:[e[12]||(e[12]=(0,i.jR)((t=>l.submit()),["enter"])),e[13]||(e[13]=(0,i.jR)((0,i.D$)((e=>t.$refs.bottomTabAnchor.focus()),["shift"]),["tab"]))]},null,544),(0,a.bo)((0,a.Lk)("input",{type:"text",ref:"regusername","onUpdate:modelValue":e[14]||(e[14]=t=>s.state.regusername=t),class:(0,pt.C4)(["input",{userNameUnavailable:!n.userNameAvailable,userNameAvailable:n.userNameAvailable&&s.state.regusername}]),maxlength:"16",onInput:e[15]||(e[15]=t=>l.checkUserNameAvailability()),onKeydown:[e[16]||(e[16]=(0,i.jR)((t=>l.submit()),["enter"])),e[17]||(e[17]=(0,i.jR)((0,i.D$)((e=>t.$refs.bottomTabAnchor.focus()),["shift"]),["tab"]))]},null,34),[[i.Jo,s.state.regusername]]),Ue]),(0,a.Lk)("div",Se,[(0,a.Lk)("div",Ae,[(0,a.eW)(" Password "),!l.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword?((0,a.uX)(),(0,a.CE)("div",De,"     passwords do not match ")):(0,a.Q3)("",!0),l.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword?((0,a.uX)(),(0,a.CE)("div",xe,[(0,a.eW)("     "),Ne])):(0,a.Q3)("",!0)]),(0,a.bo)((0,a.Lk)("input",{type:"password",ref:"regpassword","onUpdate:modelValue":e[18]||(e[18]=t=>s.state.regpassword=t),class:(0,pt.C4)(["input",{passwordsDoNotMatch:!l.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword,passwordsMatch:l.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword}]),onKeydown:e[19]||(e[19]=(0,i.jR)((t=>l.submit()),["enter"]))},null,34),[[i.Jo,s.state.regpassword]]),Me]),(0,a.Lk)("div",Ee,[je,(0,a.bo)((0,a.Lk)("input",{type:"password",ref:"confirmpassword","onUpdate:modelValue":e[20]||(e[20]=t=>s.state.confirmpassword=t),class:(0,pt.C4)(["input",{passwordsDoNotMatch:!l.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword,passwordsMatch:l.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword}]),onKeydown:e[21]||(e[21]=(0,i.jR)((t=>l.submit()),["enter"]))},null,34),[[i.Jo,s.state.confirmpassword]]),$e]),(0,a.Lk)("button",{onClick:e[22]||(e[22]=t=>l.submit()),disabled:!l.validate,class:(0,pt.C4)({disabledButton:!l.validate})},"submit",10,Re),(0,a.Lk)("button",{onClick:e[23]||(e[23]=t=>l.closePrompt()),onKeydown:[e[24]||(e[24]=(0,i.jR)((e=>t.$refs.loginTabAnchor.focus()),["tab"])),e[25]||(e[25]=(0,i.jR)((0,i.D$)((e=>t.$refs.cancelButton.focus()),["shift"]),["tab"]))],ref:"cancelButton",style:{background:"#faa"}},"cancel",544),n.showInvalid?((0,a.uX)(),(0,a.CE)("div",Xe," Whoa! check your info... ")):(0,a.Q3)("",!0),(0,a.Lk)("input",Oe,null,512)])):((0,a.uX)(),(0,a.CE)("div",se,[ie,ae,(0,a.Lk)("div",oe,[ne,(0,a.Lk)("input",{style:{position:"absolute","z-index":"-1",opacity:"0"},ref:"loginTabAnchor",onKeydown:e[0]||(e[0]=(0,i.jR)((0,i.D$)((e=>t.$refs.bottomTabAnchor.focus()),["shift"]),["tab"])),type:"text"},null,544),(0,a.bo)((0,a.Lk)("input",{type:"text",ref:"username","onUpdate:modelValue":e[1]||(e[1]=t=>s.state.username=t),class:"input",onKeydown:[e[2]||(e[2]=(0,i.jR)((t=>s.state.login()),["enter"])),e[3]||(e[3]=(0,i.jR)((0,i.D$)((e=>t.$refs.bottomTabAnchor.focus()),["shift"]),["tab"]))]},null,544),[[i.Jo,s.state.username]]),le]),(0,a.Lk)("div",re,[de,(0,a.bo)((0,a.Lk)("input",{type:"password",ref:"password","onUpdate:modelValue":e[4]||(e[4]=t=>s.state.password=t),class:"input",onKeydown:e[5]||(e[5]=(0,i.jR)((t=>s.state.login()),["enter"]))},null,544),[[i.Jo,s.state.password]]),he]),(0,a.Lk)("button",{onClick:e[6]||(e[6]=t=>s.state.login()),ref:"go"},"Go",512),(0,a.Lk)("button",{onClick:e[7]||(e[7]=t=>l.closePrompt()),onKeydown:[e[8]||(e[8]=(0,i.jR)((e=>t.$refs.loginTabAnchor.focus()),["tab"])),e[9]||(e[9]=(0,i.jR)((0,i.D$)((e=>t.$refs.cancelButton.focus()),["shift"]),["tab"]))],style:{background:"#faa"},ref:"cancelButton"},"cancel",544),s.state.invalidLoginAttempt?((0,a.uX)(),(0,a.CE)("div",ce," Invalid User Name or Password ")):(0,a.Q3)("",!0),ue,(0,a.Lk)("button",{class:"toggleButton",onClick:e[10]||(e[10]=t=>l.toggleView()),ref:"bottomTabAnchor"}," ↓   register   ↓ ",512)]))])])}var Qe={name:"LoginPrompt",props:["state"],data(){return{userNameAvailable:!0,showInvalid:!1}},computed:{passwordsMatch(){return this.state.regpassword===this.state.confirmpassword},validate(){return this.state.regusername&&this.state.regpassword&&this.passwordsMatch&&this.userNameAvailable}},methods:{submit(){if(this.validate){let t={userName:this.state.regusername,password:this.state.regpassword,avatar:this.state.defaultAvatar};fetch("submitReg.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{console.log(t),t[0]?(this.state.userName=this.state.regusername,console.log("login succeeded!"),this.state.loggedIn=!0,this.state.loggedinUserName=this.state.regusername,this.state.loggedinUserID=+t[2],this.state.isAdmin=+t[4],this.state.loggedInUser.avatar=this.state.defaultAvatar,this.state.passhash=t[1],this.state.setCookie(),this.state.closePrompts(),this.state.invalidLoginAttemp=!1,this.state.checkLogin()):this.showInvalid=!0}))}else console.log("failed validation. no reg submitted"),this.showInvalid=!0},toggleView(){this.state.showRegister=!this.state.showRegister,this.$nextTick((()=>{this.state.showRegister?this.$refs.regusername.focus():this.$refs.username.focus()}))},toggleLogin(){this.state.loggedIn||this.state.showLoginPrompt()},closePrompt(){this.state.closePrompts()},checkUserNameAvailability(){if(this.userNameAvailable=!0,this.state.regusername){let t={userName:this.state.regusername};fetch("checkUserNameAvailability.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{this.userNameAvailable=t}))}}},mounted(){this.state.confirmpassword="",this.state.showRegister?this.$refs.regusername.focus():this.$refs.username.focus()}};const We=(0,Z.A)(Qe,[["render",Be],["__scopeId","data-v-b65192d2"]]);var ze=We;const Fe={class:"UserSettings"},_e={class:"mainContainer"},He={style:{"font-size":"28px","line-height":"1em","font-weight":"900"}},Ve=(0,a.Lk)("br",null,null,-1),Je=(0,a.Lk)("span",{style:{color:"#aff","font-size":"36px","font-weight":"400"}},"settings",-1),Ke=(0,a.Lk)("div",{class:"spacerDiv"},null,-1),Ye=(0,a.Lk)("br",null,null,-1),qe={class:"editAvatarImgContainer"},Ge=["src"],Ze=(0,a.Lk)("br",null,null,-1),ts={key:0,style:{color:"#4f8","font-size":"18px",background:"#055",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},es={key:1,style:{color:"#f44","font-size":"18px",background:"#500",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},ss=(0,a.Lk)("div",{class:"spacerDiv",style:{"margin-top":"20px"}},null,-1),is=(0,a.Lk)("br",null,null,-1),as=(0,a.Lk)("br",null,null,-1),os=(0,a.Lk)("br",null,null,-1),ns=(0,a.Lk)("br",null,null,-1),ls={key:2,style:{color:"#4f8","font-size":"24px",background:"#055",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},rs={key:3,style:{color:"#f44","font-size":"20px",background:"#400",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},ds={key:4,style:{color:"#f00","font-size":"20px"}},hs={key:5,style:{color:"#0f4"}},cs=(0,a.Lk)("i",null,"passwords match!",-1),us=["disabled"],ps=(0,a.Lk)("div",{class:"spacerDiv"},null,-1);function gs(t,e,s,o,n,l){return(0,a.uX)(),(0,a.CE)("div",Fe,[(0,a.Lk)("div",_e,[(0,a.Lk)("span",He,[(0,a.eW)((0,pt.v_)(s.state.loggedinUserName)+" ",1),Ve,Je]),Ke,(0,a.eW)(" your avatar"),Ye,(0,a.Lk)("div",qe,[(0,a.Lk)("img",{src:s.state.loggedInUser.avatar,class:"editAvatarImg"},null,8,Ge)]),(0,a.Lk)("input",{style:{opacity:"0",position:"absolute","z-index":"-1"},ref:"tabAnchor",onKeydown:e[0]||(e[0]=(0,i.jR)((0,i.D$)((e=>t.$refs.cancelButton.focus()),["shift"]),["tab"]))},null,544),(0,a.bo)((0,a.Lk)("input",{type:"text",ref:"avatarURL","onUpdate:modelValue":e[1]||(e[1]=t=>s.state.loggedInUser.avatar=t),class:"input avatarInput",onInput:e[2]||(e[2]=t=>l.updateAvatar()),onClick:e[3]||(e[3]=t=>t.target.select()),placeholder:"URL to an online image..."},null,544),[[i.Jo,s.state.loggedInUser.avatar]]),Ze,1==n.avatarUpdateSuccessful?((0,a.uX)(),(0,a.CE)("div",ts,"     avatar update successful ")):(0,a.Q3)("",!0),-1==n.avatarUpdateSuccessful?((0,a.uX)(),(0,a.CE)("div",es,"     avatar update NOT successful ")):(0,a.Q3)("",!0),ss,(0,a.eW)(" change your password"),is,(0,a.bo)((0,a.Lk)("input",{type:"password",ref:"currentpassword",class:"input passwordFields","onUpdate:modelValue":e[4]||(e[4]=t=>n.currentPassword=t),onKeydown:e[5]||(e[5]=(0,i.jR)((t=>l.savePassword()),["enter"])),onClick:e[6]||(e[6]=t=>t.target.select()),onInput:e[7]||(e[7]=t=>n.showInvalid=!1),placeholder:"current password"},null,544),[[i.Jo,n.currentPassword]]),as,(0,a.bo)((0,a.Lk)("input",{type:"password",ref:"newpassword",class:(0,pt.C4)(["input passwordFields",{passwordsDoNotMatch:!l.passwordsMatch&&n.newPassword&&n.confirmNewPassword,passwordsMatch:l.passwordsMatch&&n.newPassword&&n.confirmNewPassword}]),"onUpdate:modelValue":e[8]||(e[8]=t=>n.newPassword=t),onKeydown:e[9]||(e[9]=(0,i.jR)((t=>l.savePassword()),["enter"])),onInput:e[10]||(e[10]=t=>n.showInvalid=!1),onClick:e[11]||(e[11]=t=>t.target.select()),placeholder:"new password"},null,34),[[i.Jo,n.newPassword]]),os,(0,a.bo)((0,a.Lk)("input",{type:"password",ref:"confirmnewpassword","onUpdate:modelValue":e[12]||(e[12]=t=>n.confirmNewPassword=t),onInput:e[13]||(e[13]=t=>n.showInvalid=!1),class:(0,pt.C4)(["input passwordFields",{passwordsDoNotMatch:!l.passwordsMatch&&n.newPassword&&n.confirmNewPassword,passwordsMatch:l.passwordsMatch&&n.newPassword&&n.confirmNewPassword}]),onClick:e[14]||(e[14]=t=>t.target.select()),onKeydown:e[15]||(e[15]=(0,i.jR)((t=>l.savePassword()),["enter"])),placeholder:"confirm new password"},null,34),[[i.Jo,n.confirmNewPassword]]),ns,n.savedPassword?((0,a.uX)(),(0,a.CE)("div",ls,"     password saved ")):(0,a.Q3)("",!0),n.showInvalid?((0,a.uX)(),(0,a.CE)("div",rs,"     ERROR SAVING PASSWORD! ")):(0,a.Q3)("",!0),n.savedPassword||n.showInvalid||l.passwordsMatch||!n.newPassword||!n.confirmNewPassword?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",ds,"     passwords do not match ")),!n.savedPassword&&!n.showInvalid&&l.passwordsMatch&&n.newPassword&&n.confirmNewPassword?((0,a.uX)(),(0,a.CE)("div",hs,[(0,a.eW)("     "),cs])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:e[16]||(e[16]=t=>l.savePassword()),ref:"cancelButton",disabled:!l.validate,class:(0,pt.C4)([{disabledButton:!l.validate},"userSettingsButton"])},"save",10,us),ps,(0,a.Lk)("button",{onClick:e[17]||(e[17]=t=>l.closePrompt()),onKeydown:[e[18]||(e[18]=(0,i.jR)((e=>t.$refs.tabAnchor.focus()),["tab"])),e[19]||(e[19]=(0,i.jR)((0,i.D$)((e=>t.$refs.cancelButton.focus()),["shift"]),["tab"]))],ref:"cancelButton",style:{background:"#faa"},class:"userSettingsButton"},"close / cancel",544),(0,a.Lk)("input",{style:{opacity:"0",position:"absolute","z-index":"-1"},ref:"endTabAnchor",onKeydown:e[20]||(e[20]=(0,i.jR)((0,i.D$)((e=>t.$refs.confirmnewassword.focus()),["shift"]),["tab"]))},null,544)])])}var ms={name:"UserSettings",props:["state"],data(){return{newPassword:"",confirmNewPassword:"",currentPassword:"",savedPassword:!1,showInvalid:!1,avatarUpdateSuccessful:0}},computed:{passwordsMatch(){return this.newPassword===this.confirmNewPassword},validate(){return this.passwordsMatch&&this.newPassword&&this.confirmNewPassword&&this.currentPassword}},methods:{savePassword(){if(this.validate){let t={userName:this.state.loggedinUserName,currentPassword:this.currentPassword,newPassword:this.newPassword};fetch("changePassword.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{t[0]?(this.state.passhash=t[1],this.savedPassword=!0,this.currentPassword=this.newPassword=this.confirmNewPassword="",this.state.setCookie()):this.showInvalid=!0}))}else this.savedPassword=!1,this.showInvalid=!0},closePrompt(){this.state.closePrompts()},updateAvatar(){let t={userName:this.state.loggedinUserName,passhash:this.state.passhash,newAvatar:this.state.loggedInUser.avatar};fetch("updateAvatar.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{t[0]?(this.avatarUpdateSuccessful=1,setTimeout((()=>this.avatarUpdateSuccessful=0),2e3)):(this.avatarUpdateSuccssful=-1,setTimeout((()=>this.avatarUpdateSuccessful=0),2e3))}))}},mounted(){this.$refs.currentpassword.focus()}};const ks=(0,Z.A)(ms,[["render",gs]]);var ws=ks,vs={name:"App",components:{Header:Tt,Toolbar:Gt,Main:at,Footer:xt,UserSettings:ws,Modal:ht,Preview:Xt,LoginPrompt:ze},data(){return{state:{footerMsg:"<b>IMJUR</b><br>A FREE DIGITAL ASSET<br>HOSTING SERVICE - ©"+(new Date).getFullYear()+'<br>contact: <a href="mailto:whitehotrobot@gmail.com">whitehotrobot@gmail.com</a>',links:[],userLinks:[],uploadInProgress:!1,showModal:!1,fetchUserLinks:null,setCookie:null,mode:null,deleteSelected:null,getAvatar:null,showPreview:!1,rootDomain:location.hostname,modalContent:"",modalQueue:[],previewLink:null,passhash:"",loggedinUserID:null,closeModal:null,closePreview:null,closePrompts:null,defaultAvatar:"avatarDefault.png",loggedInUser:{avatar:"avatarDefault.png"},loggedinUserName:"",copy:null,next:null,prev:null,login:null,register:null,logout:null,regusername:"",username:"",userView:!1,password:"",showUserSettings:null,invalidLoginAttempt:!1,displayLoginRequired:!1,userSettingsVisible:!1,regpassword:"",checkLogin:null,confirmpassword:"",selectAll:null,deSelectAll:null,showLoginPrompt:!1,loadFiles:null,showRegister:!1,loggedIn:!1,loginPromptVisible:!1,getPages:null,previewPosition:0,keys:Array(128).fill(!1)}}},methods:{prev(){this.state.showPreview&&(this.state.showPreview=!1,this.state.previewPosition-=1,this.state.previewPosition<0&&(this.state.previewPosition=this.state.userLinks.length+this.state.links.length-1),this.state.previewPosition>this.state.links.length-1?this.state.previewLink=this.state.userLinks[this.state.previewPosition-this.state.links.length]:this.state.previewLink=this.state.links[this.state.previewPosition],this.$nextTick((()=>{this.state.showPreview=!0})))},next(){this.state.showPreview&&(this.state.showPreview=!1,this.state.previewPosition++,this.state.previewPosition%=this.state.userLinks.length+this.state.links.length,this.state.previewPosition>this.state.links.length-1?this.state.previewLink=this.state.userLinks[this.state.previewPosition-this.state.links.length]:this.state.previewLink=this.state.links[this.state.previewPosition],this.$nextTick((()=>{this.state.showPreview=!0})))},register(){console.log("registering"),this.state.showLoginPrompt=!0,this.state.showRegister=!0},showUserSettings(){document.getElementsByTagName("HTML")[0].style.overflowY="hidden",this.state.userSettingsVisible=!0},copy(t){let e=document.createElement("div");e.innerHTML=t,e.style.opacity=.01,e.style.position="absolute",document.body.appendChild(e);var s=document.createRange();s.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(s),document.execCommand("copy"),window.getSelection().removeAllRanges(),e.remove();let i=document.querySelector("#copyConfirmation");i.style.display="block",i.style.opacity=1;let a=()=>{+i.style.opacity>0&&(i.style.opacity-=.04,+i.style.opacity<.1?(i.style.opacity=1,i.style.display="none"):setTimeout((()=>{a()}),10))};setTimeout((()=>{a()}),250)},closePrompts(){this.state.showLoginPrompt=!1,this.state.userSettingsVisible=!1},closeModal(){this.state.modalQueue.length?this.state.modalContent=this.state.modalQueue.shift():(this.state.showModal=!1,this.state.modalContent="")},getAvatar(t){return this.state.loggedIn?this.state.loggedInUser.avatar:this.state.defaultAvatar},closePreview(){this.state.showPreview=!1,this.state.previewLink=null},checkEnabled(){if(this.state.loggedinUserName){let t={userName:this.state.loggedinUserName,passhash:this.state.passhash};fetch("checkEnabled.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{+t[0]?(console.log("logged in."),this.state.loggedIn=!0,this.state.loggedinUserID=+t[1],this.state.loggedInUser.avatar=t[2],this.state.username=this.state.regusername||this.state.loggedinUserName,this.setCookie(),this.state.loginPromptVisible=!1,this.state.invalidLoginAttemp=!1,+t[3]&&(this.state.isAdmin=!0),this.fetchUserLinks(this.state.loggedinUserID)):(console.log("not logged in."),this.state.loggedIn=!1,this.state.loggedinUserName="",this.state.loggedinUserID="",this.state.passhash="",this.state.isAdmin=!1,this.state.invalidLoginAttempt=!0),this.getMode()}))}},fetchUserLinks(t){if(this.state.loggedinUserName){let e={userID:t};fetch("fetchUserLinks.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((t=>{+t[0]&&(console.log(t),this.state.userLinks=[],t[1].map(((e,s)=>{let i={size:+t[2][s].size,type:t[2][s].type,selected:!1,ct:s,href:location.href.split("?")[0]+e,userID:+t[2][s].userID,id:+t[2][s].id,slug:t[2][s].slug,originalSlug:t[2][s].originalSlug,origin:t[2][s].origin,date:t[2][s].date,linkType:"userLink",serverTZO:t[2][s].serverTZO,views:t[2][s].views};this.state.userLinks.push(i)})))}))}},selectAll(){this.state.links.map((t=>{t.selected=!0})),this.state.userLinks.map((t=>{t.selected=!0}))},deSelectAll(){this.state.links.map((t=>{t.selected=!1})),this.state.userLinks.map((t=>{t.selected=!1}))},deleteSelected(){let t=0,e=[],s=[],i=[];if(this.state.links.map(((s,a)=>{s.selected&&(t++,e=[...e,s.id],i=[...i,s.slug])})),this.state.userLinks.map(((e,a)=>{e.selected&&(t++,s=[...s,e.id],i=[...i,e.slug])})),t&&-1!=prompt(`\n\nARE YOU SURE YOU WANT TO DELETE ${t} ITEM${t>1?"S":""}?\n\n\n   >>> THIS ACTION CANNOT BE UNDONE! <<<\n\n\n  type 'yes' to continue"`).toLowerCase().indexOf("yes")){console.log("deleting selected...");let e={userName:this.state.username,passhash:this.state.passhash,slugs:i};console.log("sendData",e),fetch("delete.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((e=>{console.log(e),e[0]?(console.log(`deleted ${t} items`),this.state.links=[],this.fetchUserLinks(this.state.loggedinUserID)):alert(`there was a problem deleting ${i.length>1?"these":"this"} asset${i.length>1?"s":""}`)}))}},setCookie(){let t=document.cookie;t.split(";").map((t=>{-1==t.indexOf("autoplay")&&(document.cookie=t+"; expires="+new Date(0).toUTCString()+"; path=/; domain="+this.state.rootDomain)})),document.cookie="loggedinuser="+this.state.loggedinUserName+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="loggedinuserID="+this.state.loggedinUserID+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="token="+this.state.passhash+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="autoplay="+this.state.autoplay+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="showControls="+this.state.showControls+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain},getPages(){console.log("loaded. mode: "+this.state.mode)},login(){let t={userName:this.state.username,password:this.state.password};fetch("login.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{t[0]?(console.log("login succeeded!"),this.state.loggedIn=!0,this.state.loggedinUserName=this.state.username,this.state.loggedinUserID=+t[2],this.state.isAdmin=+t[4],this.state.passhash=t[1],this.setCookie(),this.closePrompts(),this.state.invalidLoginAttemp=!1,this.state.loggedInUser.avatar=t[3],this.fetchUserLinks(this.state.loggedinUserID)):(console.log("not logged in."),this.state.loggedIn=!1,this.state.invalidLoginAttempt=!0)}))},getMode(){let t=window.location.pathname.split("/").filter((t=>t));if(t.length>0)switch(t[0]){case"d":this.state.mode="single";break;case"u":break;default:this.state.mode="default";break}else this.state.mode="default",this.getPages(),window.location.href!==window.location.origin+"/"&&(window.location.href=window.location.origin)},logout(){let t=document.cookie;switch(t.split(";").map((t=>{-1==t.indexOf("autoplay")&&(document.cookie=t+"; expires="+new Date(0).toUTCString()+"; path=/; domain="+this.state.rootDomain)})),this.state.mode){case"user":break;case"single":break;case"default":break}this.state.loggedIn=!1,this.state.isAdmin=!1,this.state.loggedinUserID=this.state.loggedinUserName="",window.location.reload()},checkLogin(){let t=document.cookie.split(";").filter((t=>"loggedinuser"===t.split("=")[0].trim()));if(t.length){this.state.loggedinUserName=t[0].split("=")[1],this.state.username=this.state.loggedinUserName;let e=document.cookie.split(";").filter((t=>"token"===t.split("=")[0].trim()));if(e.length){this.state.passhash=e[0].split("=")[1];let t=document.cookie.split(";").filter((t=>"loggedinuserID"===t.split("=")[0].trim()));t.length&&(this.state.loggedinUserID=+t[0].split("=")[1],this.checkEnabled())}}else this.getMode()}},watch:{"state.uploadInProgress"(t){}},mounted(){window.onkeyup=t=>{t.preventDefault(),t.stopPropagation(),this.state.keys[t.keyCode]=!1},window.onkeydown=t=>{switch(t.preventDefault(),t.stopPropagation(),this.state.keys[t.keyCode]=!0,console.log(t.keyCode),t.keyCode){case 116:window.location.reload();break;case 65:this.state.keys[17]&&this.state.keys[16]&&this.deSelectAll(),this.state.keys[17]&&!this.state.keys[16]&&this.selectAll();break;case 46:this.deleteSelected();break;case 37:this.prev();break;case 39:this.next();break;case 27:this.state.showPreview=!1,this.closePrompts(),this.state.uploadInProgress||(this.state.showModal=!1);break}},this.state.closeModal=this.closeModal,this.state.prev=this.prev,this.state.next=this.next,this.state.copy=this.copy,this.state.login=this.login,this.state.logout=this.logout,this.state.register=this.register,this.state.getPages=this.getPages,this.state.getAvatar=this.getAvatar,this.state.selectAll=this.selectAll,this.state.setCookie=this.setCookie,this.state.checkLogin=this.checkLogin,this.state.deSelectAll=this.deSelectAll,this.state.closePrompts=this.closePrompts,this.state.closePreview=this.closePreview,this.state.fetchUserLinks=this.fetchUserLinks,this.state.deleteSelected=this.deleteSelected,this.state.showUserSettings=this.showUserSettings,this.checkLogin()}};const fs=(0,Z.A)(vs,[["render",n]]);var bs=fs;(0,i.Ef)(bs).mount("#app")}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,s),o.exports}s.m=t,function(){var t=[];s.O=function(e,i,a,o){if(!i){var n=1/0;for(h=0;h<t.length;h++){i=t[h][0],a=t[h][1],o=t[h][2];for(var l=!0,r=0;r<i.length;r++)(!1&o||n>=o)&&Object.keys(s.O).every((function(t){return s.O[t](i[r])}))?i.splice(r--,1):(l=!1,o<n&&(n=o));if(l){t.splice(h--,1);var d=a();void 0!==d&&(e=d)}}return e}o=o||0;for(var h=t.length;h>0&&t[h-1][2]>o;h--)t[h]=t[h-1];t[h]=[i,a,o]}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,o,n=i[0],l=i[1],r=i[2],d=0;if(n.some((function(e){return 0!==t[e]}))){for(a in l)s.o(l,a)&&(s.m[a]=l[a]);if(r)var h=r(s)}for(e&&e(i);d<n.length;d++)o=n[d],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(h)},i=self["webpackChunkimjur_000_pe"]=self["webpackChunkimjur_000_pe"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[504],(function(){return s(5771)}));i=s.O(i)})();
//# sourceMappingURL=app.b5a94610.js.map