(function(){"use strict";var t={7359:function(t,e,s){var a=s(3751),i=s(641);const n=(0,i.Lk)("div",{id:"copyConfirmation"},[(0,i.Lk)("div",{id:"innerCopied"},"COPIED!")],-1);function l(t,e,s,a,l,o){const r=(0,i.g2)("Header"),d=(0,i.g2)("Toolbar"),h=(0,i.g2)("Main"),u=(0,i.g2)("Footer"),c=(0,i.g2)("UserSettings"),g=(0,i.g2)("LoginPrompt"),p=(0,i.g2)("Admin"),k=(0,i.g2)("Modal"),m=(0,i.g2)("Loading"),w=(0,i.g2)("Preview");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(r,{state:l.state},null,8,["state"]),(0,i.bF)(d,{state:l.state},null,8,["state"]),(0,i.bF)(h,{state:l.state},null,8,["state"]),(0,i.bF)(u,{state:l.state},null,8,["state"]),l.state.userSettingsVisible?((0,i.uX)(),(0,i.Wv)(c,{key:0,state:l.state},null,8,["state"])):(0,i.Q3)("",!0),l.state.showLoginPrompt?((0,i.uX)(),(0,i.Wv)(g,{key:1,state:l.state},null,8,["state"])):(0,i.Q3)("",!0),l.state.loggedIn&&l.state.isAdmin?((0,i.uX)(),(0,i.Wv)(p,{key:2,state:l.state},null,8,["state"])):(0,i.Q3)("",!0),l.state.showModal?((0,i.uX)(),(0,i.Wv)(k,{key:3,state:l.state,content:l.state.modalContent},null,8,["state","content"])):(0,i.Q3)("",!0),l.state.showLoading?((0,i.uX)(),(0,i.Wv)(m,{key:4,state:l.state},null,8,["state"])):(0,i.Q3)("",!0),l.state.showPreview?((0,i.uX)(),(0,i.Wv)(w,{key:5,state:l.state,link:l.state.previewLink},null,8,["state","link"])):(0,i.Q3)("",!0),n])}s(4114);var o=s(33);const r=t=>((0,i.Qi)("data-v-0cd3d363"),t=t(),(0,i.jt)(),t),d={class:"main",ref:"main",tabindex:"0"},h={key:0,class:"uploadProgressContainer"},u=r((()=>(0,i.Lk)("br",null,null,-1))),c={class:"progressBar"},g={class:"progressBarInnerOutline"},p=["innerHTML"],k={class:"uploadModalInner"},m=r((()=>(0,i.Lk)("span",{style:{"font-size":"2em",color:"#888"}},"upload tracks",-1))),w=r((()=>(0,i.Lk)("br",null,null,-1))),f=r((()=>(0,i.Lk)("br",null,null,-1))),L=r((()=>(0,i.Lk)("br",null,null,-1))),b=r((()=>(0,i.Lk)("br",null,null,-1))),v=r((()=>(0,i.Lk)("br",null,null,-1))),y=r((()=>(0,i.Lk)("br",null,null,-1))),P=r((()=>(0,i.Lk)("br",null,null,-1))),U=r((()=>(0,i.Lk)("br",null,null,-1))),T=r((()=>(0,i.Lk)("span",{style:{"font-size":"1.4em",color:"#ff0"}},"drop file(s) here...",-1))),C=r((()=>(0,i.Lk)("br",null,null,-1))),D=r((()=>(0,i.Lk)("br",null,null,-1))),A=r((()=>(0,i.Lk)("br",null,null,-1))),S=r((()=>(0,i.Lk)("br",null,null,-1))),I=r((()=>(0,i.Lk)("br",null,null,-1))),R=r((()=>(0,i.Lk)("br",null,null,-1))),x=r((()=>(0,i.Lk)("br",null,null,-1))),M=r((()=>(0,i.Lk)("br",null,null,-1))),N=r((()=>(0,i.Lk)("br",null,null,-1))),$=r((()=>(0,i.Lk)("br",null,null,-1))),E=r((()=>(0,i.Lk)("br",null,null,-1))),j=r((()=>(0,i.Lk)("br",null,null,-1))),O=r((()=>(0,i.Lk)("br",null,null,-1))),H=r((()=>(0,i.Lk)("br",null,null,-1))),X=r((()=>(0,i.Lk)("br",null,null,-1))),B=r((()=>(0,i.Lk)("br",null,null,-1))),z=r((()=>(0,i.Lk)("span",{style:{"font-size":".7em"}},"(per file)",-1))),F=r((()=>(0,i.Lk)("br",null,null,-1))),W=r((()=>(0,i.Lk)("br",null,null,-1))),Q=r((()=>(0,i.Lk)("br",null,null,-1))),_=r((()=>(0,i.Lk)("span",{style:{"font-size":".7em"}},"(at a time)",-1))),J=r((()=>(0,i.Lk)("br",null,null,-1))),V=r((()=>(0,i.Lk)("br",null,null,-1))),K=r((()=>(0,i.Lk)("br",null,null,-1))),q={style:{"font-size":".6em"}},G=r((()=>(0,i.Lk)("br",null,null,-1))),Y=r((()=>(0,i.Lk)("br",null,null,-1))),Z=r((()=>(0,i.Lk)("span",{style:{color:"#f00","font-size":"1.2em"}},[(0,i.Lk)("b",null,[(0,i.eW)("all anonymous uploads will"),(0,i.Lk)("br"),(0,i.eW)("be deleted after 24 hours!")])],-1))),tt=r((()=>(0,i.Lk)("br",null,null,-1))),et=r((()=>(0,i.Lk)("br",null,null,-1))),st={key:1,class:"links"};function at(t,e,s,n,l,r){const at=(0,i.g2)("font"),it=(0,i.g2)("Link");return(0,i.uX)(),(0,i.CE)("div",d,[l.showUploadProgress?((0,i.uX)(),(0,i.CE)("div",h,[u,(0,i.eW)("uploading "+(0,o.v_)(l.filesUploading.length)+" file"+(0,o.v_)(l.filesUploading.length>1?"s":"")+"... ",1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.filesUploading,(t=>((0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("div",g,[(0,i.Lk)("div",{class:"progressBarInner",style:(0,o.Tr)("width:calc("+t.perc+"%)")},null,4)]),(0,i.Lk)("span",{class:"progressText",innerHTML:Math.round(100*t.perc)/100+"% - "+r.shortUploadName(t.uploadName)},null,8,p)])))),256))])):(0,i.Q3)("",!0),s.state.showUploadModal?((0,i.uX)(),(0,i.CE)("div",{key:1,class:(0,o.C4)(["uploadModal",{dragover:l.dragover}]),onDrop:e[2]||(e[2]=(0,a.D$)(((...e)=>t.processDrop&&t.processDrop(...e)),["prevent"])),onDragover:e[3]||(e[3]=(0,a.D$)(((...t)=>r.dragOverHandler&&r.dragOverHandler(...t)),["prevent"])),onDragleave:e[4]||(e[4]=(0,a.D$)(((...t)=>r.dragLeaveHandler&&r.dragLeaveHandler(...t)),["prevent"]))},[(0,i.Lk)("div",k,[m,w,f,L,(0,i.eW)("valid formats"),b,v,(0,i.eW)(" MP3, OGG, WAV"),y,P,U,T,C,D,(0,i.eW)("or"),A,S,(0,i.Lk)("button",{onClick:e[0]||(e[0]=e=>t.uploadManual()),style:{background:"#0f0","max-width":"400px"}},"manually select one from your device"),I,R,(0,i.Lk)("button",{onClick:e[1]||(e[1]=t=>s.state.showUploadModal=!1),style:{background:"#400",color:"#fee","font-weight":"400"}},"cancel")])],34)):(0,i.Q3)("",!0),(0,i.Lk)("div",{id:"dropTarget",class:"dropTarget",onDragover:e[6]||(e[6]=(0,a.D$)((()=>{}),["prevent"])),onDrop:e[7]||(e[7]=(0,a.D$)((t=>r.dropFiles(t)),["prevent"])),onClick:e[8]||(e[8]=()=>{}),ref:"dropTarget"},[s.state.userLinks.length||s.state.links.length||s.state.loadingAssets?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",{key:0,ref:"dropTargetCaption",id:"dropTargetCaption",style:{cursor:"pointer"},onClick:e[5]||(e[5]=t=>this.loadFiles())},[(0,i.eW)(" throw sum filez [click/drop]"),x,M,(0,i.eW)(" accepted : "),(0,i.bF)(at,{style:{color:"#ff0"}},{default:(0,i.k6)((()=>[(0,i.eW)("gif"),N,(0,i.eW)("            web[p/m]"),$,(0,i.eW)("            png"),E,(0,i.eW)("            jp[e]g"),j,(0,i.eW)("            mp4/mkv"),O,(0,i.eW)("            mp3/ogg/wav"),H,X])),_:1}),(0,i.eW)(" max size : "),(0,i.bF)(at,{style:{color:"#ff0"}},{default:(0,i.k6)((()=>[(0,i.eW)("25MB"),B])),_:1}),z,F,W,(0,i.eW)(" max files: "),(0,i.bF)(at,{style:{color:"#ff0"}},{default:(0,i.k6)((()=>[(0,i.eW)("15"),Q])),_:1}),_,J,V,K,(0,i.Lk)("div",q,[(0,i.eW)(" WARRANTY: "),(0,i.bF)(at,{style:{color:"#ff0"}},{default:(0,i.k6)((()=>[(0,i.eW)("none"),G,Y])),_:1}),Z,tt,(0,i.eW)(" this website is a work-in-progress."),et,(0,i.eW)(" your files will likely be deleted anyway :D")])],512)),s.state.showPreview||s.state.showAdmin||!s.state.links.length&&!s.state.userLinks.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",st,[s.state.links.length?((0,i.uX)(!0),(0,i.CE)(i.FK,{key:0},(0,i.pI)(s.state.links,(t=>((0,i.uX)(),(0,i.Wv)(it,{state:s.state,link:t,linkMode:"link",key:t.id},null,8,["state","link"])))),128)):(0,i.Q3)("",!0),s.state.userLinks.length?((0,i.uX)(!0),(0,i.CE)(i.FK,{key:1},(0,i.pI)(s.state.userLinks,(t=>((0,i.uX)(),(0,i.Wv)(it,{state:s.state,link:t,linkMode:"userLink",key:t.id},null,8,["state","link"])))),128)):(0,i.Q3)("",!0)]))],544)],512)}const it=t=>((0,i.Qi)("data-v-48b44562"),t=t(),(0,i.jt)(),t),nt={class:"link",ref:"anchor"},lt=["for"],ot=["id"],rt=it((()=>(0,i.Lk)("span",{class:"checkmark",style:{"margin-left":"-30px"}},null,-1))),dt=it((()=>(0,i.Lk)("span",{style:{"font-size":".75em","margin-top":"5px",display:"block",color:"#4f88",padding:"0","margin-left":"-34px"}},"select",-1))),ht=it((()=>(0,i.Lk)("br",null,null,-1))),ut=["innerHTML"],ct={class:"linkButtons"},gt=["href"],pt=it((()=>(0,i.Lk)("br",null,null,-1)));function kt(t,e,s,n,l,o){const r=(0,i.g2)("AssetData");return(0,i.uX)(),(0,i.CE)("div",nt,[s.state.loggedIn?((0,i.uX)(),(0,i.CE)("label",{for:s.link.linkType+s.link.ct,class:"checkboxLabel",key:s.link.linkType+s.link.ct+"key"},[(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>s.link.selected=t),onInput:e[1]||(e[1]=t=>o.updateLinkSelected()),id:s.link.linkType+s.link.ct},null,40,ot),[[a.lH,s.link.selected]]),rt,dt,ht],8,lt)):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:"views",innerHTML:s.state.views(s.link)},null,8,ut),(0,i.Lk)("div",{class:"linkThumb",ref:"linkThumb",onClick:e[2]||(e[2]=(0,a.D$)((t=>o.preview()),["prevent","stop"])),title:"view this asset"},null,512),(0,i.Lk)("div",ct,[(0,i.Lk)("div",{class:"copyLinkButton",onClick:e[3]||(e[3]=(0,a.D$)((t=>s.state.copyLink(s.link.href)),["prevent","stop"])),title:"copy link to clipboard"}),(0,i.Lk)("a",{href:s.state.URLbase+"/"+s.link.href,class:"openButton",onClick:e[4]||(e[4]=(0,a.D$)((t=>s.state.openLink(s.link)),["prevent","stop"])),title:"open link in new tab"},null,8,gt),(0,i.Lk)("div",{class:"downloadButton",onClick:e[5]||(e[5]=(0,a.D$)((t=>s.state.downloadLink(s.link,s.state.fullFileName(s.link))),["prevent","stop"])),title:"download asset"}),(0,i.Lk)("div",{class:"deleteSingleButton",onClick:e[6]||(e[6]=(0,a.D$)((t=>s.state.deleteSingle(s.link)),["prevent","stop"])),title:"delete this asset only"})]),pt,(0,i.bF)(r,{state:s.state,link:s.link},null,8,["state","link"])],512)}const mt=t=>((0,i.Qi)("data-v-8b6066e6"),t=t(),(0,i.jt)(),t),wt={class:"assetData"},ft={key:0},Lt=mt((()=>(0,i.Lk)("td",{class:"tdLeft"},"views",-1))),bt=["innerHTML"],vt=mt((()=>(0,i.Lk)("td",{class:"tdLeft"}," slug ",-1))),yt={class:"tdRight"},Pt=["href","innerHTML"],Ut=mt((()=>(0,i.Lk)("td",{class:"tdLeft"},"name",-1))),Tt=["innerHTML"],Ct=mt((()=>(0,i.Lk)("td",{class:"tdLeft"},"date uploaded",-1))),Dt=["innerHTML"],At=mt((()=>(0,i.Lk)("td",{class:"tdLeft"},"age",-1))),St=["innerHTML"],It=mt((()=>(0,i.Lk)("td",{class:"tdLeft"},"size",-1))),Rt=["innerHTML"],xt=mt((()=>(0,i.Lk)("td",{class:"tdLeft"},"id",-1))),Mt=["innerHTML"],Nt=mt((()=>(0,i.Lk)("td",{class:"tdLeft"},"origin",-1))),$t=["innerHTML"];function Et(t,e,s,a,n,l){return(0,i.uX)(),(0,i.CE)("table",wt,[s.state.showPreview?((0,i.uX)(),(0,i.CE)("tr",ft,[Lt,(0,i.Lk)("td",{class:"tdRight",innerHTML:s.state.views(s.link)},null,8,bt)])):(0,i.Q3)("",!0),(0,i.Lk)("tr",null,[vt,(0,i.Lk)("td",yt,[(0,i.Lk)("a",{href:s.state.URLbase+"/"+s.link.href,target:"_blank",title:"open link in new tab",innerHTML:s.link.slug,class:"assetDataSlug"},null,8,Pt)])]),(0,i.Lk)("tr",null,[Ut,(0,i.Lk)("td",{class:"tdRight",innerHTML:s.state.fileName(s.link)},null,8,Tt)]),(0,i.Lk)("tr",null,[Ct,(0,i.Lk)("td",{class:"tdRight",innerHTML:s.state.prettyDate(s.link)},null,8,Dt)]),(0,i.Lk)("tr",null,[At,(0,i.Lk)("td",{class:"tdRight",innerHTML:s.state.age(s.link)},null,8,St)]),(0,i.Lk)("tr",null,[It,(0,i.Lk)("td",{class:"tdRight",innerHTML:s.state.size(s.link)},null,8,Rt)]),(0,i.Lk)("tr",null,[xt,(0,i.Lk)("td",{class:"tdRight",innerHTML:s.link.id},null,8,Mt)]),(0,i.Lk)("tr",null,[Nt,(0,i.Lk)("td",{class:"tdRight",innerHTML:s.link.origin.split(":")[0]},null,8,$t)])])}const jt=["disabled"],Ot=["disabled"],Ht=["disabled"],Xt=["disabled"];function Bt(t,e,s,a,n,l){return(s.state.totalPages>0||s.state.totalUserPages>0)&&"track"!=s.state.mode||s.state.search.string&&s.state.totalPages>1?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,o.C4)(["pages",{bumpLeft:!s.state.loggedIn}])},[(0,i.Lk)("button",{class:(0,o.C4)(["navButton",{disabled:l.curPage<1}]),disabled:l.curPage<1,title:"go to first page [alt + home]",onClick:e[0]||(e[0]=t=>s.state.firstPage())}," << ",10,jt),(0,i.Lk)("button",{class:(0,o.C4)(["navButton",{disabled:l.curPage<1}]),disabled:l.curPage<1,title:"go back one page  [alt + left arrow]",onClick:e[1]||(e[1]=t=>s.state.regressPage())}," < ",10,Ot),(0,i.eW)(" "+(0,o.v_)(l.pagenumber)+" ",1),(0,i.Lk)("button",{class:(0,o.C4)(["navButton",{disabled:l.totalPages==l.curPage+1}]),disabled:l.totalPages==l.curPage+1,title:"go forward one page  [alt + right arrow]",onClick:e[2]||(e[2]=t=>s.state.advancePage())}," > ",10,Ht),(0,i.Lk)("button",{class:(0,o.C4)(["navButton",{disabled:l.totalPages==l.curPage+1}]),title:"go to last page  [alt + end]",disabled:l.totalPages==l.curPage+1,onClick:e[3]||(e[3]=t=>s.state.lastPage())}," >> ",10,Xt)],2)):(0,i.Q3)("",!0)}var zt={name:"Pages",props:["state"],data(){return{}},methods:{},computed:{totalPages(){switch(this.state.mode){case"u":return+this.state.totalUserPages;case"default":return+this.state.totalPages;case"track":return+this.state.totalPages}},curPage(){switch(this.state.mode){case"u":return+this.state.curUserPage;case"default":return+this.state.curPage;case"track":return+this.state.curPage}},pagenumber(){let t;switch(this.state.mode){case"u":t="Page "+(this.state.curUserPage+1)+" of "+this.state.totalUserPages;break;case"default":t="Page "+(this.state.curPage+1)+" of "+this.state.totalPages;break;case"track":t="Page "+(this.state.curPage+1)+" of "+this.state.totalPages;break}return t},origin(){let t=window.location.origin;return-1===t.toLowerCase().indexOf(this.state.rootDomain)&&(t+="/imjur"),t}},mounted(){this.curPage>this.totalPages&&this.state.jumpToPage(this.totalPages)}},Ft=s(6262);const Wt=(0,Ft.A)(zt,[["render",Bt],["__scopeId","data-v-2c03aba0"]]);var Qt=Wt,_t={name:"AssetData",props:["state","link"],components:{},data(){return{}},computed:{},methods:{},mounted(){}};const Jt=(0,Ft.A)(_t,[["render",Et],["__scopeId","data-v-8b6066e6"]]);var Vt=Jt,Kt={name:"Link",components:{AssetData:Vt},props:["state","link"],data(){return{c:document.createElement("canvas"),x:null,linkType:"",img:null,w:0,h:0,t:0}},computed:{},methods:{updateLinkSelected(){this.link.selected?this.link.selected=!1:this.link.selected=!0,console.log("selected",this.link.selected)},preview(){this.state.previewPosition=this.link.ct,this.state.previewPosition+="userLink"==this.link.linkType?this.state.links.length:0,this.state.previewLink=this.link,this.state.showPreview=!0},getThumb(){try{this.img.src="audio"==this.linkType?this.state.URLbase+"/musicNotes.svg":this.state.URLbase+"/thumb.php?res=resources/"+this.link.originalSlug+"."+this.link.href.split(".")[1]}catch(t){console.log(t)}},Draw(){this.x.globalAlpha=1,this.x.fillStyle="#0008",this.x.fillRect(0,0,this.c.width,this.c.height);let t,e="contain";switch(e){case"contain":t=this.c.width/this.c.height<=1.777777778?this.c.width/this.w:this.c.height/this.h;break;case"cover":t=this.c.width/this.c.height>1.777777778?this.c.width/this.w:this.c.height/this.h;break}let s=5,a=this.w*t-s,i=this.h*t-s;switch(this.x.drawImage(this.img,this.c.width/2-a/2,this.c.height/2-i/2,a,i),this.t+=1/60,this.linkType){case"image":setTimeout((()=>{this.img.width&&this.img.height||this.getThumb(),requestAnimationFrame(this.Draw)}),1e3);break;case"video":this.img.videoWidth&&this.img.videoHeight?requestAnimationFrame(this.Draw):setTimeout((()=>{this.getThumb(),requestAnimationFrame(this.Draw)}),1e3);break}}},mounted(){this.$refs.linkThumb.appendChild(this.c),this.x=this.c.getContext("2d"),this.linkType=this.link.type.split("/")[0],this.c.width=500,this.c.height=500/1.77777778,this.c.style.width="200px",this.c.style.height="113px",this.c.style.borderRadius="20px","video"==this.linkType&&(this.img=document.createElement("video"),this.img.loop=!0,this.img.muted=!0,this.img.oncanplay=()=>{this.w=this.img.videoWidth,this.h=this.img.videoHeight,this.img.play(),this.Draw()},this.img.src=`${this.state.URLbase}/resources/`+this.link.originalSlug+"."+this.link.href.split(".")[1]),"image"!=this.linkType&&"audio"!=this.linkType||(this.img=new Image,this.img.onload=()=>{this.w=this.img.width,this.h=this.img.height,this.Draw()},this.getThumb())}};const qt=(0,Ft.A)(Kt,[["render",kt],["__scopeId","data-v-48b44562"]]);var Gt=qt,Yt={name:"Main",props:["state"],components:{Link:Gt},data(){return{preload:[],rejects:[],dragover:!1,showUploadProgress:!1,filesUploading:[]}},methods:{shortUploadName(t){let e=t;return e.length>43&&(e=e.substring(0,30)+"..."+e.substring(e.length-10)),e},dragLeaveHandler(){this.dragover=!1},dragOverHandler(){this.dragover=!0},processUpload(t){if(!t.length)return;this.showUploadProgress=!0,this.$refs.main.style.zIndex=1e5,this.filesUploading=Array(t.length).fill().map((t=>({}))),console.log(t),Array.from(t).forEach(((t,e)=>{t.completed=!1,this.filesUploading[e].perc=0,this.filesUploading[e].uploadName=t.name}));let e=0;t.map(((t,s)=>{console.log(`file ${s}: `,t),("image/gif"==t.type||"image/jiff"==t.type||"image/jpeg"==t.type||"image/jpg"==t.type||"image/png"==t.type||"image/webp"==t.type||"video/mp4"==t.type||"video/webm"==t.type||"video/mkv"==t.type||"audio/mp3"==t.type||"audio/wav"==t.type||"audio/mpeg"==t.type)&&t.size<25e6?e++:this.rejects=[...this.rejects,t]}));let s='<div style="min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #4008; color: #f88; padding-top: 100px;">';this.rejects.map((t=>{let e=(t.size/1048576|0).toLocaleString("en-us")+" MB<br>";s+=`oversized/rejected: size: ${e} "${t.name}" <br><br>`})),this.rejects.length?(this.state.modalQueue=[...this.state.modalQueue,s+"</div>"],this.state.closeModal()):e?Array.from(t).forEach(((e,s)=>{let a={loggedIn:this.state.loggedIn,userID:this.state.loggedinUserID,passhash:this.state.passhash,description:""};console.log("batchMetaData",a);let i=new FormData;i.append("uploads_0",e),i.append("batchMetaData",JSON.stringify(a));let n=new XMLHttpRequest;n.open("POST",`${this.state.URLbase}/upload.php`),n.upload.addEventListener("progress",(t=>{let a=t.loaded/t.total*100;this.filesUploading[s].uploadName=e.name,this.filesUploading[s].perc=a})),n.addEventListener("load",(a=>{if(e.completed=!0,"<"!=a.currentTarget.responseText[0]){let t=JSON.parse(a.currentTarget.responseText);t[0]&&t[1].map(((e,a)=>{this.state.addLink(t[2][a],t[3][a],s,e,!1,this.state.loggedinUserID,t[6][a],t[7][a],t[8][a],t[9],t[10][a],t[11][a],t[12][a],t[13][a])}))}let i=!0;if(Array.from(t).forEach((t=>{t.completed||(i=!1)})),i)if(console.log("finished"),this.showUploadProgress=!1,this.$refs.main.style.zIndex=0,this.state.loggedIn)this.state.modalContent="",this.state.closeModal(),this.state.links=[],this.state.fetchUserLinks(this.state.loggedinUserID),this.state.jumpToPage(0);else{let t=JSON.parse(a.currentTarget.responseText);t[0]?(this.state.modalContent='<div style="box-sizing: border-box;min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #0846; color: #8f8; padding: 100px; text-align: left;word-break: auto-phrase;">excellent choice, uploading here...<br><br>you have not logged in though, which means your links will be lost soon.<br><br>If you register, nothing is needed except a name of your choosing and a password you will remember, then these uploads will be auto-saved to your new profile...<br><br>just don\'t close the page or refresh before you login or register!<br><br><br>thanks for using imjur!</div>',this.state.showModal=!0,this.state.showRegister=!0,this.state.showLoginPrompt=!0):this.state.modalContent='<div style="min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #8002; color: #f88; padding-top: 100px;">'+t[5]+"</div>"}})),n.send(i)})):(this.$refs.main.style.zIndex=0,alert("no files were uploaded. hmmmm. mebbe too big tho"),this.state.closeModal(),this.showUploadProgress=!1)},dropFiles(t){let e=[];t.dataTransfer.items?[...t.dataTransfer.items].forEach(((t,s)=>{if("file"===t.kind){const s=t.getAsFile();e=[...e,s]}})):e=Array.from(t.dataTransfer.files),e.length&&this.processUpload(e)},loadFiles(){let t=document.createElement("input");t.type="file",t.multiple=!0,t.accept="image/gif, image/jiff, image/jpeg, image/jpg, image/png, image/webp, video/mp4, video/webm, video/mkv, audio/mp3, audio/wav, audio/mpeg",t.onchange=()=>this.processUpload(Array.from(t.files)),t.click()}},mounted(){this.state.loadFiles=this.loadFiles,this.preload=[...this.preload,[document.createElement("video"),"loading.mp4"]],this.preload.map((t=>{t[0].src=this.state.URLbase+"/"+t[1]}))}};const Zt=(0,Ft.A)(Yt,[["render",at],["__scopeId","data-v-0cd3d363"]]);var te=Zt;const ee={class:"modal",ref:"modal",tabindex:"1000"},se=["innerHTML"];function ae(t,e,s,a,n,l){return(0,i.uX)(),(0,i.CE)("div",ee,[this.state.uploadInProgress?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:e[0]||(e[0]=t=>l.close()),class:"cancelButton",title:"close this view [ESC]"}," close/cancel ")),(0,i.Lk)("div",{class:"modalInner",innerHTML:s.content},null,8,se)],512)}var ie={name:"Modal",props:["state","content"],methods:{close(){this.state.closeModal()}},mounted(){this.$refs.modal.focus()}};const ne=(0,Ft.A)(ie,[["render",ae],["__scopeId","data-v-789e824d"]]);var le=ne;const oe=t=>((0,i.Qi)("data-v-cddeacae"),t=t(),(0,i.jt)(),t),re={key:0,class:"admin",ref:"admin",tabindex:"1000"},de={key:0,class:"modalInner"},he={key:0,class:"adminSection"},ue=oe((()=>(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"footprint"),(0,i.Lk)("th",null,"number assets"),(0,i.Lk)("th",null,"orphaned assets")],-1))),ce=["innerHTML"],ge=["innerHTML"],pe=["innerHTML"],ke={key:1,class:"adminSection"},me=oe((()=>(0,i.Lk)("br",null,null,-1))),we=oe((()=>(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"slug"),(0,i.Lk)("th",null,"size"),(0,i.Lk)("th",null,"type")],-1))),fe={class:"rightTD"},Le=["innerHTML"],be={class:"rightTD"},ve=["innerHTML"],ye={class:"rightTD"},Pe=["innerHTML"],Ue={key:2,class:"adminSection"},Te=oe((()=>(0,i.Lk)("br",null,null,-1))),Ce=oe((()=>(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"id"),(0,i.Lk)("th",null,"name"),(0,i.Lk)("th",null,"avatar"),(0,i.Lk)("th",null,"admin"),(0,i.Lk)("th",null,"enabled"),(0,i.Lk)("th",null,"assets"),(0,i.Lk)("th",null,"joined"),(0,i.Lk)("th",null,"seen")],-1))),De={class:"rightTD"},Ae=["innerHTML"],Se={class:"rightTD"},Ie=["innerHTML"],Re={class:"rightTD"},xe={class:"rightTD"},Me=["innerHTML"],Ne={class:"rightTD"},$e=["innerHTML"],Ee={class:"rightTD"},je=["innerHTML"],Oe={class:"rightTD"},He=["innerHTML"],Xe={class:"rightTD"},Be=["innerHTML"],ze=["innerHTML"];function Fe(t,e,s,a,n,l){return(0,i.uX)(),(0,i.CE)(i.FK,null,[s.state.showAdmin?((0,i.uX)(),(0,i.CE)("div",re,[s.state.adminData?((0,i.uX)(),(0,i.CE)("div",de,[s.state.adminData?.footprint?((0,i.uX)(),(0,i.CE)("div",he,[(0,i.Lk)("table",null,[ue,(0,i.Lk)("tr",null,[(0,i.Lk)("td",{class:"rightTD",innerHTML:s.state.adminData.footprint},null,8,ce)]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",{class:"rightTD",innerHTML:s.state.adminData["number assets"]},null,8,ge)]),(0,i.Lk)("tr",null,[(0,i.Lk)("td",{class:"rightTD",innerHTML:s.state.adminData["number orphaned assets"]},null,8,pe)])])])):(0,i.Q3)("",!0),s.state.adminData?.fileSizes?((0,i.uX)(),(0,i.CE)("div",ke,[(0,i.eW)(" Actual Assets, on drive"),me,(0,i.Lk)("table",null,[we,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.sortedBySizes,(t=>((0,i.uX)(),(0,i.CE)("tr",null,[(0,i.Lk)("td",fe,[(0,i.Lk)("div",{class:"actualAsset",innerHTML:s.state.adminData.slugs[t]},null,8,Le)]),(0,i.Lk)("td",be,[(0,i.Lk)("div",{class:"actualAsset",innerHTML:s.state.adminData.fileSizes[t]},null,8,ve)]),(0,i.Lk)("td",ye,[(0,i.Lk)("div",{class:"actualAsset",innerHTML:s.state.adminData.fileTypes[t]},null,8,Pe)])])))),256))])])):(0,i.Q3)("",!0),s.state.adminData?.users?((0,i.uX)(),(0,i.CE)("div",Ue,[(0,i.eW)(" Users"),Te,(0,i.Lk)("table",null,[Ce,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.state.adminData.users,((t,e)=>((0,i.uX)(),(0,i.CE)("tr",null,[(0,i.Lk)("td",De,[(0,i.Lk)("div",{class:"actualAsset",innerHTML:t.id},null,8,Ae)]),(0,i.Lk)("td",Se,[(0,i.Lk)("div",{class:"actualAsset",innerHTML:t.name},null,8,Ie)]),(0,i.Lk)("td",Re,[(0,i.Lk)("div",{style:(0,o.Tr)(`background-image: url(${t.avatar});`),class:"avatar"},null,4)]),(0,i.Lk)("td",xe,[(0,i.Lk)("div",{class:"actualAsset",innerHTML:t.admin},null,8,Me)]),(0,i.Lk)("td",Ne,[(0,i.Lk)("div",{class:"actualAsset",innerHTML:t.enabled},null,8,$e)]),(0,i.Lk)("td",Ee,[(0,i.Lk)("div",{class:"actualAsset",innerHTML:t.slugs.length},null,8,je)]),(0,i.Lk)("td",Oe,[(0,i.Lk)("div",{class:"actualAsset",innerHTML:t.dateJoined},null,8,He)]),(0,i.Lk)("td",Xe,[(0,i.Lk)("div",{class:"actualAsset",innerHTML:t.dateSeen},null,8,Be)])])))),256))])])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)],512)):(0,i.Q3)("",!0),(0,i.Lk)("button",{class:"adminButton",onClick:e[0]||(e[0]=(...t)=>l.toggleShowAdmin&&l.toggleShowAdmin(...t)),innerHTML:s.state.showAdmin?"exit admin view":"show admin view"},null,8,ze)],64)}var We={name:"Admin",props:["state"],components:{},data(){return{}},computed:{sortedBySizes(){if(this.state.adminData){let t=Array(this.state.adminData.fileSizes.length).fill().map(((t,e)=>({idx:e,size:this.state.adminData.fileSizes[e]})));return t.sort(((t,e)=>t.size-e.size)),t.map((t=>t.idx))}return[]}},methods:{toggleShowAdmin(){this.state.showAdmin=!this.state.showAdmin,this.state.showAdmin&&this.launch()},launch(){this.state.getAdminData()}},mounted(){}};const Qe=(0,Ft.A)(We,[["render",Fe],["__scopeId","data-v-cddeacae"]]);var _e=Qe;const Je={class:"header"};function Ve(t,e,s,a,n,l){const o=(0,i.g2)("User");return(0,i.uX)(),(0,i.CE)("div",Je,[(0,i.Lk)("div",{class:"headerImg",onClick:e[0]||(e[0]=t=>l.reload())}),s.state.loggedIn?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(o,{key:0,state:s.state},null,8,["state"]))])}const Ke={key:0},qe={key:1},Ge={class:"userButtonContainer"},Ye={class:"loggedIn"},Ze=["title"];function ts(t,e,s,a,n,l){return(0,i.uX)(),(0,i.CE)("div",{class:(0,o.C4)(["user",{loggedInWidth:s.state.loggedIn,notLoggedInWidth:!s.state.loggedIn}])},[s.state.loggedIn?((0,i.uX)(),(0,i.CE)("div",qe,[(0,i.Lk)("div",Ge,[(0,i.Lk)("button",{onClick:e[2]||(e[2]=t=>l.logout()),title:"log out",class:"userbutton"},"logout"),(0,i.Lk)("button",{onClick:e[3]||(e[3]=t=>l.userFiles()),title:"go to your assets",style:{"background-color":"#80fc",color:"#fff"},class:"userbutton"},"my assets"),(0,i.Lk)("button",{onClick:e[4]||(e[4]=t=>l.showSettings()),title:"show user settings",class:"userbutton"},"settings"),(0,i.Lk)("button",{onClick:e[5]||(e[5]=t=>l.explore()),title:"learn more about similar tools offered",style:{"background-color":"#08fc",color:"#fff"},class:"userbutton"},"explore")]),(0,i.Lk)("div",Ye,[(0,i.Lk)("div",{onClick:e[6]||(e[6]=t=>l.showSettings()),class:"avatar",title:`logged in as ${s.state.loggedinUserName}. click to show user settings`,style:(0,o.Tr)(`background-image: url(${s.state.getAvatar()})`)},null,12,Ze)])])):((0,i.uX)(),(0,i.CE)("div",Ke,[(0,i.Lk)("button",{onClick:e[0]||(e[0]=t=>l.login()),class:"loginButton",title:"sign in"}," login "),(0,i.Lk)("button",{onClick:e[1]||(e[1]=t=>s.state.register()),class:"loginButton",style:{top:"26px"},title:"register anonymously.<br><br>we only need a user name as<br>something to attach your files to"}," register ")]))],2)}var es={name:"Login",props:["state"],data(){return{}},methods:{explore(){open("https://whr.rf.gd/a/about","_blank")},userFiles(){this.state.fetchUserLinks(this.state.loggedinUserID)},showSettings(){this.state.showUserSettings()},login(){this.state.showRegister=!1,this.state.showLoginPrompt=!0},logout(){this.state.logout()},toggleLogin(){this.state.loggedin||this.state.showLoginPrompt()}},mounted(){}};const ss=(0,Ft.A)(es,[["render",ts],["__scopeId","data-v-064a504a"]]);var as=ss,is={name:"Header",props:["state"],components:{User:as},data(){return{}},methods:{reload(){window.location.reload()}},mounted(){}};const ns=(0,Ft.A)(is,[["render",Ve],["__scopeId","data-v-4e3d305a"]]);var ls=ns;const os={class:"footer"},rs=["innerHTML"];function ds(t,e,s,a,n,l){const o=(0,i.g2)("Pages");return(0,i.uX)(),(0,i.CE)("div",os,[(0,i.Lk)("span",{innerHTML:s.state.footerMsg},null,8,rs),(0,i.bF)(o,{state:s.state},null,8,["state"])])}var hs={name:"Footer",props:["state"],components:{Pages:Qt},data(){return{}},methods:{},mounted(){}};const us=(0,Ft.A)(hs,[["render",ds],["__scopeId","data-v-616a6c02"]]);var cs=us;const gs={class:"previewInner"},ps={class:"slideshow",ref:"slideshow"},ks={class:"inputs fade",ref:"inputs"},ms={class:"linkButtons"},ws=["href"];function fs(t,e,s,n,l,o){const r=(0,i.g2)("AssetData");return(0,i.uX)(),(0,i.CE)("div",{class:"preview",onMousemove:e[7]||(e[7]=t=>o.bumpNavButtonOpacity()),ref:"preview"},[(0,i.Lk)("button",{onClick:e[0]||(e[0]=t=>o.close()),class:"cancelButton",title:"close this view"}," close/cancel "),(0,i.Lk)("div",gs,[(0,i.Lk)("div",ps,null,512),(0,i.Lk)("div",ks,[(0,i.Lk)("div",ms,[(0,i.Lk)("div",{class:"copyLinkButton",onClick:e[1]||(e[1]=(0,a.D$)((t=>s.state.copyLink(s.link.href)),["prevent","stop"])),title:"copy link to clipboard"}),(0,i.Lk)("a",{href:s.state.URLbase+"/"+s.link.href,class:"openButton",onClick:e[2]||(e[2]=(0,a.D$)((t=>s.state.openLink(s.link)),["prevent","stop"])),title:"open link in new tab"},null,8,ws),(0,i.Lk)("div",{class:"downloadButton",onClick:e[3]||(e[3]=(0,a.D$)((t=>s.state.downloadLink(s.link,s.state.fullFileName(s.link))),["prevent","stop"])),title:"download asset"}),(0,i.Lk)("div",{class:"deleteSingleButton",onClick:e[4]||(e[4]=(0,a.D$)((t=>s.state.deleteSingle(s.link)),["prevent","stop"])),title:"delete this asset only"})]),(0,i.bF)(r,{state:s.state,link:s.link},null,8,["state","link"]),s.state.multipleLinks()?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"leftButton",ref:"leftButton",onClick:e[5]||(e[5]=t=>s.state.prev()),title:"view previous asset [left arrow]"},null,512)):(0,i.Q3)("",!0),s.state.multipleLinks()?((0,i.uX)(),(0,i.CE)("div",{key:1,class:"rightButton",ref:"rightButton",onClick:e[6]||(e[6]=t=>s.state.next()),title:"view next asset [right arrow]"},null,512)):(0,i.Q3)("",!0)],512)])],544)}var Ls={name:"Preview",components:{AssetData:Vt},props:["state","link"],data(){return{asset:null,linkType:""}},computed:{},methods:{bumpNavButtonOpacity(){this.$refs.inputs.classList.remove("fade"),this.$refs.inputs.style.height=this.$refs.inputs.clientHeight+"px",this.$refs.inputs.classList.add("fade")},close(){this.state.closePreview()}},mounted(){if(this.linkType=this.link.type.split("/")[0],"image"==this.linkType||"audio"==this.linkType){this.asset=document.createElement("div"),this.asset.style.top="50%",this.asset.style.left="50%",this.asset.style.width="100%",this.asset.style.height="100%",this.asset.style.position="absolute",this.asset.style.transform="translate(-50%, -50%)",this.asset.style.objectFit="contain",this.asset.style.backgroundColor="#000",this.asset.style.backgroundSize="contain",this.asset.style.backgroundRepeat="no-repeat",this.asset.style.backgroundPosition="center center";let t=new Image;this.state.showLoading=!0,t.onload=()=>{this.state.showLoading=!1};let e="audio"==this.linkType?"musicNotes.svg":this.state.URLbase+"/"+this.link.href;t.src=e,this.asset.style.backgroundImage=`url(${e})`,this.$refs.slideshow.appendChild(this.asset)}"audio"==this.linkType&&(this.asset=document.createElement("audio"),this.asset.controls=!0,this.asset.style.position="absolute",this.asset.style.left="50%",this.asset.style.top="50%",this.asset.loop=!0,this.asset.style.transform="translate(-50%, -50%)",this.asset.oncanplay=()=>{this.asset.play(),this.state.showLoading=!1},this.$refs.slideshow.appendChild(this.asset),this.asset.src=this.state.URLbase+"/"+this.link.href),"video"==this.linkType&&(this.asset=document.createElement("video"),this.asset.controls=!0,this.asset.style.position="absolute",this.asset.style.left="50%",this.asset.style.top="50%",this.asset.style.width="100%",this.asset.style.height="100%",this.asset.style.objectFit="contain",this.asset.style.background="#000",this.asset.loop=!0,this.asset.style.transform="translate(-50%, -50%)",this.asset.oncanplay=()=>{this.asset.play(),this.state.showLoading=!1},this.$refs.slideshow.appendChild(this.asset),this.asset.src=this.state.URLbase+"/"+this.link.href)},beforeUnmount(){this.asset.src=""}};const bs=(0,Ft.A)(Ls,[["render",fs],["__scopeId","data-v-511e1ae6"]]);var vs=bs;const ys=t=>((0,i.Qi)("data-v-714cb8a0"),t=t(),(0,i.jt)(),t),Ps={class:"toolbar"},Us={key:0,class:"username"},Ts=ys((()=>(0,i.Lk)("span",{style:{"font-size":".75em"}},"welcome,   ",-1))),Cs=ys((()=>(0,i.Lk)("br",null,null,-1))),Ds={key:1,class:"toolbarSection"},As=ys((()=>(0,i.Lk)("span",{style:{"margin-left":"5px","font-size":".8em"}},"[w/selected→]",-1))),Ss=["disabled"],Is={key:2,class:"toolbarSection"},Rs=["disabled"],xs=["disabled"],Ms={class:"toolbarSection",style:{"border-top":"4px solid #40fa","vertical-align":"middle",height:"35px","margin-top":"-1px",width:"360px"}};function Ns(t,e,s,n,l,r){const d=(0,i.g2)("User");return(0,i.uX)(),(0,i.CE)("div",Ps,[(0,i.bF)(d,{state:s.state},null,8,["state"]),(0,i.Lk)("button",{onClick:e[0]||(e[0]=t=>s.state.loadFiles()),class:"toolbarButtons"}," upload "),s.state.loggedIn?((0,i.uX)(),(0,i.CE)("div",Us,[Ts,Cs,(0,i.eW)(" "+(0,o.v_)(s.state.username),1)])):(0,i.Q3)("",!0),s.state.loggedIn?((0,i.uX)(),(0,i.CE)("div",Ds,[As,(0,i.Lk)("button",{onClick:e[1]||(e[1]=t=>s.state.deleteSelected()),class:(0,o.C4)(["toolbarButtons",{deleteButton:r.someSelected,disabledButton:!r.someSelected}]),disabled:!r.someSelected,title:"delete selected [del]"}," delete ",10,Ss)])):(0,i.Q3)("",!0),s.state.loggedIn?((0,i.uX)(),(0,i.CE)("div",Is,[(0,i.Lk)("button",{onClick:e[2]||(e[2]=t=>s.state.selectAll()),class:(0,o.C4)(["toolbarButtons",{buttons:!r.allSelected,disabledButton:r.allSelected}]),disabled:r.allSelected,title:"select all [ctrl + a]"}," select all ",10,Rs),(0,i.Lk)("button",{onClick:e[3]||(e[3]=t=>s.state.deSelectAll()),class:(0,o.C4)(["toolbarButtons",{buttons:r.someSelected,disabledButton:!r.someSelected}]),disabled:!r.someSelected,title:"de-select all [ctrl + shift + a]"}," deselect all ",10,xs)])):(0,i.Q3)("",!0),(0,i.Lk)("div",Ms,[(0,i.bo)((0,i.Lk)("input",{type:"text",autofocus:"",ref:"uploadURL",style:{width:"310px",height:"calc(100% - 2px)","font-size":"14px",background:"#000",color:"#4f8"},onKeydown:e[4]||(e[4]=(0,a.D$)((()=>{}),["stop"])),onKeypress:e[5]||(e[5]=(0,a.jR)((t=>r.uploadByURL()),["enter"])),"onUpdate:modelValue":e[6]||(e[6]=t=>s.state.uploadFromURL=t),placeholder:"OR, upload from a URL... it might work!",class:"uploadFromURL"},null,544),[[a.Jo,s.state.uploadFromURL]]),(0,i.Lk)("button",{onClick:e[7]||(e[7]=t=>r.uploadByURL()),class:"goButton",title:"download asset by URL [enter]"},"go")])])}var $s={name:"Toolbar",props:["state"],components:{User:as},data(){return{}},computed:{someSelected(){return this.state.links.filter((t=>t.selected)).length||this.state.userLinks.filter((t=>t.selected)).length},allSelected(){return this.state.links.filter((t=>t.selected)).length+this.state.userLinks.filter((t=>t.selected)).length==this.state.links.length+this.state.userLinks.length}},methods:{uploadByURL(){let t=this.state.uploadFromURL;if(!t)return void this.$refs.uploadURL.focus();let e=this.state.uploadFromURL.split("/");e=decodeURIComponent(e[e.length-1].split("?")[0]),this.state.modalContent=`<br><br><br><br><br><br>importing asset<br><br><div style="color: #f80">${e}<br><br></div>`,this.state.showLoading=!0,this.state.showModal=!0;let s={loggedIn:this.state.loggedIn,userID:this.state.loggedinUserID,passhash:this.state.passhash,description:""};if(t){let e={userName:this.state.loggedinUserName,passhash:this.state.passhash,URL:t,batchMetaData:s};fetch(`${this.state.URLbase}/uploadFromURL.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((t=>{t[0]?(t[0]&&(this.state.uploadFromURL="",t[1].map(((e,s)=>{this.state.addLink(t[2][s],t[3][s],s,e,!1,this.state.loggedinUserID,t[6][s],t[7][s],t[8][s],t[9],t[10][s],t[11][s],t[12][s],t[13][s]),this.state.previewLink=this.state.links[this.state.links.length-1],this.state.showPreview=!0}))),this.state.modalContent="",this.state.closeModal(),this.state.loggedIn?(this.state.links=[],this.state.fetchUserLinks(this.state.loggedinUserID),this.state.jumpToPage(0)):t[0]?(this.state.modalContent='<div style="box-sizing: border-box;min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #0846; color: #8f8; padding: 100px; text-align: left;word-break: auto-phrase;">excellent choice, uploading here...<br><br>you have not logged in though, which means your links will be lost soon.<br><br>If you register, nothing is needed except a name of your choosing and a password you will remember, then these uploads will be auto-saved to your new profile...<br><br>just don\'t close the page or refresh before you login or register!<br><br><br>thanks for using imjur!</div>',this.state.showModal=!0,this.state.showRegister=!0,this.state.showLoginPrompt=!0):this.state.modalContent='<div style="min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #8002; color: #f88; padding-top: 100px;">'+t[5]+"</div>"):(this.state.modalContent=`<div style="box-sizing: border-box;min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #6006; color: #f00; padding: 100px; text-align: left;">failed to import asset:<br><br>error: &rarr;${t[5]}</div>`,this.state.showModal=!0),this.$refs.uploadURL="",this.state.showLoading=!1}))}}},mounted(){}};const Es=(0,Ft.A)($s,[["render",Ns],["__scopeId","data-v-714cb8a0"]]);var js=Es;const Os={class:"loading"},Hs=["src"];function Xs(t,e,s,a,n,l){return(0,i.uX)(),(0,i.CE)("div",Os,[(0,i.Lk)("video",{class:"loadingVid",autoplay:"",muted:"",loop:"",src:`${s.state.URLbase}/loading.mp4`},null,8,Hs)])}var Bs={name:"Loading",props:["state"],data(){return{}},methods:{},mounted(){}};const zs=(0,Ft.A)(Bs,[["render",Xs],["__scopeId","data-v-aee2d72e"]]);var Fs=zs;const Ws=t=>((0,i.Qi)("data-v-5cfc7609"),t=t(),(0,i.jt)(),t),Qs={class:"LoginPrompt"},_s={class:"mainLoginContainer"},Js={key:0},Vs=Ws((()=>(0,i.Lk)("span",{class:"title"},"login",-1))),Ks=Ws((()=>(0,i.Lk)("br",null,null,-1))),qs={class:"inputContainer"},Gs=Ws((()=>(0,i.Lk)("div",{class:"inputTitle"},"User Name",-1))),Ys=Ws((()=>(0,i.Lk)("br",null,null,-1))),Zs={class:"inputContainer"},ta=Ws((()=>(0,i.Lk)("div",{class:"inputTitle"},"Password",-1))),ea=Ws((()=>(0,i.Lk)("br",null,null,-1))),sa={key:0,class:"invalidLogin"},aa=Ws((()=>(0,i.Lk)("div",{class:"spacerDiv",style:{"margin-top":"30px"}},null,-1))),ia={key:1},na=Ws((()=>(0,i.Lk)("div",{class:"spacerDiv",style:{"margin-top":"10px"}},null,-1))),la=Ws((()=>(0,i.Lk)("br",null,null,-1))),oa={key:0,class:"mustRegister"},ra=Ws((()=>(0,i.Lk)("br",null,null,-1))),da=Ws((()=>(0,i.Lk)("br",null,null,-1))),ha=Ws((()=>(0,i.Lk)("span",{class:"title"},"register",-1))),ua=Ws((()=>(0,i.Lk)("br",null,null,-1))),ca={class:"inputContainer"},ga={class:"inputTitle"},pa={key:0,style:{display:"inline-block",color:"#f00"}},ka=Ws((()=>(0,i.Lk)("i",null,"user name unavailable",-1))),ma={key:1,style:{display:"inline-block",color:"#0f4"}},wa=Ws((()=>(0,i.Lk)("i",null,"user name available",-1))),fa=Ws((()=>(0,i.Lk)("br",null,null,-1))),La={class:"inputContainer"},ba={class:"inputTitle"},va={key:0,style:{display:"inline-block",color:"#f00"}},ya={key:1,style:{display:"inline-block",color:"#0f4"}},Pa=Ws((()=>(0,i.Lk)("i",null,"passwords match!",-1))),Ua=Ws((()=>(0,i.Lk)("br",null,null,-1))),Ta={class:"inputContainer"},Ca=Ws((()=>(0,i.Lk)("div",{class:"inputTitle"},"Confirm Password",-1))),Da=Ws((()=>(0,i.Lk)("br",null,null,-1))),Aa=["disabled"],Sa={key:1,class:"invalidLogin"},Ia={style:{position:"absolute","z-index":"-1",opacity:"0"},ref:"bottomTabAnchor",type:"text"};function Ra(t,e,s,n,l,r){return(0,i.uX)(),(0,i.CE)("div",Qs,[(0,i.Lk)("div",_s,[s.state.showRegister?((0,i.uX)(),(0,i.CE)("div",ia,[na,(0,i.Lk)("button",{class:"toggleButton",onClick:e[11]||(e[11]=t=>r.toggleView())}," ↑   login   ↑ "),la,s.state.displayLoginRequired?((0,i.uX)(),(0,i.CE)("div",oa,[(0,i.eW)(" You must register or"),ra,(0,i.eW)(" log-in to create a demo!"),da])):(0,i.Q3)("",!0),ha,ua,(0,i.Lk)("div",ca,[(0,i.Lk)("div",ga,[(0,i.eW)(" User Name "),l.userNameAvailable?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",pa,[(0,i.eW)("     "),ka])),l.userNameAvailable&&s.state.regusername?((0,i.uX)(),(0,i.CE)("div",ma,[(0,i.eW)("     "),wa])):(0,i.Q3)("",!0)]),(0,i.Lk)("input",{style:{position:"absolute","z-index":"-1",opacity:"0"},ref:"loginTabAnchor",type:"text",onKeydown:[e[12]||(e[12]=(0,a.jR)((t=>r.submit()),["enter"])),e[13]||(e[13]=(0,a.jR)((0,a.D$)((e=>t.$refs.bottomTabAnchor.focus()),["shift"]),["tab"]))]},null,544),(0,i.bo)((0,i.Lk)("input",{type:"text",ref:"regusername","onUpdate:modelValue":e[14]||(e[14]=t=>s.state.regusername=t),class:(0,o.C4)(["input",{userNameUnavailable:!l.userNameAvailable,userNameAvailable:l.userNameAvailable&&s.state.regusername}]),maxlength:"16",onInput:e[15]||(e[15]=t=>r.checkUserNameAvailability()),onKeydown:[e[16]||(e[16]=(0,a.jR)((t=>r.submit()),["enter"])),e[17]||(e[17]=(0,a.jR)((0,a.D$)((e=>t.$refs.bottomTabAnchor.focus()),["shift"]),["tab"]))]},null,34),[[a.Jo,s.state.regusername]]),fa]),(0,i.Lk)("div",La,[(0,i.Lk)("div",ba,[(0,i.eW)(" Password "),!r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword?((0,i.uX)(),(0,i.CE)("div",va,"     passwords do not match ")):(0,i.Q3)("",!0),r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword?((0,i.uX)(),(0,i.CE)("div",ya,[(0,i.eW)("     "),Pa])):(0,i.Q3)("",!0)]),(0,i.bo)((0,i.Lk)("input",{type:"password",ref:"regpassword","onUpdate:modelValue":e[18]||(e[18]=t=>s.state.regpassword=t),class:(0,o.C4)(["input",{passwordsDoNotMatch:!r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword,passwordsMatch:r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword}]),onKeydown:e[19]||(e[19]=(0,a.jR)((t=>r.submit()),["enter"]))},null,34),[[a.Jo,s.state.regpassword]]),Ua]),(0,i.Lk)("div",Ta,[Ca,(0,i.bo)((0,i.Lk)("input",{type:"password",ref:"confirmpassword","onUpdate:modelValue":e[20]||(e[20]=t=>s.state.confirmpassword=t),class:(0,o.C4)(["input",{passwordsDoNotMatch:!r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword,passwordsMatch:r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword}]),onKeydown:e[21]||(e[21]=(0,a.jR)((t=>r.submit()),["enter"]))},null,34),[[a.Jo,s.state.confirmpassword]]),Da]),(0,i.Lk)("button",{onClick:e[22]||(e[22]=t=>r.submit()),disabled:!r.validate,class:(0,o.C4)({disabledButton:!r.validate})},"submit",10,Aa),(0,i.Lk)("button",{onClick:e[23]||(e[23]=t=>r.closePrompt()),onKeydown:[e[24]||(e[24]=(0,a.jR)((e=>t.$refs.loginTabAnchor.focus()),["tab"])),e[25]||(e[25]=(0,a.jR)((0,a.D$)((e=>t.$refs.cancelButton.focus()),["shift"]),["tab"]))],ref:"cancelButton",style:{background:"#faa"}},"cancel",544),l.showInvalid?((0,i.uX)(),(0,i.CE)("div",Sa," Whoa! check your info... ")):(0,i.Q3)("",!0),(0,i.Lk)("input",Ia,null,512)])):((0,i.uX)(),(0,i.CE)("div",Js,[Vs,Ks,(0,i.Lk)("div",qs,[Gs,(0,i.Lk)("input",{style:{position:"absolute","z-index":"-1",opacity:"0"},ref:"loginTabAnchor",onKeydown:e[0]||(e[0]=(0,a.jR)((0,a.D$)((e=>t.$refs.bottomTabAnchor.focus()),["shift"]),["tab"])),type:"text"},null,544),(0,i.bo)((0,i.Lk)("input",{type:"text",ref:"username","onUpdate:modelValue":e[1]||(e[1]=t=>s.state.username=t),class:"input",onKeydown:[e[2]||(e[2]=(0,a.jR)((t=>s.state.login()),["enter"])),e[3]||(e[3]=(0,a.jR)((0,a.D$)((e=>t.$refs.bottomTabAnchor.focus()),["shift"]),["tab"]))]},null,544),[[a.Jo,s.state.username]]),Ys]),(0,i.Lk)("div",Zs,[ta,(0,i.bo)((0,i.Lk)("input",{type:"password",ref:"password","onUpdate:modelValue":e[4]||(e[4]=t=>s.state.password=t),class:"input",onKeydown:e[5]||(e[5]=(0,a.jR)((t=>s.state.login()),["enter"]))},null,544),[[a.Jo,s.state.password]]),ea]),(0,i.Lk)("button",{onClick:e[6]||(e[6]=t=>s.state.login()),ref:"go"},"Go",512),(0,i.Lk)("button",{onClick:e[7]||(e[7]=t=>r.closePrompt()),onKeydown:[e[8]||(e[8]=(0,a.jR)((e=>t.$refs.loginTabAnchor.focus()),["tab"])),e[9]||(e[9]=(0,a.jR)((0,a.D$)((e=>t.$refs.cancelButton.focus()),["shift"]),["tab"]))],style:{background:"#faa"},ref:"cancelButton"},"cancel",544),s.state.invalidLoginAttempt?((0,i.uX)(),(0,i.CE)("div",sa," Invalid User Name or Password ")):(0,i.Q3)("",!0),aa,(0,i.Lk)("button",{class:"toggleButton",onClick:e[10]||(e[10]=t=>r.toggleView()),ref:"bottomTabAnchor"}," ↓   register   ↓ ",512)]))])])}var xa={name:"LoginPrompt",props:["state"],data(){return{userNameAvailable:!0,showInvalid:!1}},computed:{passwordsMatch(){return this.state.regpassword===this.state.confirmpassword},validate(){return this.state.regusername&&this.state.regpassword&&this.passwordsMatch&&this.userNameAvailable}},methods:{submit(){if(this.validate){let t={userName:this.state.regusername,password:this.state.regpassword,avatar:this.state.defaultAvatar};fetch(`${this.state.URLbase}/submitReg.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{console.log(t),t[0]?(this.state.modalContent="",this.state.showModal=!1,this.state.userName=this.state.regusername,console.log("login succeeded!"),this.state.loggedIn=!0,this.state.loggedinUserName=this.state.regusername,this.state.loggedinUserID=+t[2],this.state.isAdmin=+t[4],this.state.loggedInUser.avatar=this.state.defaultAvatar,this.state.passhash=t[1],this.state.setCookie(),this.state.closePrompts(),this.state.invalidLoginAttemp=!1,this.state.checkLogin(),this.state.setLinksOwner(),this.state.fetchUserLinks()):this.showInvalid=!0}))}else console.log("failed validation. no reg submitted"),this.showInvalid=!0},toggleView(){this.state.showRegister=!this.state.showRegister,this.$nextTick((()=>{this.state.showRegister?this.$refs.regusername.focus():this.$refs.username.focus()}))},toggleLogin(){this.state.loggedIn||this.state.showLoginPrompt()},closePrompt(){this.state.closePrompts()},checkUserNameAvailability(){if(this.userNameAvailable=!0,this.state.regusername){let t={userName:this.state.regusername};fetch(`${this.state.URLbase}/checkUserNameAvailability.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{this.userNameAvailable=t}))}}},mounted(){this.state.confirmpassword="",this.state.showRegister?this.$refs.regusername.focus():this.$refs.username.focus()}};const Ma=(0,Ft.A)(xa,[["render",Ra],["__scopeId","data-v-5cfc7609"]]);var Na=Ma;const $a={class:"UserSettings"},Ea={class:"mainContainer"},ja={style:{"font-size":"28px","line-height":"1em","font-weight":"900"}},Oa=(0,i.Lk)("br",null,null,-1),Ha=(0,i.Lk)("span",{style:{color:"#aff","font-size":"36px","font-weight":"400"}},"settings",-1),Xa=(0,i.Lk)("div",{class:"spacerDiv"},null,-1),Ba=(0,i.Lk)("br",null,null,-1),za={class:"editAvatarImgContainer"},Fa=["src"],Wa=(0,i.Lk)("br",null,null,-1),Qa={key:0,style:{color:"#4f8","font-size":"18px",background:"#055",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},_a={key:1,style:{color:"#f44","font-size":"18px",background:"#500",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},Ja=(0,i.Lk)("div",{class:"spacerDiv",style:{"margin-top":"20px"}},null,-1),Va=(0,i.Lk)("br",null,null,-1),Ka=(0,i.Lk)("br",null,null,-1),qa=(0,i.Lk)("br",null,null,-1),Ga=(0,i.Lk)("br",null,null,-1),Ya={key:2,style:{color:"#4f8","font-size":"24px",background:"#055",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},Za={key:3,style:{color:"#f44","font-size":"20px",background:"#400",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},ti={key:4,style:{color:"#f00","font-size":"20px"}},ei={key:5,style:{color:"#0f4"}},si=(0,i.Lk)("i",null,"passwords match!",-1),ai=["disabled"],ii=(0,i.Lk)("div",{class:"spacerDiv"},null,-1);function ni(t,e,s,n,l,r){return(0,i.uX)(),(0,i.CE)("div",$a,[(0,i.Lk)("div",Ea,[(0,i.Lk)("span",ja,[(0,i.eW)((0,o.v_)(s.state.loggedinUserName)+" ",1),Oa,Ha]),Xa,(0,i.eW)(" your avatar"),Ba,(0,i.Lk)("div",za,[(0,i.Lk)("img",{src:s.state.getAvatar(),class:"editAvatarImg"},null,8,Fa)]),(0,i.Lk)("input",{style:{opacity:"0",position:"absolute","z-index":"-1"},ref:"tabAnchor",onKeydown:e[0]||(e[0]=(0,a.jR)((0,a.D$)((e=>t.$refs.cancelButton.focus()),["shift"]),["tab"]))},null,544),(0,i.bo)((0,i.Lk)("input",{type:"text",ref:"avatarURL","onUpdate:modelValue":e[1]||(e[1]=t=>s.state.loggedInUser.avatar=t),class:"input avatarInput",onInput:e[2]||(e[2]=t=>r.updateAvatar()),onClick:e[3]||(e[3]=t=>t.target.select()),placeholder:"URL to an online image..."},null,544),[[a.Jo,s.state.loggedInUser.avatar]]),Wa,1==l.avatarUpdateSuccessful?((0,i.uX)(),(0,i.CE)("div",Qa,"     avatar update successful ")):(0,i.Q3)("",!0),-1==l.avatarUpdateSuccessful?((0,i.uX)(),(0,i.CE)("div",_a,"     avatar update NOT successful ")):(0,i.Q3)("",!0),Ja,(0,i.eW)(" change your password"),Va,(0,i.bo)((0,i.Lk)("input",{type:"password",ref:"currentpassword",class:"input passwordFields","onUpdate:modelValue":e[4]||(e[4]=t=>l.currentPassword=t),onKeydown:e[5]||(e[5]=(0,a.jR)((t=>r.savePassword()),["enter"])),onClick:e[6]||(e[6]=t=>t.target.select()),onInput:e[7]||(e[7]=t=>l.showInvalid=!1),placeholder:"current password"},null,544),[[a.Jo,l.currentPassword]]),Ka,(0,i.bo)((0,i.Lk)("input",{type:"password",ref:"newpassword",class:(0,o.C4)(["input passwordFields",{passwordsDoNotMatch:!r.passwordsMatch&&l.newPassword&&l.confirmNewPassword,passwordsMatch:r.passwordsMatch&&l.newPassword&&l.confirmNewPassword}]),"onUpdate:modelValue":e[8]||(e[8]=t=>l.newPassword=t),onKeydown:e[9]||(e[9]=(0,a.jR)((t=>r.savePassword()),["enter"])),onInput:e[10]||(e[10]=t=>l.showInvalid=!1),onClick:e[11]||(e[11]=t=>t.target.select()),placeholder:"new password"},null,34),[[a.Jo,l.newPassword]]),qa,(0,i.bo)((0,i.Lk)("input",{type:"password",ref:"confirmnewpassword","onUpdate:modelValue":e[12]||(e[12]=t=>l.confirmNewPassword=t),onInput:e[13]||(e[13]=t=>l.showInvalid=!1),class:(0,o.C4)(["input passwordFields",{passwordsDoNotMatch:!r.passwordsMatch&&l.newPassword&&l.confirmNewPassword,passwordsMatch:r.passwordsMatch&&l.newPassword&&l.confirmNewPassword}]),onClick:e[14]||(e[14]=t=>t.target.select()),onKeydown:e[15]||(e[15]=(0,a.jR)((t=>r.savePassword()),["enter"])),placeholder:"confirm new password"},null,34),[[a.Jo,l.confirmNewPassword]]),Ga,l.savedPassword?((0,i.uX)(),(0,i.CE)("div",Ya,"     password saved ")):(0,i.Q3)("",!0),l.showInvalid?((0,i.uX)(),(0,i.CE)("div",Za,"     ERROR SAVING PASSWORD! ")):(0,i.Q3)("",!0),l.savedPassword||l.showInvalid||r.passwordsMatch||!l.newPassword||!l.confirmNewPassword?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ti,"     passwords do not match ")),!l.savedPassword&&!l.showInvalid&&r.passwordsMatch&&l.newPassword&&l.confirmNewPassword?((0,i.uX)(),(0,i.CE)("div",ei,[(0,i.eW)("     "),si])):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:e[16]||(e[16]=t=>r.savePassword()),ref:"cancelButton",disabled:!r.validate,class:(0,o.C4)([{disabledButton:!r.validate},"userSettingsButton"])},"save",10,ai),ii,(0,i.Lk)("button",{onClick:e[17]||(e[17]=t=>r.closePrompt()),onKeydown:[e[18]||(e[18]=(0,a.jR)((e=>t.$refs.tabAnchor.focus()),["tab"])),e[19]||(e[19]=(0,a.jR)((0,a.D$)((e=>t.$refs.cancelButton.focus()),["shift"]),["tab"]))],ref:"cancelButton",style:{background:"#faa"},class:"userSettingsButton"},"close / cancel",544),(0,i.Lk)("input",{style:{opacity:"0",position:"absolute","z-index":"-1"},ref:"endTabAnchor",onKeydown:e[20]||(e[20]=(0,a.jR)((0,a.D$)((e=>t.$refs.confirmnewassword.focus()),["shift"]),["tab"]))},null,544)])])}var li={name:"UserSettings",props:["state"],data(){return{newPassword:"",confirmNewPassword:"",currentPassword:"",savedPassword:!1,showInvalid:!1,avatarUpdateSuccessful:0}},computed:{passwordsMatch(){return this.newPassword===this.confirmNewPassword},validate(){return this.passwordsMatch&&this.newPassword&&this.confirmNewPassword&&this.currentPassword}},methods:{savePassword(){if(this.validate){let t={userName:this.state.loggedinUserName,currentPassword:this.currentPassword,newPassword:this.newPassword};fetch(`${this.state.URLbase}/changePassword.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{t[0]?(this.state.passhash=t[1],this.savedPassword=!0,this.currentPassword=this.newPassword=this.confirmNewPassword="",this.state.setCookie()):this.showInvalid=!0}))}else this.savedPassword=!1,this.showInvalid=!0},closePrompt(){this.state.closePrompts()},updateAvatar(){let t={userName:this.state.loggedinUserName,passhash:this.state.passhash,newAvatar:this.state.loggedInUser.avatar};fetch(`${this.state.URLbase}/updateAvatar.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{t[0]?(this.avatarUpdateSuccessful=1,setTimeout((()=>this.avatarUpdateSuccessful=0),2e3)):(this.avatarUpdateSuccssful=-1,setTimeout((()=>this.avatarUpdateSuccessful=0),2e3))}))}},mounted(){this.$refs.currentpassword.focus()}};const oi=(0,Ft.A)(li,[["render",ni]]);var ri=oi,di={name:"App",components:{Main:te,Modal:le,Admin:_e,Footer:cs,Header:ls,Toolbar:js,Loading:Fs,Preview:vs,LoginPrompt:Na,UserSettings:ri},data(){return{state:{footerMsg:'<b><span style="transform: scaleX(4.1);display: inline-block; margin-left: 86px; ">IMJUR</span></b><br>A FREE DIGITAL ASSET<br><span style="transform: scaleX(.87);display: inline-block; margin-left: -18px;">HOSTING SERVICE - ©'+(new Date).getFullYear()+'</span><br><a href="mailto:whitehotrobot@gmail.com"><span style="transform: scaleX(.87);display: inline-block; margin-left: -18px;">whitehotrobot@gmail.com</span></a>',links:[],userLinks:[],uploadInProgress:!1,showModal:!1,fetchUserLinks:null,setCookie:null,mode:null,age:null,views:null,size:null,deleteSelected:null,multipleLinks:null,getAvatar:null,showLoading:!1,showPreview:!1,rootDomain:location.hostname,modalContent:"",modalQueue:[],previewLink:null,passhash:"",loggedinUserID:null,closeModal:null,closePreview:null,closePrompts:null,defaultAvatar:"avatarDefault.png",loggedInUser:{avatar:"avatarDefault.png"},loggedinUserName:"",copyLink:null,deleteSingle:null,downloadLink:null,next:null,prev:null,fileName:null,fullFileName:null,login:null,register:null,URLbase:null,logout:null,showAdmin:!1,regusername:"",username:"",userView:!1,prettyDate:null,firstSeen:null,password:"",maxResultsPerPage:8,showUserSettings:null,uploadFromURL:"",invalidLoginAttempt:!1,displayLoginRequired:!1,userSettingsVisible:!1,jumpToPage:null,regpassword:"",showUploadModal:!1,loadingAssets:!0,checkLogin:null,adminData:null,search:{string:"",hits:0,inProgress:!1,timer:0,timerHandle:null,exact:!1,allWords:!0},confirmpassword:"",totalPages:0,totalUserPages:0,setLinksOwner:null,curPage:0,curUserPage:0,regressPage:null,advancePage:null,lastPage:null,firstPage:null,selectAll:null,deSelectAll:null,showLoginPrompt:!1,loadFiles:null,showRegister:!1,loggedIn:!1,loginPromptVisible:!1,getPages:null,getAdminData:null,addLink:null,previewPosition:0,keys:Array(128).fill(!1)}}},methods:{prev(){this.state.showPreview&&(this.state.showPreview=!1,this.state.previewPosition-=1,this.state.previewPosition<0&&(this.state.previewPosition=this.state.userLinks.length+this.state.links.length-1),this.state.previewPosition>this.state.links.length-1?this.state.previewLink=this.state.userLinks[this.state.previewPosition-this.state.links.length]:this.state.previewLink=this.state.links[this.state.previewPosition],this.$nextTick((()=>{this.state.showPreview=!0})))},next(){this.state.showPreview&&(this.state.showPreview=!1,this.state.previewPosition++,this.state.previewPosition%=this.state.userLinks.length+this.state.links.length,this.state.previewPosition>this.state.links.length-1?this.state.previewLink=this.state.userLinks[this.state.previewPosition-this.state.links.length]:this.state.previewLink=this.state.links[this.state.previewPosition],this.$nextTick((()=>{this.state.showPreview=!0})))},register(){console.log("registering"),this.state.showLoginPrompt=!0,this.state.showRegister=!0},showUserSettings(){document.getElementsByTagName("HTML")[0].style.overflowY="hidden",this.state.userSettingsVisible=!0},firstPage(){let t=this.state.search.string?"/1/"+this.state.search.string:"";switch(this.state.mode){case"u":window.location.href=this.URLbase+"/u/"+this.state.user.name+t;break;case"default":this.state.curPage=0,this.state.fetchUserLinks(this.state.loggedinUserID),history.pushState(null,null,this.URLbase+"/"+(this.state.curPage+1));break;case"track":window.location.href=this.URLbase+"/track/"+this.state.curTrack+t;break}},jumpToPage(t){let e=this.state.search.string?"/"+this.state.search.string:"";switch(this.state.mode){case"u":window.location.href=this.URLbase+"/u/"+this.user.name+"/"+t+e;break;case"default":this.state.curPage=t,this.state.loggedIn&&this.state.fetchUserLinks(this.state.loggedinUserID),this.state.curPage?history.pushState(null,null,this.URLbase+"/"+(this.state.curPage+1)):history.pushState(null,null,this.URLbase);break;case"track":window.location.href=this.URLbase+"/track/"+this.decToAlpha(this.state.curTrack)+"/"+t+e;break}},lastPage(){let t=this.state.search.string?"/"+this.state.search.string:"";switch(this.state.mode){case"u":window.location.href=this.URLbase+"/u/"+this.state.user.name+"/"+this.state.totalUserPages+t;break;case"default":this.state.curPage=this.state.totalPages-1,this.state.loggedIn&&this.state.fetchUserLinks(this.state.loggedinUserID),console.log("curPage",this.state.curPage),history.pushState(null,null,this.URLbase+"/"+(this.state.curPage+1));break;case"track":window.location.href=this.URLbase+"/track/"+this.decToAlpha(this.state.curTrack)+"/"+this.state.totalPages+t;break}},advancePage(){let t=this.state.search.string?"/"+this.state.search.string:"";switch(this.state.mode){case"u":window.location.href=this.URLbase+"/u/"+this.state.user.name+"/"+(this.state.curUserPage+2)+t;break;case"default":this.state.curPage<this.state.totalPages-1&&this.state.curPage++,this.state.loggedIn&&this.state.fetchUserLinks(this.state.loggedinUserID),history.pushState(null,null,this.URLbase+"/"+(this.state.curPage+1));break;case"track":window.location.href=this.URLbase+"/track/"+this.decToAlpha(this.state.curTrack)+"/"+(this.state.curPage+2)+t;break}},regressPage(){let t=this.state.search.string?"/"+this.state.search.string:"";switch(this.state.mode){case"u":window.location.href=this.URLbase+"/u/"+this.state.user.name+"/"+this.state.curUserPage+t;break;case"default":this.state.curPage&&this.state.curPage--,this.state.loggedIn&&this.state.fetchUserLinks(this.state.loggedinUserID),this.state.curPage?history.pushState(null,null,this.URLbase+"/"+(this.state.curPage+1)):history.pushState(null,null,this.URLbase);break;case"track":window.location.href=this.URLbase+"/track/"+this.decToAlpha(this.state.curTrack)+"/"+(this.state.curPage+2)+t;break}},downloadLink(t,e){let s=document.createElement("a");s.download=e,s.href=t.href,s.style.position="absolute",s.style.opacity=.01,document.body.appendChild(s),s.click(),s.remove()},openLink(t){open(`${this.URLbase}/`+t.href,"_blank")},copyLink(t){let e=document.createElement("div");e.innerHTML=this.URLbase+"/"+t,e.style.opacity=.01,e.style.position="absolute",document.body.appendChild(e);var s=document.createRange();s.selectNode(e),window.getSelection().removeAllRanges(),window.getSelection().addRange(s),document.execCommand("copy"),window.getSelection().removeAllRanges(),e.remove();let a=document.querySelector("#copyConfirmation");a.style.display="block",a.style.opacity=1;let i=()=>{+a.style.opacity>0&&(a.style.opacity-=.04,+a.style.opacity<.1?(a.style.opacity=1,a.style.display="none"):setTimeout((()=>{i()}),10))};setTimeout((()=>{i()}),250)},closePrompts(){this.state.showLoginPrompt=!1,this.state.userSettingsVisible=!1},getAdminData(){let t={userName:this.state.loggedinUserName,passhash:this.state.passhash};fetch(`${this.URLbase}/getAdminData.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{console.log("getAssetData.php, data; ",t),t[0]&&(this.state.adminData=JSON.parse(t[1]),console.log("adminData",this.state.adminData))}))},closeModal(){this.state.modalQueue.length?this.state.modalContent=this.state.modalQueue.shift():(this.state.showModal=!1,this.state.modalContent="")},getAvatar(t){return this.state.loggedIn?this.state.loggedInUser.avatar==this.state.defaultAvatar?`${this.state.URLbase}/`+this.state.loggedInUser.avatar:this.state.loggedInUser.avatar:`${this.state.URLbase}/`+this.state.defaultAvatar},closePreview(){this.state.showPreview=!1,this.state.previewLink=null},checkEnabled(){if(this.state.loggedinUserName){let t={userName:this.state.loggedinUserName,passhash:this.state.passhash};fetch(`${this.URLbase}/checkEnabled.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{+t[0]?(console.log("logged in."),this.state.loggedIn=!0,this.state.loggedinUserID=+t[1],this.state.loggedInUser.avatar=t[2],this.state.username=this.state.regusername||this.state.loggedinUserName,this.setCookie(),this.state.loginPromptVisible=!1,this.state.invalidLoginAttemp=!1,+t[3]&&(this.state.isAdmin=!0),this.fetchUserLinks(this.state.loggedinUserID)):(console.log("not logged in."),this.state.loadingAssets=!1,this.state.loggedIn=!1,this.state.loggedinUserName="",this.state.loggedinUserID="",this.state.passhash="",this.state.isAdmin=!1,this.state.invalidLoginAttempt=!0),this.getMode()}))}},setLinksOwner(){if(!this.state.links.length)return;let t={userName:this.state.username,passhash:this.state.passhash,ids:JSON.parse(JSON.stringify(this.state.links)).map((t=>t.id))};fetch(`${this.URLbase}/setOwner.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{console.log("res from setOwner.php: ",t),t[0]||alert("error setting link owner")}))},fetchUserLinks(t){if(this.state.loggedinUserName){let e={userID:t,page:this.state.curPage,maxResultsPerPage:this.state.maxResultsPerPage};fetch(`${this.URLbase}/fetchUserLinks.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.json())).then((t=>{this.state.loadingAssets=!1,+t[0]&&(this.state.userLinks=[],this.state.links=[],t[1].map(((e,s)=>{let a={size:+t[2][s].size,type:t[2][s].type,selected:!1,ct:s,href:e,userID:+t[2][s].userID,id:+t[2][s].id,slug:t[2][s].slug,originalSlug:t[2][s].originalSlug,originalDate:t[2][s].originalDate,origin:t[2][s].origin,date:t[2][s].date,linkType:"userLink",serverTZO:t[2][s].serverTZO,views:t[2][s].views};this.state.userLinks.push(a)})),this.state.totalPages=+t[3],this.state.curPage+1>this.state.totalPages&&this.lastPage())}))}},selectAll(){this.state.links.map((t=>{t.selected=!0})),this.state.userLinks.map((t=>{t.selected=!0}))},deSelectAll(){this.state.links.map((t=>{t.selected=!1})),this.state.userLinks.map((t=>{t.selected=!1}))},deleteSelected(){let t=0,e=!1,s=[],a=[],i=[];if(this.state.links.map(((e,a)=>{e.selected&&(t++,s=[...s,e.id],i=[...i,e.slug])})),this.state.userLinks.map(((e,s)=>{e.selected&&(t++,a=[...a,e.id],i=[...i,e.slug])})),!t)return e;let n=prompt(`\n\nARE YOU SURE YOU WANT TO DELETE ${t} ITEM${t>1?"S":""}?\n\n\n   >>> THIS ACTION CANNOT BE UNDONE! <<<\n\n\n  type 'yes' to continue"`);if(n&&-1!=n.toLowerCase().indexOf("yes")){e=!0,console.log("deleting selected...");let n={userName:this.state.username,passhash:this.state.passhash,slugs:i};console.log("sendData",n),fetch(`${this.URLbase}/delete.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((t=>t.json())).then((e=>{console.log(e),e[0]?(this.state.links=this.state.links.filter(((t,e)=>!s.filter((e=>e==t.id)).length)),this.state.userLinks=this.state.userLinks.filter(((t,e)=>!a.filter((e=>e==t.id)).length)),console.log(`deleted ${t} items`)):alert(`there was a problem deleting ${i.length>1?"these":"this"} asset${i.length>1?"s":""}`)}))}return e},deleteSingle(t){let e=[],s=[];this.state.links.map((t=>{e=[...e,t.selected]})),this.state.userLinks.map((t=>{s=[...s,t.selected]})),this.deSelectAll(),this.state.links.map((e=>{e.id==t.id&&(e.selected=!0)})),this.state.userLinks.map((e=>{e.id==t.id&&(e.selected=!0)})),this.deleteSelected(),e.map(((t,e)=>{this.state.links[e].selected=t})),s.map(((t,e)=>{this.state.userLinks[e].selected=t})),this.state.showPreview=!1},multipleLinks(){return this.state.userLinks.length>1||this.state.links.length>1},setCookie(){let t=document.cookie;t.split(";").map((t=>{-1==t.indexOf("autoplay")&&(document.cookie=t+"; expires="+new Date(0).toUTCString()+"; path=/; domain="+this.state.rootDomain)})),document.cookie="loggedinuser="+this.state.loggedinUserName+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="loggedinuserID="+this.state.loggedinUserID+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="token="+this.state.passhash+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="autoplay="+this.state.autoplay+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="showControls="+this.state.showControls+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain},getPages(){console.log("loaded. mode: "+this.state.mode)},login(){let t={userName:this.state.username,password:this.state.password};fetch(`${this.URLbase}/login.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.json())).then((t=>{t[0]?(this.state.modalContent="",this.state.showModal=!1,console.log("login succeeded!"),this.state.loggedIn=!0,this.state.loggedinUserName=this.state.username,this.state.loggedinUserID=+t[2],this.state.isAdmin=+t[4],this.state.passhash=t[1],this.setCookie(),this.closePrompts(),this.state.invalidLoginAttemp=!1,this.state.loggedInUser.avatar=t[3],this.setLinksOwner(),this.fetchUserLinks(this.state.loggedinUserID),this.state.links=[]):(console.log("not logged in."),this.state.loggedIn=!1,this.state.invalidLoginAttempt=!0)}))},getMode(){let t=window.location.pathname.split("/").filter((t=>t&&""+t!="NaN"));if(console.log(t),t.length>0)switch(t[0]){case"d":this.state.mode="single";break;case"u":break;default:this.state.mode="default";let e="",s=-1!==location.origin.toLowerCase().indexOf("000webhostapp.com")?1:0;t[s]?(this.state.curPage=+t[s]-1,""+this.state.curPage=="NaN"&&(this.state.curPage=0),t[s+1]?(this.state.search.string=decodeURIComponent(t[s+1]),e="/"+t[s+1],this.state.curPage=0,this.state.jumpToPage(0)):(history.pushState(null,null,this.URLbase+"/"+this.state.curPage?this.state.curPage+1:""),(!this.state.curPage||this.state.curPage<0||this.state.curPage>1e6)&&(this.state.curPage=0),this.fetchUserLinks(this.state.loggedinUserID))):location.href!==this.URLbase+"/"&&(location.href=this.URLbase);break}else this.state.mode="default",this.getPages(),window.location.href!==this.URLbase+"/"&&(window.location.href=window.location.origin)},logout(){history.pushState(null,null,this.URLbase);let t=document.cookie;switch(t.split(";").map((t=>{-1==t.indexOf("autoplay")&&(document.cookie=t+"; expires="+new Date(0).toUTCString()+"; path=/; domain="+this.state.rootDomain)})),this.state.mode){case"user":break;case"single":break;case"default":break}this.state.loggedIn=!1,this.state.isAdmin=!1,this.state.loggedinUserID=this.state.loggedinUserName="",window.location.reload()},views(t){return"views: "+t.views.toLocaleString()},size(t){let e,s=1048576,a=t.size,i=a/s|0,n=(a/s-i)*s/1024|0;return e=i?Math.round(a/s*100)/100+" MB":n?Math.round((a/s-i)*s/1024*100)/100+" KB":t.size.toLocaleString()+" B",e},addLink(t,e,s,a,i,n,l,o,r,d,h,u,c,g){let p={size:t,type:e,ct:s,href:a,slug:l,origin:r,selected:i,userID:n,id:u,originalSlug:o,linkType:"link",serverTZO:d,views:h,date:c,originalDate:g};this.state.links.push(p)},age(t){let e=((new Date-new Date(t.date))/1e3|0)+3600*((new Date).getTimezoneOffset()/60-(-1===location.origin.toLowerCase().indexOf("000webhostapp")?4:0)),s=e/31536e3|0,a=31536e3*(e/31536e3-s)/86400|0,i=86400*(31536e3*(e/31536e3-s)/86400-a)/3600|0,n=3600*(86400*(31536e3*(e/31536e3-s)/86400-a)/3600-i)/60|0,l="";return l+=s?`${s} year${s>1?"s":""}, `:"",l+=a?`${a} day${a>1?"s":""}, `:"",l+=i?`${i} hour${i>1?"s":""}, `:"",l+=n?`${n} minute${n>1?"s":""}`:"",l||"added just now..."},prettyDate(t){return new Date(t.date).toLocaleString()},firstSeen(t){let e=((new Date-new Date(t.originalDate))/1e3|0)+3600*((new Date).getTimezoneOffset()/60-4),s=e/31536e3|0,a=31536e3*(e/31536e3-s)/86400|0,i=86400*(31536e3*(e/31536e3-s)/86400-a)/3600|0,n=3600*(86400*(31536e3*(e/31536e3-s)/86400-a)/3600-i)/60|0,l="";return l+=s?`${s} year${s>1?"s":""}, `:"",l+=a?`${a} day${a>1?"s":""}, `:"",l+=i?`${i} hour${i>1?"s":""}, `:"",l+=n?`${n} minute${n>1?"s":""}`:"",l||"just now..."},fileName(t){let e=t.origin.split(": ")[1];return e.length>23&&(e=e.substring(0,10)+"..."+e.substring(e.length-10)),e},fullFileName(t){return t.origin.split(": ")[1]},checkLogin(){let t=document.cookie.split(";").filter((t=>"loggedinuser"===t.split("=")[0].trim()));if(t.length){this.state.loggedinUserName=t[0].split("=")[1],this.state.username=this.state.loggedinUserName;let e=document.cookie.split(";").filter((t=>"token"===t.split("=")[0].trim()));if(e.length){this.state.passhash=e[0].split("=")[1];let t=document.cookie.split(";").filter((t=>"loggedinuserID"===t.split("=")[0].trim()));t.length&&(this.state.loggedinUserID=+t[0].split("=")[1],this.checkEnabled())}}else this.state.loadingAssets=!1,this.getMode()}},watch:{"state.loadingAssets"(t){t?(this.state.modalContent='<div style="width: 500px; height: 100px; position:absolute; text-align: center;font-size: 24px; color: white; top: 50%; left: 50%; transform: translate(-50%, -50%);">... loading ...</div>',this.state.showModal=!0):(this.state.modalContent="",this.state.showModal=!1)},"state.uploadInProgress"(t){}},computed:{URLbase(){let t=window.location.origin;return-1===t.toLowerCase().split(".")[0].indexOf("imjur")&&(t+="/imjur"),t}},mounted(){window.onmousedown=t=>{this.state.keys[18]=!1},window.onkeyup=t=>{t.preventDefault(),t.stopPropagation(),this.state.keys[t.keyCode]=!1,this.state.keys[18]=!1},window.onkeydown=t=>{switch(this.state.keys[t.keyCode]=!0,console.log(t.keyCode),this.state.keys[18]&&(t.preventDefault(),t.stopPropagation()),t.keyCode){case 116:window.location.reload();break;case 65:this.state.keys[17]&&(t.preventDefault(),t.stopPropagation(),this.state.keys[16]&&this.deSelectAll(),this.state.keys[16]||this.selectAll());break;case 46:this.deleteSelected();break;case 37:this.state.showPreview?this.prev():this.state.keys[18]&&this.state.curPage&&this.regressPage();break;case 39:this.state.showPreview?this.next():this.state.keys[18]&&this.state.curPage<this.state.totalPages&&this.advancePage();break;case 36:this.state.keys[18]&&this.firstPage();break;case 35:this.state.keys[18]&&this.lastPage();break;case 27:this.state.showPreview=!1,this.showLoading=!1,this.state.uploadInProgress||this.state.showLoginPrompt||(this.state.showModal=!1),this.closePrompts();break}},this.state.age=this.age,this.state.size=this.size,this.state.prev=this.prev,this.state.next=this.next,this.state.views=this.views,this.state.login=this.login,this.state.logout=this.logout,this.state.addLink=this.addLink,this.state.URLbase=this.URLbase,this.state.fileName=this.fileName,this.state.copyLink=this.copyLink,this.state.openLink=this.openLink,this.state.register=this.register,this.state.lastPage=this.lastPage,this.state.getPages=this.getPages,this.state.firstSeen=this.firstSeen,this.state.firstPage=this.firstPage,this.state.getAvatar=this.getAvatar,this.state.selectAll=this.selectAll,this.state.setCookie=this.setCookie,this.state.jumpToPage=this.jumpToPage,this.state.checkLogin=this.checkLogin,this.state.closeModal=this.closeModal,this.state.prettyDate=this.prettyDate,this.state.advancePage=this.advancePage,this.state.regressPage=this.regressPage,this.state.deSelectAll=this.deSelectAll,this.state.deleteSingle=this.deleteSingle,this.state.getAdminData=this.getAdminData,this.state.closePrompts=this.closePrompts,this.state.fullFileName=this.fullFileName,this.state.downloadLink=this.downloadLink,this.state.closePreview=this.closePreview,this.state.multipleLinks=this.multipleLinks,this.state.setLinksOwner=this.setLinksOwner,this.state.fetchUserLinks=this.fetchUserLinks,this.state.deleteSelected=this.deleteSelected,this.state.showUserSettings=this.showUserSettings,this.checkLogin()}};const hi=(0,Ft.A)(di,[["render",l]]);var ui=hi;(0,a.Ef)(ui).mount("#app")}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var n=e[a]={exports:{}};return t[a].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,n){if(!a){var l=1/0;for(h=0;h<t.length;h++){a=t[h][0],i=t[h][1],n=t[h][2];for(var o=!0,r=0;r<a.length;r++)(!1&n||l>=n)&&Object.keys(s.O).every((function(t){return s.O[t](a[r])}))?a.splice(r--,1):(o=!1,n<l&&(l=n));if(o){t.splice(h--,1);var d=i();void 0!==d&&(e=d)}}return e}n=n||0;for(var h=t.length;h>0&&t[h-1][2]>n;h--)t[h]=t[h-1];t[h]=[a,i,n]}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,n,l=a[0],o=a[1],r=a[2],d=0;if(l.some((function(e){return 0!==t[e]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(r)var h=r(s)}for(e&&e(a);d<l.length;d++)n=l[d],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(h)},a=self["webpackChunkimjur_000_pe"]=self["webpackChunkimjur_000_pe"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(7359)}));a=s.O(a)})();
//# sourceMappingURL=app.f7ad5579.js.map