(function(){"use strict";var e={429:function(e,t,s){var a=s(3751),i=s(641);const o=(0,i.Lk)("div",{id:"copyConfirmation"},[(0,i.Lk)("div",{id:"innerCopied"},"COPIED!")],-1);function n(e,t,s,a,n,l){const r=(0,i.g2)("Header"),d=(0,i.g2)("Toolbar"),h=(0,i.g2)("Main"),c=(0,i.g2)("Footer"),u=(0,i.g2)("UserSettings"),g=(0,i.g2)("LoginPrompt"),p=(0,i.g2)("Modal"),k=(0,i.g2)("Preview");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(r,{state:n.state},null,8,["state"]),(0,i.bF)(d,{state:n.state},null,8,["state"]),(0,i.bF)(h,{state:n.state},null,8,["state"]),(0,i.bF)(c,{state:n.state},null,8,["state"]),n.state.userSettingsVisible?((0,i.uX)(),(0,i.Wv)(u,{key:0,state:n.state},null,8,["state"])):(0,i.Q3)("",!0),n.state.showLoginPrompt?((0,i.uX)(),(0,i.Wv)(g,{key:1,state:n.state},null,8,["state"])):(0,i.Q3)("",!0),n.state.showModal?((0,i.uX)(),(0,i.Wv)(p,{key:2,state:n.state,content:n.state.modalContent},null,8,["state","content"])):(0,i.Q3)("",!0),n.state.showPreview?((0,i.uX)(),(0,i.Wv)(k,{key:3,state:n.state,link:n.state.previewLink},null,8,["state","link"])):(0,i.Q3)("",!0),o])}s(4114);var l=s(33);const r=e=>((0,i.Qi)("data-v-6fd20d18"),e=e(),(0,i.jt)(),e),d={class:"main",ref:"main"},h={key:0,class:"uploadProgressContainer"},c=r((()=>(0,i.Lk)("br",null,null,-1))),u={class:"progressBar"},g={class:"progressBarInnerOutline"},p=["innerHTML"],k={class:"uploadModalInner"},m=r((()=>(0,i.Lk)("span",{style:{"font-size":"2em",color:"#888"}},"upload tracks",-1))),w=r((()=>(0,i.Lk)("br",null,null,-1))),f=r((()=>(0,i.Lk)("br",null,null,-1))),b=r((()=>(0,i.Lk)("br",null,null,-1))),v=r((()=>(0,i.Lk)("br",null,null,-1))),L=r((()=>(0,i.Lk)("br",null,null,-1))),y=r((()=>(0,i.Lk)("br",null,null,-1))),P=r((()=>(0,i.Lk)("br",null,null,-1))),C=r((()=>(0,i.Lk)("br",null,null,-1))),U=r((()=>(0,i.Lk)("span",{style:{"font-size":"1.4em",color:"#ff0"}},"drop file(s) here...",-1))),T=r((()=>(0,i.Lk)("br",null,null,-1))),I=r((()=>(0,i.Lk)("br",null,null,-1))),S=r((()=>(0,i.Lk)("br",null,null,-1))),A=r((()=>(0,i.Lk)("br",null,null,-1))),D=r((()=>(0,i.Lk)("br",null,null,-1))),x=r((()=>(0,i.Lk)("br",null,null,-1))),R=r((()=>(0,i.Lk)("br",null,null,-1))),N=r((()=>(0,i.Lk)("br",null,null,-1))),M=r((()=>(0,i.Lk)("br",null,null,-1))),E=r((()=>(0,i.Lk)("br",null,null,-1))),j=r((()=>(0,i.Lk)("br",null,null,-1))),O=r((()=>(0,i.Lk)("br",null,null,-1))),$=r((()=>(0,i.Lk)("br",null,null,-1))),X=r((()=>(0,i.Lk)("br",null,null,-1))),B=r((()=>(0,i.Lk)("br",null,null,-1))),W=r((()=>(0,i.Lk)("br",null,null,-1))),Q=r((()=>(0,i.Lk)("span",{style:{"font-size":".7em"}},"(per file)",-1))),z=r((()=>(0,i.Lk)("br",null,null,-1))),F=r((()=>(0,i.Lk)("br",null,null,-1))),H=r((()=>(0,i.Lk)("br",null,null,-1))),_=r((()=>(0,i.Lk)("span",{style:{"font-size":".7em"}},"(at a time)",-1))),V=r((()=>(0,i.Lk)("br",null,null,-1))),J=r((()=>(0,i.Lk)("br",null,null,-1))),K=r((()=>(0,i.Lk)("br",null,null,-1))),q=r((()=>(0,i.Lk)("div",{style:{"font-size":".6em"}},[(0,i.eW)(" WARRANTY: none"),(0,i.Lk)("br"),(0,i.Lk)("br"),(0,i.eW)(" this website is a work-in-progress."),(0,i.Lk)("br"),(0,i.eW)(" your files will likely be deleted")],-1))),G={key:1,class:"links"};function Y(e,t,s,o,n,r){const Y=(0,i.g2)("Link");return(0,i.uX)(),(0,i.CE)("div",d,[n.showUploadProgress?((0,i.uX)(),(0,i.CE)("div",h,[c,(0,i.eW)("uploading "+(0,l.v_)(n.filesUploading.length)+" file"+(0,l.v_)(n.filesUploading.length>1?"s":"")+"... ",1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.filesUploading,(e=>((0,i.uX)(),(0,i.CE)("div",u,[(0,i.Lk)("div",g,[(0,i.Lk)("div",{class:"progressBarInner",style:(0,l.Tr)("width:calc("+e.perc+"%)")},null,4)]),(0,i.Lk)("span",{class:"progressText",innerHTML:e.uploadName+" - "+Math.round(100*e.perc)/100+"%"},null,8,p)])))),256))])):(0,i.Q3)("",!0),s.state.showUploadModal?((0,i.uX)(),(0,i.CE)("div",{key:1,class:(0,l.C4)(["uploadModal",{dragover:n.dragover}]),onDrop:t[2]||(t[2]=(0,a.D$)(((...t)=>e.processDrop&&e.processDrop(...t)),["prevent"])),onDragover:t[3]||(t[3]=(0,a.D$)(((...e)=>r.dragOverHandler&&r.dragOverHandler(...e)),["prevent"])),onDragleave:t[4]||(t[4]=(0,a.D$)(((...e)=>r.dragLeaveHandler&&r.dragLeaveHandler(...e)),["prevent"]))},[(0,i.Lk)("div",k,[m,w,f,b,(0,i.eW)("valid formats"),v,L,(0,i.eW)(" MP3, OGG, WAV"),y,P,C,U,T,I,(0,i.eW)("or"),S,A,(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.uploadManual()),style:{background:"#0f0","max-width":"400px"}},"manually select one from your device"),D,x,(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>s.state.showUploadModal=!1),style:{background:"#400",color:"#fee","font-weight":"400"}},"cancel")])],34)):(0,i.Q3)("",!0),(0,i.Lk)("div",{id:"dropTarget",class:"dropTarget",onDragover:t[6]||(t[6]=(0,a.D$)((()=>{}),["prevent"])),onDrop:t[7]||(t[7]=(0,a.D$)((e=>r.dropFiles(e)),["prevent"])),onClick:t[8]||(t[8]=()=>{}),ref:"dropTarget"},[s.state.userLinks.length||s.state.links.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",{key:0,ref:"dropTargetCaption",id:"dropTargetCaption",style:{cursor:"pointer"},onClick:t[5]||(t[5]=e=>this.loadFiles())},[(0,i.eW)(" throw sum filez [click/drop]"),R,N,(0,i.eW)(" accepted : gif"),M,(0,i.eW)("            web[p/m]"),E,(0,i.eW)("            png"),j,(0,i.eW)("            jp[e]g"),O,(0,i.eW)("            mp4"),$,(0,i.eW)("            mp3"),X,B,(0,i.eW)(" max size : 25MB"),W,Q,z,F,(0,i.eW)(" max files: 15"),H,_,V,J,K,q],512)),s.state.links.length||s.state.userLinks.length?((0,i.uX)(),(0,i.CE)("div",G,[s.state.links.length?((0,i.uX)(!0),(0,i.CE)(i.FK,{key:0},(0,i.pI)(s.state.links,(e=>((0,i.uX)(),(0,i.Wv)(Y,{state:s.state,link:e,linkMode:"link",key:e.id},null,8,["state","link"])))),128)):(0,i.Q3)("",!0),s.state.userLinks.length?((0,i.uX)(!0),(0,i.CE)(i.FK,{key:1},(0,i.pI)(s.state.userLinks,(e=>((0,i.uX)(),(0,i.Wv)(Y,{state:s.state,link:e,linkMode:"userLink",key:e.id},null,8,["state","link"])))),128)):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)],544)],512)}const Z=e=>((0,i.Qi)("data-v-4525532a"),e=e(),(0,i.jt)(),e),ee={class:"link",ref:"anchor"},te=["for"],se=["id"],ae=Z((()=>(0,i.Lk)("span",{class:"checkmark",style:{"margin-left":"-30px"}},null,-1))),ie=Z((()=>(0,i.Lk)("span",{style:{"font-size":".75em","margin-top":"5px",display:"block",color:"#4f88",padding:"0","margin-left":"-34px"}},"select",-1))),oe=Z((()=>(0,i.Lk)("br",null,null,-1))),ne=["innerHTML"],le={class:"linkButtons"},re=Z((()=>(0,i.Lk)("br",null,null,-1))),de=["href"],he=Z((()=>(0,i.Lk)("br",null,null,-1))),ce=Z((()=>(0,i.Lk)("br",null,null,-1))),ue=Z((()=>(0,i.Lk)("br",null,null,-1))),ge={class:"assetData"},pe=Z((()=>(0,i.Lk)("td",{class:"tdLeft"},"age",-1))),ke=["innerHTML"],me=Z((()=>(0,i.Lk)("td",{class:"tdLeft"},"size",-1))),we=["innerHTML"],fe=Z((()=>(0,i.Lk)("td",{class:"tdLeft"},"name",-1))),be=["innerHTML"];function ve(e,t,s,o,n,l){return(0,i.uX)(),(0,i.CE)("div",ee,[s.state.loggedIn?((0,i.uX)(),(0,i.CE)("label",{for:s.link.linkType+s.link.ct,class:"checkboxLabel",key:s.link.linkType+s.link.ct+"key"},[(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>s.link.selected=e),onInput:t[1]||(t[1]=e=>l.updateLinkSelected()),id:s.link.linkType+s.link.ct},null,40,se),[[a.lH,s.link.selected]]),ae,ie,oe],8,te)):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:"views",innerHTML:l.views},null,8,ne),(0,i.Lk)("div",{class:"linkThumb",ref:"linkThumb",onClick:t[2]||(t[2]=(0,a.D$)((e=>l.preview()),["prevent","stop"])),title:"view this asset"},null,512),(0,i.Lk)("div",le,[(0,i.Lk)("div",{class:"copyLinkButton",onClick:t[3]||(t[3]=(0,a.D$)((e=>l.copy()),["prevent","stop"])),title:"copy link to clipboard"}),re,(0,i.Lk)("a",{href:s.link.href,class:"openButton",onClick:t[4]||(t[4]=(0,a.D$)((e=>l.open()),["prevent","stop"])),title:"open link in new tab"},null,8,de),he,(0,i.Lk)("div",{class:"downloadButton",onClick:t[5]||(t[5]=(0,a.D$)((e=>l.download()),["prevent","stop"])),title:"download asset"}),ce]),ue,(0,i.Lk)("table",ge,[(0,i.Lk)("tr",null,[pe,(0,i.Lk)("td",{class:"tdRight",innerHTML:l.age},null,8,ke)]),(0,i.Lk)("tr",null,[me,(0,i.Lk)("td",{class:"tdRight",innerHTML:l.size},null,8,we)]),(0,i.Lk)("tr",null,[fe,(0,i.Lk)("td",{class:"tdRight",innerHTML:l.fileName},null,8,be)])])],512)}var Le={name:"Link",props:["state","link"],data(){return{c:document.createElement("canvas"),x:null,linkType:"",img:null,w:0,h:0,t:0}},computed:{views(){return"views: "+this.link.views.toLocaleString()},fileName(){let e=this.link.origin.split(": ")[1];return e.length>23&&(e=e.substring(0,10)+"..."+e.substring(e.length-10)),e},size(){let e,t=1048576,s=this.link.size,a=s/t|0,i=(s/t-a)*t/1024|0;return e=a?Math.round(s/t*100)/100+" MB":i?Math.round((s/t-a)*t/1024*100)/100+" KB":this.link.size.toLocaleString()+" B",e},age(){let e=((new Date-new Date(this.link.date))/1e3|0)+3600*((new Date).getTimezoneOffset()/60-4),t=e/31536e3|0,s=31536e3*(e/31536e3-t)/86400|0,a=86400*(31536e3*(e/31536e3-t)/86400-s)/3600|0,i=3600*(86400*(31536e3*(e/31536e3-t)/86400-s)/3600-a)/60|0,o="";return o+=t?`${t} year${t>1?"s":""}, `:"",o+=s?`${s} day${s>1?"s":""}, `:"",o+=a?`${a} hour${a>1?"s":""}, `:"",o+=i?`${i} minute${i>1?"s":""}`:"",o||"added just now..."}},methods:{download(){let e=document.createElement("a");e.download=this.fileName,e.href=this.link.href,e.style.position="absolute",e.style.opacity=.01,document.body.appendChild(e),e.click(),e.remove()},updateLinkSelected(){this.link.selected?this.link.selected=!1:this.link.selected=!0,console.log("selected",this.link.selected)},copy(){this.state.copy(this.link.href)},open(){open(this.link.href,"_blank")},preview(){this.state.previewPosition=this.link.ct,this.state.previewPosition+="userLink"==this.link.linkType?this.state.links.length:0,this.state.previewLink=this.link,this.state.showPreview=!0},Draw(){this.x.globalAlpha=1,this.x.fillStyle="#0008",this.x.fillRect(0,0,this.c.width,this.c.height);let e,t="contain";switch(t){case"contain":e=this.c.width/this.c.height<=1.777777778?this.c.width/this.w:this.c.height/this.h;break;case"cover":e=this.c.width/this.c.height>1.777777778?this.c.width/this.w:this.c.height/this.h;break}let s=5,a=this.w*e-s,i=this.h*e-s;switch(this.x.drawImage(this.img,this.c.width/2-a/2,this.c.height/2-i/2,a,i),this.t+=1/60,this.linkType){case"image":this.img.width||setTimeout((()=>{requestAnimationFrame(this.Draw)}),200);break;case"video":requestAnimationFrame(this.Draw);break}}},mounted(){if(this.$refs.linkThumb.appendChild(this.c),this.x=this.c.getContext("2d"),this.linkType=this.link.type.split("/")[0],this.c.width=500,this.c.height=500/1.77777778,this.c.style.width="200px",this.c.style.height="113px",this.c.style.borderRadius="20px","video"==this.linkType&&(this.img=document.createElement("video"),this.img.loop=!0,this.img.muted=!0,this.img.oncanplay=()=>{this.w=this.img.videoWidth,this.h=this.img.videoHeight,this.img.play(),this.Draw()},this.img.src=this.link.href),"image"==this.linkType||"audio"==this.linkType){let e;this.img=new Image,this.img.onload=()=>{this.w=this.img.width,this.h=this.img.height,this.Draw()},this.img.src="audio"==this.linkType?this.state.URLbase+"/musicNotes.svg":this.state.URLbase+"/thumb.php?res=resources/"+(e=this.link.href.split("/"))[e.length-1].split("?")[0]}}},ye=s(6262);const Pe=(0,ye.A)(Le,[["render",ve],["__scopeId","data-v-4525532a"]]);var Ce=Pe,Ue={name:"Main",props:["state"],components:{Link:Ce},data(){return{preload:[],rejects:[],dragover:!1,showUploadProgress:!1,filesUploading:[]}},methods:{dragLeaveHandler(){this.dragover=!1},dragOverHandler(){this.dragover=!0},processUpload(e){e.length&&(this.showUploadProgress=!0,this.filesUploading=Array(e.length).fill().map((e=>({}))),console.log(e),Array.from(e).forEach(((e,t)=>{e.completed=!1,this.filesUploading[t].perc=0,this.filesUploading[t].uploadName=e.name})),Array.from(e).forEach(((t,s)=>{if("image/gif"==t.type||"image/jiff"==t.type||"image/jpeg"==t.type||"image/jpg"==t.type||"image/png"==t.type||"image/webp"==t.type||"video/mp4"==t.type||"video/webm"==t.type||"video/mkv"==t.type||"audio/mp3"==t.type||"audio/wav"==t.type||"audio/mpeg"==t.type){let a=0,i=new FormData;e.map(((e,t)=>{console.log(`file ${t}: `,e),e.size>25e6?this.rejects=[...this.rejects,e]:(a++,i.append(`uploads_${t}`,e))}));let o='<div style="min-width:90vw; min-height: 50vh; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);background: #4008; color: #f88; padding-top: 100px;">';if(this.rejects.map((e=>{let t=(e.size/1048576|0).toLocaleString("en-us")+" MB<br>";o+=`oversized/rejected: size: ${t} "${e.name}" <br><br>`})),this.rejects.length&&(this.state.modalQueue=[...this.state.modalQueue,o+"</div>"],this.state.closeModal()),a){let a={loggedIn:this.state.loggedIn,userID:this.state.loggedinUserID,passhash:this.state.passhash,description:""};console.log("batchMetaData",a),i.append("batchMetaData",JSON.stringify(a));let o=new XMLHttpRequest;o.open("POST","upload.php"),o.upload.addEventListener("progress",(e=>{let a=e.loaded/e.total*100;this.filesUploading[s].uploadName=t.name,this.filesUploading[s].perc=a})),o.addEventListener("load",(s=>{t.completed=!0;let a=!0;Array.from(e).forEach((e=>{e.completed||(a=!1)})),a&&(this.showUploadProgress=!1,this.state.modalContent="",this.state.closeModal(),this.state.loggedIn&&(this.state.links=[],this.state.fetchUserLinks(this.state.loggedinUserID)))})),o.send(i)}else alert("no files were uploaded. hmmmm")}else alert("a file was rejected due to incorrect type or filesize (max filesize = 100MB)"),this.state.closeModal(),this.showUploadProgress=!1})))},dropFiles(e){let t=[];e.dataTransfer.items?[...e.dataTransfer.items].forEach(((e,s)=>{if("file"===e.kind){const s=e.getAsFile();t=[...t,s]}})):t=Array.from(e.dataTransfer.files),t.length&&this.processUpload(t)},addLink(e,t,s,a,i,o,n,l,r,d,h){let c={size:e,type:t,ct:s,href:a,slug:n,origin:r,selected:i,userID:o,originalSlug:l,linkType:"link",serverTZO:d,views:h};this.state.links.push(c)},loadFiles(){let e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="image/gif, image/jiff, image/jpeg, image/jpg, image/png, image/webp, video/mp4, video/webm, video/mkv, audio/mp3, audio/wav, audio/mpeg",e.onchange=()=>this.processUpload(Array.from(e.files)),e.click()}},mounted(){this.state.loadFiles=this.loadFiles,this.preload=[...this.preload,[document.createElement("video"),"loading.mp4"]],this.preload.map((e=>{e[0].src=this.state.URLbase+"/"+e[1]}))}};const Te=(0,ye.A)(Ue,[["render",Y],["__scopeId","data-v-6fd20d18"]]);var Ie=Te;const Se={class:"modal"},Ae=["innerHTML"];function De(e,t,s,a,o,n){return(0,i.uX)(),(0,i.CE)("div",Se,[this.state.uploadInProgress?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[0]||(t[0]=e=>n.close()),class:"cancelButton",title:"close this view [ESC]"}," close/cancel ")),(0,i.Lk)("div",{class:"modalInner",innerHTML:s.content},null,8,Ae)])}var xe={name:"Modal",props:["state","content"],methods:{close(){this.state.closeModal()}},mounted(){}};const Re=(0,ye.A)(xe,[["render",De],["__scopeId","data-v-d2bf34ba"]]);var Ne=Re;const Me={class:"header"};function Ee(e,t,s,a,o,n){const l=(0,i.g2)("User");return(0,i.uX)(),(0,i.CE)("div",Me,[(0,i.Lk)("div",{class:"headerImg",onClick:t[0]||(t[0]=e=>n.reload())}),s.state.loggedIn?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(l,{key:0,state:s.state},null,8,["state"]))])}const je={key:0},Oe={key:1},$e={class:"userButtonContainer"},Xe={class:"loggedIn"},Be=["title"];function We(e,t,s,a,o,n){return(0,i.uX)(),(0,i.CE)("div",{class:(0,l.C4)(["user",{loggedInWidth:s.state.loggedIn,notLoggedInWidth:!s.state.loggedIn}])},[s.state.loggedIn?((0,i.uX)(),(0,i.CE)("div",Oe,[(0,i.Lk)("div",$e,[(0,i.Lk)("button",{onClick:t[2]||(t[2]=e=>n.logout()),title:"log out",class:"userbutton"},"logout"),(0,i.Lk)("button",{onClick:t[3]||(t[3]=e=>n.userFiles()),title:"go to your assets",style:{"background-color":"#80fc",color:"#fff"},class:"userbutton"},"my assets"),(0,i.Lk)("button",{onClick:t[4]||(t[4]=e=>n.showSettings()),title:"show user settings",class:"userbutton"},"settings"),(0,i.Lk)("button",{onClick:t[5]||(t[5]=e=>n.explore()),title:"learn more about similar tools offered",style:{"background-color":"#08fc",color:"#fff"},class:"userbutton"},"explore")]),(0,i.Lk)("div",Xe,[(0,i.Lk)("div",{onClick:t[6]||(t[6]=e=>n.showSettings()),class:"avatar",title:`logged in as ${s.state.loggedinUserName}. click to show user settings`,style:(0,l.Tr)(`background-image: url(${s.state.loggedInUser.avatar})`)},null,12,Be)])])):((0,i.uX)(),(0,i.CE)("div",je,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=e=>n.login()),class:"loginButton",title:"sign in"}," login "),(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>s.state.register()),class:"loginButton",style:{top:"26px"},title:"register anonymously.<br><br>we only need a user name as<br>something to attach your files to"}," register ")]))],2)}var Qe={name:"Login",props:["state"],data(){return{}},methods:{explore(){open("https://whr.rf.gd/a/about","_blank")},userFiles(){this.state.fetchUserLinks(this.state.loggedinUserID)},showSettings(){this.state.showUserSettings()},login(){this.state.showRegister=!1,this.state.showLoginPrompt=!0},logout(){this.state.logout()},toggleLogin(){this.state.loggedin||this.state.showLoginPrompt()}},mounted(){}};const ze=(0,ye.A)(Qe,[["render",We],["__scopeId","data-v-b347a556"]]);var Fe=ze,He={name:"Header",props:["state"],components:{User:Fe},data(){return{}},methods:{reload(){window.location.reload()}},mounted(){}};const _e=(0,ye.A)(He,[["render",Ee],["__scopeId","data-v-c1a2b010"]]);var Ve=_e;const Je={class:"footer"},Ke=["innerHTML"];function qe(e,t,s,a,o,n){const l=(0,i.g2)("Pages");return(0,i.uX)(),(0,i.CE)("div",Je,[(0,i.Lk)("span",{innerHTML:s.state.footerMsg},null,8,Ke),(0,i.bF)(l,{state:s.state},null,8,["state"])])}const Ge=["disabled"],Ye=["disabled"],Ze=["disabled"],et=["disabled"];function tt(e,t,s,a,o,n){return(s.state.totalPages>0||s.state.totalUserPages>0)&&"track"!=s.state.mode||s.state.search.string&&s.state.totalPages>1?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,l.C4)(["pages",{bumpLeft:!s.state.loggedIn}])},[(0,i.Lk)("button",{class:(0,l.C4)(["navButton",{disabled:n.curPage<1}]),disabled:n.curPage<1,title:"go to first page",onClick:t[0]||(t[0]=e=>s.state.firstPage())}," << ",10,Ge),(0,i.Lk)("button",{class:(0,l.C4)(["navButton",{disabled:n.curPage<1}]),disabled:n.curPage<1,title:"go back one page",onClick:t[1]||(t[1]=e=>s.state.regressPage())}," < ",10,Ye),(0,i.eW)(" "+(0,l.v_)(n.pagenumber)+" ",1),(0,i.Lk)("button",{class:(0,l.C4)(["navButton",{disabled:n.totalPages==n.curPage+1}]),disabled:n.totalPages==n.curPage+1,title:"go forward one page",onClick:t[2]||(t[2]=e=>s.state.advancePage())}," > ",10,Ze),(0,i.Lk)("button",{class:(0,l.C4)(["navButton",{disabled:n.totalPages==n.curPage+1}]),title:"go to last page",disabled:n.totalPages==n.curPage+1,onClick:t[3]||(t[3]=e=>s.state.lastPage())}," >> ",10,et)],2)):(0,i.Q3)("",!0)}var st={name:"Pages",props:["state"],data(){return{}},methods:{},computed:{totalPages(){switch(this.state.mode){case"u":return+this.state.totalUserPages;case"default":return+this.state.totalPages;case"track":return+this.state.totalPages}},curPage(){switch(this.state.mode){case"u":return+this.state.curUserPage;case"default":return+this.state.curPage;case"track":return+this.state.curPage}},pagenumber(){let e;switch(this.state.mode){case"u":e="Page "+(this.state.curUserPage+1)+" of "+this.state.totalUserPages;break;case"default":e="Page "+(this.state.curPage+1)+" of "+this.state.totalPages;break;case"track":e="Page "+(this.state.curPage+1)+" of "+this.state.totalPages;break}return e},origin(){let e=window.location.origin;return-1===e.toLowerCase().indexOf("imjur.000.pe")&&(e+="/imjur"),e}},mounted(){this.curPage>this.totalPages&&this.state.jumpToPage(this.totalPages)}};const at=(0,ye.A)(st,[["render",tt],["__scopeId","data-v-9bc4b89a"]]);var it=at,ot={name:"Footer",props:["state"],components:{Pages:it},data(){return{}},methods:{},mounted(){}};const nt=(0,ye.A)(ot,[["render",qe],["__scopeId","data-v-876780d6"]]);var lt=nt;const rt={class:"preview"},dt={class:"previewInner"},ht={class:"slideshow",ref:"slideshow"};function ct(e,t,s,a,o,n){return(0,i.uX)(),(0,i.CE)("div",rt,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=e=>n.close()),class:"cancelButton",title:"close this view"}," close/cancel "),(0,i.Lk)("div",dt,[(0,i.Lk)("div",ht,null,512),s.state.links.length>1?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"leftButton",onClick:t[1]||(t[1]=e=>s.state.prev()),title:"view previous asset [left arrow]"})):(0,i.Q3)("",!0),s.state.links.length>1?((0,i.uX)(),(0,i.CE)("div",{key:1,class:"rightButton",onClick:t[2]||(t[2]=e=>s.state.next()),title:"view next asset [right arrow]"})):(0,i.Q3)("",!0),s.state.userLinks.length>1?((0,i.uX)(),(0,i.CE)("div",{key:2,class:"leftButton",onClick:t[3]||(t[3]=e=>s.state.prev()),title:"view previous asset [left arrow]"})):(0,i.Q3)("",!0),s.state.userLinks.length>1?((0,i.uX)(),(0,i.CE)("div",{key:3,class:"rightButton",onClick:t[4]||(t[4]=e=>s.state.next()),title:"view next asset [right arrow]"})):(0,i.Q3)("",!0)])])}var ut={name:"Preview",props:["state","link"],data(){return{asset:null,linkType:""}},methods:{close(){this.state.closePreview()}},mounted(){this.linkType=this.link.type.split("/")[0],"image"!=this.linkType&&"audio"!=this.linkType||(this.asset=document.createElement("div"),this.asset.style.top="50%",this.asset.style.left="50%",this.asset.style.width="100%",this.asset.style.height="100%",this.asset.style.position="absolute",this.asset.style.transform="translate(-50%, -50%)",this.asset.style.objectFit="contain",this.asset.style.backgroundColor="#000",this.asset.style.backgroundSize="contain",this.asset.style.backgroundRepeat="no-repeat",this.asset.style.backgroundPosition="center center",this.asset.style.backgroundImage=`url(${"audio"==this.linkType?"musicNotes.svg":this.state.URLbase+"/"+this.link.href})`,this.$refs.slideshow.appendChild(this.asset)),"audio"==this.linkType&&(this.asset=document.createElement("audio"),this.asset.controls=!0,this.asset.style.position="absolute",this.asset.style.left="50%",this.asset.style.top="50%",this.asset.loop=!0,this.asset.style.transform="translate(-50%, -50%)",this.asset.oncanplay=()=>{this.asset.play()},this.$refs.slideshow.appendChild(this.asset),this.asset.src=this.state.URLbase+"/"+this.link.href),"video"==this.linkType&&(this.asset=document.createElement("video"),this.asset.controls=!0,this.asset.style.position="absolute",this.asset.style.left="50%",this.asset.style.top="50%",this.asset.style.width="100%",this.asset.style.height="100%",this.asset.style.objectFit="contain",this.asset.style.background="#000",this.asset.loop=!0,this.asset.style.transform="translate(-50%, -50%)",this.asset.oncanplay=()=>{this.asset.play()},this.$refs.slideshow.appendChild(this.asset),this.asset.src=this.state.URLbase+"/"+this.link.href)},beforeUnmount(){this.asset.src=""}};const gt=(0,ye.A)(ut,[["render",ct],["__scopeId","data-v-1cf5f570"]]);var pt=gt;const kt=e=>((0,i.Qi)("data-v-01f4bf5c"),e=e(),(0,i.jt)(),e),mt={class:"toolbar"},wt={key:0,class:"toolbarSection"},ft=kt((()=>(0,i.Lk)("span",{style:{"margin-left":"5px","font-size":".8em"}},"[w/selected→]",-1))),bt=["disabled"],vt={key:1,class:"toolbarSection"},Lt=["disabled"],yt=["disabled"],Pt=["innerHTML"],Ct={key:2,class:"toolbarSection"};function Ut(e,t,s,a,o,n){const r=(0,i.g2)("User");return(0,i.uX)(),(0,i.CE)("div",mt,[(0,i.bF)(r,{state:s.state},null,8,["state"]),(0,i.Lk)("button",{onClick:t[0]||(t[0]=e=>s.state.loadFiles()),class:"toolbarButtons"}," upload "),s.state.loggedIn?((0,i.uX)(),(0,i.CE)("div",wt,[ft,(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>s.state.deleteSelected()),class:(0,l.C4)(["toolbarButtons",{deleteButton:n.someSelected,disabledButton:!n.someSelected}]),disabled:!n.someSelected,title:"delete selected [del]"}," delete ",10,bt)])):(0,i.Q3)("",!0),s.state.loggedIn?((0,i.uX)(),(0,i.CE)("div",vt,[(0,i.Lk)("button",{onClick:t[2]||(t[2]=e=>s.state.selectAll()),class:(0,l.C4)(["toolbarButtons",{buttons:!n.allSelected,disabledButton:n.allSelected}]),disabled:n.allSelected,title:"select all [ctrl + a]"}," select all ",10,Lt),(0,i.Lk)("button",{onClick:t[3]||(t[3]=e=>s.state.deSelectAll()),class:(0,l.C4)(["toolbarButtons",{buttons:n.someSelected,disabledButton:!n.someSelected}]),disabled:!n.someSelected,title:"de-select all [ctrl + shift + a]"}," deselect all ",10,yt),(0,i.Lk)("div",{class:"username",innerHTML:"welcome,   <br>"+s.state.username},null,8,Pt)])):((0,i.uX)(),(0,i.CE)("div",Ct))])}var Tt={name:"Toolbar",props:["state"],components:{User:Fe},data(){return{}},computed:{someSelected(){return this.state.links.filter((e=>e.selected)).length||this.state.userLinks.filter((e=>e.selected)).length},allSelected(){return this.state.links.filter((e=>e.selected)).length+this.state.userLinks.filter((e=>e.selected)).length==this.state.links.length+this.state.userLinks.length}},methods:{},mounted(){}};const It=(0,ye.A)(Tt,[["render",Ut],["__scopeId","data-v-01f4bf5c"]]);var St=It;const At=e=>((0,i.Qi)("data-v-b65192d2"),e=e(),(0,i.jt)(),e),Dt={class:"LoginPrompt"},xt={class:"mainLoginContainer"},Rt={key:0},Nt=At((()=>(0,i.Lk)("span",{class:"title"},"login",-1))),Mt=At((()=>(0,i.Lk)("br",null,null,-1))),Et={class:"inputContainer"},jt=At((()=>(0,i.Lk)("div",{class:"inputTitle"},"User Name",-1))),Ot=At((()=>(0,i.Lk)("br",null,null,-1))),$t={class:"inputContainer"},Xt=At((()=>(0,i.Lk)("div",{class:"inputTitle"},"Password",-1))),Bt=At((()=>(0,i.Lk)("br",null,null,-1))),Wt={key:0,class:"invalidLogin"},Qt=At((()=>(0,i.Lk)("div",{class:"spacerDiv",style:{"margin-top":"30px"}},null,-1))),zt={key:1},Ft=At((()=>(0,i.Lk)("div",{class:"spacerDiv",style:{"margin-top":"10px"}},null,-1))),Ht=At((()=>(0,i.Lk)("br",null,null,-1))),_t={key:0,class:"mustRegister"},Vt=At((()=>(0,i.Lk)("br",null,null,-1))),Jt=At((()=>(0,i.Lk)("br",null,null,-1))),Kt=At((()=>(0,i.Lk)("span",{class:"title"},"register",-1))),qt=At((()=>(0,i.Lk)("br",null,null,-1))),Gt={class:"inputContainer"},Yt={class:"inputTitle"},Zt={key:0,style:{display:"inline-block",color:"#f00"}},es=At((()=>(0,i.Lk)("i",null,"user name unavailable",-1))),ts={key:1,style:{display:"inline-block",color:"#0f4"}},ss=At((()=>(0,i.Lk)("i",null,"user name available",-1))),as=At((()=>(0,i.Lk)("br",null,null,-1))),is={class:"inputContainer"},os={class:"inputTitle"},ns={key:0,style:{display:"inline-block",color:"#f00"}},ls={key:1,style:{display:"inline-block",color:"#0f4"}},rs=At((()=>(0,i.Lk)("i",null,"passwords match!",-1))),ds=At((()=>(0,i.Lk)("br",null,null,-1))),hs={class:"inputContainer"},cs=At((()=>(0,i.Lk)("div",{class:"inputTitle"},"Confirm Password",-1))),us=At((()=>(0,i.Lk)("br",null,null,-1))),gs=["disabled"],ps={key:1,class:"invalidLogin"},ks={style:{position:"absolute","z-index":"-1",opacity:"0"},ref:"bottomTabAnchor",type:"text"};function ms(e,t,s,o,n,r){return(0,i.uX)(),(0,i.CE)("div",Dt,[(0,i.Lk)("div",xt,[s.state.showRegister?((0,i.uX)(),(0,i.CE)("div",zt,[Ft,(0,i.Lk)("button",{class:"toggleButton",onClick:t[11]||(t[11]=e=>r.toggleView())}," ↑   login   ↑ "),Ht,s.state.displayLoginRequired?((0,i.uX)(),(0,i.CE)("div",_t,[(0,i.eW)(" You must register or"),Vt,(0,i.eW)(" log-in to create a demo!"),Jt])):(0,i.Q3)("",!0),Kt,qt,(0,i.Lk)("div",Gt,[(0,i.Lk)("div",Yt,[(0,i.eW)(" User Name "),n.userNameAvailable?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Zt,[(0,i.eW)("     "),es])),n.userNameAvailable&&s.state.regusername?((0,i.uX)(),(0,i.CE)("div",ts,[(0,i.eW)("     "),ss])):(0,i.Q3)("",!0)]),(0,i.Lk)("input",{style:{position:"absolute","z-index":"-1",opacity:"0"},ref:"loginTabAnchor",type:"text",onKeydown:[t[12]||(t[12]=(0,a.jR)((e=>r.submit()),["enter"])),t[13]||(t[13]=(0,a.jR)((0,a.D$)((t=>e.$refs.bottomTabAnchor.focus()),["shift"]),["tab"]))]},null,544),(0,i.bo)((0,i.Lk)("input",{type:"text",ref:"regusername","onUpdate:modelValue":t[14]||(t[14]=e=>s.state.regusername=e),class:(0,l.C4)(["input",{userNameUnavailable:!n.userNameAvailable,userNameAvailable:n.userNameAvailable&&s.state.regusername}]),maxlength:"16",onInput:t[15]||(t[15]=e=>r.checkUserNameAvailability()),onKeydown:[t[16]||(t[16]=(0,a.jR)((e=>r.submit()),["enter"])),t[17]||(t[17]=(0,a.jR)((0,a.D$)((t=>e.$refs.bottomTabAnchor.focus()),["shift"]),["tab"]))]},null,34),[[a.Jo,s.state.regusername]]),as]),(0,i.Lk)("div",is,[(0,i.Lk)("div",os,[(0,i.eW)(" Password "),!r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword?((0,i.uX)(),(0,i.CE)("div",ns,"     passwords do not match ")):(0,i.Q3)("",!0),r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword?((0,i.uX)(),(0,i.CE)("div",ls,[(0,i.eW)("     "),rs])):(0,i.Q3)("",!0)]),(0,i.bo)((0,i.Lk)("input",{type:"password",ref:"regpassword","onUpdate:modelValue":t[18]||(t[18]=e=>s.state.regpassword=e),class:(0,l.C4)(["input",{passwordsDoNotMatch:!r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword,passwordsMatch:r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword}]),onKeydown:t[19]||(t[19]=(0,a.jR)((e=>r.submit()),["enter"]))},null,34),[[a.Jo,s.state.regpassword]]),ds]),(0,i.Lk)("div",hs,[cs,(0,i.bo)((0,i.Lk)("input",{type:"password",ref:"confirmpassword","onUpdate:modelValue":t[20]||(t[20]=e=>s.state.confirmpassword=e),class:(0,l.C4)(["input",{passwordsDoNotMatch:!r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword,passwordsMatch:r.passwordsMatch&&s.state.regpassword&&s.state.confirmpassword}]),onKeydown:t[21]||(t[21]=(0,a.jR)((e=>r.submit()),["enter"]))},null,34),[[a.Jo,s.state.confirmpassword]]),us]),(0,i.Lk)("button",{onClick:t[22]||(t[22]=e=>r.submit()),disabled:!r.validate,class:(0,l.C4)({disabledButton:!r.validate})},"submit",10,gs),(0,i.Lk)("button",{onClick:t[23]||(t[23]=e=>r.closePrompt()),onKeydown:[t[24]||(t[24]=(0,a.jR)((t=>e.$refs.loginTabAnchor.focus()),["tab"])),t[25]||(t[25]=(0,a.jR)((0,a.D$)((t=>e.$refs.cancelButton.focus()),["shift"]),["tab"]))],ref:"cancelButton",style:{background:"#faa"}},"cancel",544),n.showInvalid?((0,i.uX)(),(0,i.CE)("div",ps," Whoa! check your info... ")):(0,i.Q3)("",!0),(0,i.Lk)("input",ks,null,512)])):((0,i.uX)(),(0,i.CE)("div",Rt,[Nt,Mt,(0,i.Lk)("div",Et,[jt,(0,i.Lk)("input",{style:{position:"absolute","z-index":"-1",opacity:"0"},ref:"loginTabAnchor",onKeydown:t[0]||(t[0]=(0,a.jR)((0,a.D$)((t=>e.$refs.bottomTabAnchor.focus()),["shift"]),["tab"])),type:"text"},null,544),(0,i.bo)((0,i.Lk)("input",{type:"text",ref:"username","onUpdate:modelValue":t[1]||(t[1]=e=>s.state.username=e),class:"input",onKeydown:[t[2]||(t[2]=(0,a.jR)((e=>s.state.login()),["enter"])),t[3]||(t[3]=(0,a.jR)((0,a.D$)((t=>e.$refs.bottomTabAnchor.focus()),["shift"]),["tab"]))]},null,544),[[a.Jo,s.state.username]]),Ot]),(0,i.Lk)("div",$t,[Xt,(0,i.bo)((0,i.Lk)("input",{type:"password",ref:"password","onUpdate:modelValue":t[4]||(t[4]=e=>s.state.password=e),class:"input",onKeydown:t[5]||(t[5]=(0,a.jR)((e=>s.state.login()),["enter"]))},null,544),[[a.Jo,s.state.password]]),Bt]),(0,i.Lk)("button",{onClick:t[6]||(t[6]=e=>s.state.login()),ref:"go"},"Go",512),(0,i.Lk)("button",{onClick:t[7]||(t[7]=e=>r.closePrompt()),onKeydown:[t[8]||(t[8]=(0,a.jR)((t=>e.$refs.loginTabAnchor.focus()),["tab"])),t[9]||(t[9]=(0,a.jR)((0,a.D$)((t=>e.$refs.cancelButton.focus()),["shift"]),["tab"]))],style:{background:"#faa"},ref:"cancelButton"},"cancel",544),s.state.invalidLoginAttempt?((0,i.uX)(),(0,i.CE)("div",Wt," Invalid User Name or Password ")):(0,i.Q3)("",!0),Qt,(0,i.Lk)("button",{class:"toggleButton",onClick:t[10]||(t[10]=e=>r.toggleView()),ref:"bottomTabAnchor"}," ↓   register   ↓ ",512)]))])])}var ws={name:"LoginPrompt",props:["state"],data(){return{userNameAvailable:!0,showInvalid:!1}},computed:{passwordsMatch(){return this.state.regpassword===this.state.confirmpassword},validate(){return this.state.regusername&&this.state.regpassword&&this.passwordsMatch&&this.userNameAvailable}},methods:{submit(){if(this.validate){let e={userName:this.state.regusername,password:this.state.regpassword,avatar:this.state.defaultAvatar};fetch("submitReg.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{console.log(e),e[0]?(this.state.userName=this.state.regusername,console.log("login succeeded!"),this.state.loggedIn=!0,this.state.loggedinUserName=this.state.regusername,this.state.loggedinUserID=+e[2],this.state.isAdmin=+e[4],this.state.loggedInUser.avatar=this.state.defaultAvatar,this.state.passhash=e[1],this.state.setCookie(),this.state.closePrompts(),this.state.invalidLoginAttemp=!1,this.state.checkLogin()):this.showInvalid=!0}))}else console.log("failed validation. no reg submitted"),this.showInvalid=!0},toggleView(){this.state.showRegister=!this.state.showRegister,this.$nextTick((()=>{this.state.showRegister?this.$refs.regusername.focus():this.$refs.username.focus()}))},toggleLogin(){this.state.loggedIn||this.state.showLoginPrompt()},closePrompt(){this.state.closePrompts()},checkUserNameAvailability(){if(this.userNameAvailable=!0,this.state.regusername){let e={userName:this.state.regusername};fetch("checkUserNameAvailability.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{this.userNameAvailable=e}))}}},mounted(){this.state.confirmpassword="",this.state.showRegister?this.$refs.regusername.focus():this.$refs.username.focus()}};const fs=(0,ye.A)(ws,[["render",ms],["__scopeId","data-v-b65192d2"]]);var bs=fs;const vs={class:"UserSettings"},Ls={class:"mainContainer"},ys={style:{"font-size":"28px","line-height":"1em","font-weight":"900"}},Ps=(0,i.Lk)("br",null,null,-1),Cs=(0,i.Lk)("span",{style:{color:"#aff","font-size":"36px","font-weight":"400"}},"settings",-1),Us=(0,i.Lk)("div",{class:"spacerDiv"},null,-1),Ts=(0,i.Lk)("br",null,null,-1),Is={class:"editAvatarImgContainer"},Ss=["src"],As=(0,i.Lk)("br",null,null,-1),Ds={key:0,style:{color:"#4f8","font-size":"18px",background:"#055",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},xs={key:1,style:{color:"#f44","font-size":"18px",background:"#500",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},Rs=(0,i.Lk)("div",{class:"spacerDiv",style:{"margin-top":"20px"}},null,-1),Ns=(0,i.Lk)("br",null,null,-1),Ms=(0,i.Lk)("br",null,null,-1),Es=(0,i.Lk)("br",null,null,-1),js=(0,i.Lk)("br",null,null,-1),Os={key:2,style:{color:"#4f8","font-size":"24px",background:"#055",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},$s={key:3,style:{color:"#f44","font-size":"20px",background:"#400",padding:"4px","margin-top":"10px","padding-bottom":"8px"}},Xs={key:4,style:{color:"#f00","font-size":"20px"}},Bs={key:5,style:{color:"#0f4"}},Ws=(0,i.Lk)("i",null,"passwords match!",-1),Qs=["disabled"],zs=(0,i.Lk)("div",{class:"spacerDiv"},null,-1);function Fs(e,t,s,o,n,r){return(0,i.uX)(),(0,i.CE)("div",vs,[(0,i.Lk)("div",Ls,[(0,i.Lk)("span",ys,[(0,i.eW)((0,l.v_)(s.state.loggedinUserName)+" ",1),Ps,Cs]),Us,(0,i.eW)(" your avatar"),Ts,(0,i.Lk)("div",Is,[(0,i.Lk)("img",{src:s.state.loggedInUser.avatar,class:"editAvatarImg"},null,8,Ss)]),(0,i.Lk)("input",{style:{opacity:"0",position:"absolute","z-index":"-1"},ref:"tabAnchor",onKeydown:t[0]||(t[0]=(0,a.jR)((0,a.D$)((t=>e.$refs.cancelButton.focus()),["shift"]),["tab"]))},null,544),(0,i.bo)((0,i.Lk)("input",{type:"text",ref:"avatarURL","onUpdate:modelValue":t[1]||(t[1]=e=>s.state.loggedInUser.avatar=e),class:"input avatarInput",onInput:t[2]||(t[2]=e=>r.updateAvatar()),onClick:t[3]||(t[3]=e=>e.target.select()),placeholder:"URL to an online image..."},null,544),[[a.Jo,s.state.loggedInUser.avatar]]),As,1==n.avatarUpdateSuccessful?((0,i.uX)(),(0,i.CE)("div",Ds,"     avatar update successful ")):(0,i.Q3)("",!0),-1==n.avatarUpdateSuccessful?((0,i.uX)(),(0,i.CE)("div",xs,"     avatar update NOT successful ")):(0,i.Q3)("",!0),Rs,(0,i.eW)(" change your password"),Ns,(0,i.bo)((0,i.Lk)("input",{type:"password",ref:"currentpassword",class:"input passwordFields","onUpdate:modelValue":t[4]||(t[4]=e=>n.currentPassword=e),onKeydown:t[5]||(t[5]=(0,a.jR)((e=>r.savePassword()),["enter"])),onClick:t[6]||(t[6]=e=>e.target.select()),onInput:t[7]||(t[7]=e=>n.showInvalid=!1),placeholder:"current password"},null,544),[[a.Jo,n.currentPassword]]),Ms,(0,i.bo)((0,i.Lk)("input",{type:"password",ref:"newpassword",class:(0,l.C4)(["input passwordFields",{passwordsDoNotMatch:!r.passwordsMatch&&n.newPassword&&n.confirmNewPassword,passwordsMatch:r.passwordsMatch&&n.newPassword&&n.confirmNewPassword}]),"onUpdate:modelValue":t[8]||(t[8]=e=>n.newPassword=e),onKeydown:t[9]||(t[9]=(0,a.jR)((e=>r.savePassword()),["enter"])),onInput:t[10]||(t[10]=e=>n.showInvalid=!1),onClick:t[11]||(t[11]=e=>e.target.select()),placeholder:"new password"},null,34),[[a.Jo,n.newPassword]]),Es,(0,i.bo)((0,i.Lk)("input",{type:"password",ref:"confirmnewpassword","onUpdate:modelValue":t[12]||(t[12]=e=>n.confirmNewPassword=e),onInput:t[13]||(t[13]=e=>n.showInvalid=!1),class:(0,l.C4)(["input passwordFields",{passwordsDoNotMatch:!r.passwordsMatch&&n.newPassword&&n.confirmNewPassword,passwordsMatch:r.passwordsMatch&&n.newPassword&&n.confirmNewPassword}]),onClick:t[14]||(t[14]=e=>e.target.select()),onKeydown:t[15]||(t[15]=(0,a.jR)((e=>r.savePassword()),["enter"])),placeholder:"confirm new password"},null,34),[[a.Jo,n.confirmNewPassword]]),js,n.savedPassword?((0,i.uX)(),(0,i.CE)("div",Os,"     password saved ")):(0,i.Q3)("",!0),n.showInvalid?((0,i.uX)(),(0,i.CE)("div",$s,"     ERROR SAVING PASSWORD! ")):(0,i.Q3)("",!0),n.savedPassword||n.showInvalid||r.passwordsMatch||!n.newPassword||!n.confirmNewPassword?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Xs,"     passwords do not match ")),!n.savedPassword&&!n.showInvalid&&r.passwordsMatch&&n.newPassword&&n.confirmNewPassword?((0,i.uX)(),(0,i.CE)("div",Bs,[(0,i.eW)("     "),Ws])):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t[16]||(t[16]=e=>r.savePassword()),ref:"cancelButton",disabled:!r.validate,class:(0,l.C4)([{disabledButton:!r.validate},"userSettingsButton"])},"save",10,Qs),zs,(0,i.Lk)("button",{onClick:t[17]||(t[17]=e=>r.closePrompt()),onKeydown:[t[18]||(t[18]=(0,a.jR)((t=>e.$refs.tabAnchor.focus()),["tab"])),t[19]||(t[19]=(0,a.jR)((0,a.D$)((t=>e.$refs.cancelButton.focus()),["shift"]),["tab"]))],ref:"cancelButton",style:{background:"#faa"},class:"userSettingsButton"},"close / cancel",544),(0,i.Lk)("input",{style:{opacity:"0",position:"absolute","z-index":"-1"},ref:"endTabAnchor",onKeydown:t[20]||(t[20]=(0,a.jR)((0,a.D$)((t=>e.$refs.confirmnewassword.focus()),["shift"]),["tab"]))},null,544)])])}var Hs={name:"UserSettings",props:["state"],data(){return{newPassword:"",confirmNewPassword:"",currentPassword:"",savedPassword:!1,showInvalid:!1,avatarUpdateSuccessful:0}},computed:{passwordsMatch(){return this.newPassword===this.confirmNewPassword},validate(){return this.passwordsMatch&&this.newPassword&&this.confirmNewPassword&&this.currentPassword}},methods:{savePassword(){if(this.validate){let e={userName:this.state.loggedinUserName,currentPassword:this.currentPassword,newPassword:this.newPassword};fetch("changePassword.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{e[0]?(this.state.passhash=e[1],this.savedPassword=!0,this.currentPassword=this.newPassword=this.confirmNewPassword="",this.state.setCookie()):this.showInvalid=!0}))}else this.savedPassword=!1,this.showInvalid=!0},closePrompt(){this.state.closePrompts()},updateAvatar(){let e={userName:this.state.loggedinUserName,passhash:this.state.passhash,newAvatar:this.state.loggedInUser.avatar};fetch("updateAvatar.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{e[0]?(this.avatarUpdateSuccessful=1,setTimeout((()=>this.avatarUpdateSuccessful=0),2e3)):(this.avatarUpdateSuccssful=-1,setTimeout((()=>this.avatarUpdateSuccessful=0),2e3))}))}},mounted(){this.$refs.currentpassword.focus()}};const _s=(0,ye.A)(Hs,[["render",Fs]]);var Vs=_s,Js={name:"App",components:{Header:Ve,Toolbar:St,Main:Ie,Footer:lt,UserSettings:Vs,Modal:Ne,Preview:pt,LoginPrompt:bs},data(){return{state:{footerMsg:"<b>IMJUR</b><br>A FREE DIGITAL ASSET<br>HOSTING SERVICE - ©"+(new Date).getFullYear()+'<br>contact: <a href="mailto:whitehotrobot@gmail.com">whitehotrobot@gmail.com</a>',links:[],userLinks:[],uploadInProgress:!1,showModal:!1,fetchUserLinks:null,setCookie:null,mode:null,deleteSelected:null,getAvatar:null,showPreview:!1,rootDomain:location.hostname,modalContent:"",modalQueue:[],previewLink:null,passhash:"",loggedinUserID:null,closeModal:null,closePreview:null,closePrompts:null,defaultAvatar:"avatarDefault.png",loggedInUser:{avatar:"avatarDefault.png"},loggedinUserName:"",copy:null,next:null,prev:null,login:null,register:null,URLbase:null,logout:null,regusername:"",username:"",userView:!1,password:"",maxResultsPerPage:5,showUserSettings:null,invalidLoginAttempt:!1,displayLoginRequired:!1,userSettingsVisible:!1,regpassword:"",showUploadModal:!1,checkLogin:null,search:{string:"",hits:0,inProgress:!1,timer:0,timerHandle:null,exact:!1,allWords:!0},confirmpassword:"",totalPages:0,totalUserPages:0,setLinksOwner:null,curPage:0,curUserPage:0,regressPage:null,advancePage:null,lastPage:null,firstPage:null,selectAll:null,deSelectAll:null,showLoginPrompt:!1,loadFiles:null,showRegister:!1,loggedIn:!1,loginPromptVisible:!1,getPages:null,previewPosition:0,keys:Array(128).fill(!1)}}},methods:{prev(){this.state.showPreview&&(this.state.showPreview=!1,this.state.previewPosition-=1,this.state.previewPosition<0&&(this.state.previewPosition=this.state.userLinks.length+this.state.links.length-1),this.state.previewPosition>this.state.links.length-1?this.state.previewLink=this.state.userLinks[this.state.previewPosition-this.state.links.length]:this.state.previewLink=this.state.links[this.state.previewPosition],this.$nextTick((()=>{this.state.showPreview=!0})))},next(){this.state.showPreview&&(this.state.showPreview=!1,this.state.previewPosition++,this.state.previewPosition%=this.state.userLinks.length+this.state.links.length,this.state.previewPosition>this.state.links.length-1?this.state.previewLink=this.state.userLinks[this.state.previewPosition-this.state.links.length]:this.state.previewLink=this.state.links[this.state.previewPosition],this.$nextTick((()=>{this.state.showPreview=!0})))},register(){console.log("registering"),this.state.showLoginPrompt=!0,this.state.showRegister=!0},showUserSettings(){document.getElementsByTagName("HTML")[0].style.overflowY="hidden",this.state.userSettingsVisible=!0},firstPage(){let e=this.state.search.string?"/1/"+this.state.search.string:"";switch(this.state.mode){case"u":window.location.href=this.URLbase+"/u/"+this.state.user.name+e;break;case"default":window.location.href=this.URLbase+e;break;case"track":window.location.href=this.URLbase+"/track/"+this.state.curTrack+e;break}},jumpToPage(e){let t=this.state.search.string?"/"+this.state.search.string:"";switch(this.state.mode){case"u":window.location.href=this.URLbase+"/u/"+this.user.name+"/"+e+t;break;case"default":window.location.href=this.URLbase+"/"+e+t;break;case"track":window.location.href=this.URLbase+"/track/"+this.decToAlpha(this.state.curTrack)+"/"+e+t;break}},lastPage(){let e=this.state.search.string?"/"+this.state.search.string:"";switch(this.state.mode){case"u":window.location.href=this.URLbase+"/u/"+this.state.user.name+"/"+this.state.totalUserPages+e;break;case"default":window.location.href=this.URLbase+"/"+this.state.totalPages+e;break;case"track":window.location.href=this.URLbase+"/track/"+this.decToAlpha(this.state.curTrack)+"/"+this.state.totalPages+e;break}},advancePage(){let e=this.state.search.string?"/"+this.state.search.string:"";switch(this.state.mode){case"u":window.location.href=this.URLbase+"/u/"+this.state.user.name+"/"+(this.state.curUserPage+2)+e;break;case"default":window.location.href=this.URLbase+"/"+(this.state.curPage+2)+e;break;case"track":window.location.href=this.URLbase+"/track/"+this.decToAlpha(this.state.curTrack)+"/"+(this.state.curPage+2)+e;break}},regressPage(){let e=this.state.search.string?"/"+this.state.search.string:"";switch(this.state.mode){case"u":window.location.href=this.URLbase+"/u/"+this.state.user.name+"/"+this.state.curUserPage+e;break;case"default":window.location.href=this.URLbase+"/"+this.state.curPage+e;break;case"track":window.location.href=this.URLbase+"/track/"+this.decToAlpha(this.state.curTrack)+"/"+(this.state.curPage+2)+e;break}},copy(e){let t=document.createElement("div");t.innerHTML=this.URLbase+"/"+e,t.style.opacity=.01,t.style.position="absolute",document.body.appendChild(t);var s=document.createRange();s.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(s),document.execCommand("copy"),window.getSelection().removeAllRanges(),t.remove();let a=document.querySelector("#copyConfirmation");a.style.display="block",a.style.opacity=1;let i=()=>{+a.style.opacity>0&&(a.style.opacity-=.04,+a.style.opacity<.1?(a.style.opacity=1,a.style.display="none"):setTimeout((()=>{i()}),10))};setTimeout((()=>{i()}),250)},closePrompts(){this.state.showLoginPrompt=!1,this.state.userSettingsVisible=!1},closeModal(){this.state.modalQueue.length?this.state.modalContent=this.state.modalQueue.shift():(this.state.showModal=!1,this.state.modalContent="")},getAvatar(e){return this.state.loggedIn?this.state.loggedInUser.avatar:this.state.defaultAvatar},closePreview(){this.state.showPreview=!1,this.state.previewLink=null},checkEnabled(){if(this.state.loggedinUserName){let e={userName:this.state.loggedinUserName,passhash:this.state.passhash};fetch("checkEnabled.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{+e[0]?(console.log("logged in."),this.state.loggedIn=!0,this.state.loggedinUserID=+e[1],this.state.loggedInUser.avatar=e[2],this.state.username=this.state.regusername||this.state.loggedinUserName,this.setCookie(),this.state.loginPromptVisible=!1,this.state.invalidLoginAttemp=!1,+e[3]&&(this.state.isAdmin=!0),this.fetchUserLinks(this.state.loggedinUserID)):(console.log("not logged in."),this.state.loggedIn=!1,this.state.loggedinUserName="",this.state.loggedinUserID="",this.state.passhash="",this.state.isAdmin=!1,this.state.invalidLoginAttempt=!0),this.getMode()}))}},setLinksOwner(){if(!this.state.links.length)return;let e={userName:this.state.username,passhash:this.state.passhash,ids:JSON.parse(JSON.stringify(this.state.links.map((e=>e.id))))};fetch("setOwner.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{e[0]||alert("error setting link owner")}))},fetchUserLinks(e){if(this.state.loggedinUserName){let t={userID:e,page:this.state.curPage,maxResultsPerPage:this.state.maxResultsPerPage};fetch("fetchUserLinks.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>{+e[0]&&(console.log(e),this.state.userLinks=[],e[1].map(((t,s)=>{let a={size:+e[2][s].size,type:e[2][s].type,selected:!1,ct:s,href:t,userID:+e[2][s].userID,id:+e[2][s].id,slug:e[2][s].slug,originalSlug:e[2][s].originalSlug,origin:e[2][s].origin,date:e[2][s].date,linkType:"userLink",serverTZO:e[2][s].serverTZO,views:e[2][s].views};this.state.userLinks.push(a)})),this.state.totalPages=+e[3],this.state.curPage+1>this.state.totalPages&&this.lastPage())}))}},selectAll(){this.state.links.map((e=>{e.selected=!0})),this.state.userLinks.map((e=>{e.selected=!0}))},deSelectAll(){this.state.links.map((e=>{e.selected=!1})),this.state.userLinks.map((e=>{e.selected=!1}))},deleteSelected(){let e=0,t=[],s=[],a=[];if(this.state.links.map(((s,i)=>{s.selected&&(e++,t=[...t,s.id],a=[...a,s.slug])})),this.state.userLinks.map(((t,i)=>{t.selected&&(e++,s=[...s,t.id],a=[...a,t.slug])})),e&&-1!=prompt(`\n\nARE YOU SURE YOU WANT TO DELETE ${e} ITEM${e>1?"S":""}?\n\n\n   >>> THIS ACTION CANNOT BE UNDONE! <<<\n\n\n  type 'yes' to continue"`).toLowerCase().indexOf("yes")){console.log("deleting selected...");let t={userName:this.state.username,passhash:this.state.passhash,slugs:a};console.log("sendData",t),fetch("delete.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((t=>{console.log(t),t[0]?(console.log(`deleted ${e} items`),this.state.links=[],this.fetchUserLinks(this.state.loggedinUserID)):alert(`there was a problem deleting ${a.length>1?"these":"this"} asset${a.length>1?"s":""}`)}))}},setCookie(){let e=document.cookie;e.split(";").map((e=>{-1==e.indexOf("autoplay")&&(document.cookie=e+"; expires="+new Date(0).toUTCString()+"; path=/; domain="+this.state.rootDomain)})),document.cookie="loggedinuser="+this.state.loggedinUserName+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="loggedinuserID="+this.state.loggedinUserID+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="token="+this.state.passhash+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="autoplay="+this.state.autoplay+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain,document.cookie="showControls="+this.state.showControls+"; expires="+new Date(Date.now()+31536e8).toUTCString()+"; path=/; domain="+this.state.rootDomain},getPages(){console.log("loaded. mode: "+this.state.mode)},login(){let e={userName:this.state.username,password:this.state.password};fetch("login.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{e[0]?(console.log("login succeeded!"),this.state.loggedIn=!0,this.state.loggedinUserName=this.state.username,this.state.loggedinUserID=+e[2],this.state.isAdmin=+e[4],this.state.passhash=e[1],this.setCookie(),this.closePrompts(),this.state.invalidLoginAttemp=!1,this.state.loggedInUser.avatar=e[3],this.fetchUserLinks(this.state.loggedinUserID),this.setLinksOwner(),this.state.userLinks=[...this.state.userLinks,...this.state.links.map((e=>(e.userID=this.state.loggedinUserID,e)))],this.state.links=[]):(console.log("not logged in."),this.state.loggedIn=!1,this.state.invalidLoginAttempt=!0)}))},getMode(){let e=window.location.pathname.split("/").filter((e=>e));if(console.log(e),e.length>0)switch(e[0]){case"d":this.state.mode="single";break;case"u":break;default:this.state.mode="default";let t="";e[0]?(this.state.curPage=+e[0]-1,e[1]?(this.state.search.string=decodeURIComponent(e[1]),t="/"+e[1],history.pushState(null,null,this.URLbase+"/"+(this.state.curPage+1))):(history.pushState(null,null,this.URLbase+"/"+this.state.curPage?this.state.curPage+1:""),(!this.state.curPage||this.state.curPage<0||this.state.curPage>1e6)&&(this.state.curPage=0),this.fetchUserLinks(this.state.loggedinUserID))):window.location.href=this.URLbase;break}else this.state.mode="default",this.getPages(),window.location.href!==this.URLbase+"/"&&(window.location.href=window.location.origin)},logout(){let e=document.cookie;switch(e.split(";").map((e=>{-1==e.indexOf("autoplay")&&(document.cookie=e+"; expires="+new Date(0).toUTCString()+"; path=/; domain="+this.state.rootDomain)})),this.state.mode){case"user":break;case"single":break;case"default":break}this.state.loggedIn=!1,this.state.isAdmin=!1,this.state.loggedinUserID=this.state.loggedinUserName="",window.location.reload()},checkLogin(){let e=document.cookie.split(";").filter((e=>"loggedinuser"===e.split("=")[0].trim()));if(e.length){this.state.loggedinUserName=e[0].split("=")[1],this.state.username=this.state.loggedinUserName;let t=document.cookie.split(";").filter((e=>"token"===e.split("=")[0].trim()));if(t.length){this.state.passhash=t[0].split("=")[1];let e=document.cookie.split(";").filter((e=>"loggedinuserID"===e.split("=")[0].trim()));e.length&&(this.state.loggedinUserID=+e[0].split("=")[1],this.checkEnabled())}}else this.getMode()}},watch:{"state.uploadInProgress"(e){}},computed:{URLbase(){let e=window.location.origin;return-1===e.toLowerCase().indexOf("imjur.000.pe")&&(e+="/imjur"),e}},mounted(){window.onkeyup=e=>{e.preventDefault(),e.stopPropagation(),this.state.keys[e.keyCode]=!1},window.onkeydown=e=>{switch(this.state.keys[e.keyCode]=!0,console.log(e.keyCode),e.keyCode){case 116:window.location.reload();break;case 65:this.state.keys[17]&&(e.preventDefault(),e.stopPropagation(),this.state.keys[16]&&this.deSelectAll(),this.state.keys[16]||this.selectAll());break;case 46:this.deleteSelected();break;case 37:this.prev();break;case 39:this.next();break;case 27:this.state.showPreview=!1,this.closePrompts(),this.state.uploadInProgress||(this.state.showModal=!1);break}},this.state.closeModal=this.closeModal,this.state.prev=this.prev,this.state.next=this.next,this.state.copy=this.copy,this.state.login=this.login,this.state.logout=this.logout,this.state.URLbase=this.URLbase,this.state.register=this.register,this.state.lastPage=this.lastPage,this.state.getPages=this.getPages,this.state.firstPage=this.firstPage,this.state.getAvatar=this.getAvatar,this.state.selectAll=this.selectAll,this.state.setCookie=this.setCookie,this.state.checkLogin=this.checkLogin,this.state.advancePage=this.advancePage,this.state.regressPage=this.regressPage,this.state.deSelectAll=this.deSelectAll,this.state.closePrompts=this.closePrompts,this.state.closePreview=this.closePreview,this.state.setLinksOwner=this.setLinksOwner,this.state.fetchUserLinks=this.fetchUserLinks,this.state.deleteSelected=this.deleteSelected,this.state.showUserSettings=this.showUserSettings,this.checkLogin()}};const Ks=(0,ye.A)(Js,[["render",n]]);var qs=Ks;(0,a.Ef)(qs).mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,o){if(!a){var n=1/0;for(h=0;h<e.length;h++){a=e[h][0],i=e[h][1],o=e[h][2];for(var l=!0,r=0;r<a.length;r++)(!1&o||n>=o)&&Object.keys(s.O).every((function(e){return s.O[e](a[r])}))?a.splice(r--,1):(l=!1,o<n&&(n=o));if(l){e.splice(h--,1);var d=i();void 0!==d&&(t=d)}}return t}o=o||0;for(var h=e.length;h>0&&e[h-1][2]>o;h--)e[h]=e[h-1];e[h]=[a,i,o]}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,o,n=a[0],l=a[1],r=a[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(i in l)s.o(l,i)&&(s.m[i]=l[i]);if(r)var h=r(s)}for(t&&t(a);d<n.length;d++)o=n[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(h)},a=self["webpackChunkimjur_000_pe"]=self["webpackChunkimjur_000_pe"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(429)}));a=s.O(a)})();
//# sourceMappingURL=app.7ffbc207.js.map